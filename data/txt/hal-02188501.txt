Semantic(s) of negative sequential patterns
Thomas Guyet

To cite this version:

Thomas Guyet.
d’Intelligence Artificielle Fondamentale, Jul 2019, Toulouse, France. pp.1-10. ￿hal-02188501￿

Semantic(s) of negative sequential patterns.

JIAF 2019 - 13èmes Journées

HAL Id: hal-02188501

https://inria.hal.science/hal-02188501

Submitted on 18 Jul 2019

HAL is a multi-disciplinary open access
archive for the deposit and dissemination of sci-
entific research documents, whether they are pub-
lished or not. The documents may come from
teaching and research institutions in France or
abroad, or from public or private research centers.

L’archive ouverte pluridisciplinaire HAL, est
destinée au dépôt et à la diffusion de documents
scientifiques de niveau recherche, publiés ou non,
émanant des établissements d’enseignement et de
recherche français ou étrangers, des laboratoires
publics ou privés.

Actes JIAF 2019

Semantic(s) of negative sequential patterns

Thomas Guyet
AGROCAMPUS-OUEST/IRISA – UMR6074
thomas.guyet@irisa.fr

Résumé

Dans le domaine de la fouille de motifs, un motif sé-
quentiel négatif exprime un comportement par une séquence
d’événements devant survenir et par des événements qui
doivent être absents. Par exemple, le motif (cid:104)a ¬b c(cid:105) décrit
l’absence d’un événement b entre les occurrences des évé-
nements a et c.

Dans cet article, nous mettons la lumière sur l’ambi-
guité de cette notation et nous identiﬁons huit sémantiques
possibles à la relation d’inclusion d’un motif dans une sé-
quence. Ces sémantiques sont illustrées et nous les étudions
formellement. Nous proposons ainsi des relations de domi-
nance et d’équivalence entre ces sémantiques, et nous met-
tons en évidence de nouvelles propriétés d’anti-monotonie.
Ces résultats pourraient être utilisés pour développer de
nouveaux algorithmes eﬃcaces pour la fouille de motifs sé-
quentiels négatifs fréquents.

Abstract

In the ﬁeld of pattern mining, a negative sequential pat-
tern speciﬁes a behavior by a sequence of events that must
occur and negative events that must be absent. For instance,
the pattern (cid:104)a ¬b c(cid:105) speciﬁes the absence of event b between
occurrences of a and c.

In this article, we shed light on the ambiguity of this no-
tation and we identify eight possible semantics for the con-
tainment relation between a pattern and a sequence. These
semantics are illustrated and formally studied. We propose
dominance and equivalence relations between them and we
establish new anti-monotonicity properties. These results
may be used to develop new algorithms to extract eﬃciently
frequent negative patterns.

1

Introduction

Pattern mining consists in exploring a set of potential
patterns to output all but only the most interesting ones.
The set of potential patterns can be seen as a search space
and the notion of pattern interestingness can be seen as a
set of constraints.

The search space in which lies the potential patterns de-
ﬁnes a pattern domain. A large number of pattern domains
have been proposed in the pattern mining community. The
most studied patterns domains [8] are: itemsets, sequential
patterns [12] and graph patterns. But a lot of variants from
these patterns domains have been proposed. As we focus
our attention on temporal data, we can mention: temporal
patterns [10], episodes [11] or chronicles [2, 5].

The notion of interestingness studied in pattern mining
often refers to the number of its occurrences in a database.
A pattern is said to be interesting if it occurs frequently in
a dataset of examples (frequent sequential pattern mining
task).
In practice, a pattern is frequent if its number of
occurrences is above a user-deﬁned threshold.

Therefore, counting sequences in which the pattern oc-
curs is of paramount importance. It is strongly related to
the containment relation which decides whether a pattern
occurs in a sequence or not. The support measure denotes
the counting of sequences in a dataset D that contains the
pattern p, denoted suppD(p).

The success of pattern mining techniques comes from an
anti-monotonicity property of some support measures [1].
Intuitively, if p is not frequent, no “larger” pattern than p
is frequent. The pattern mining trick is to prune the search
space as soon as an unfrequent pattern as been found. The
“is larger than” relation is a topological structure on the
set of patterns. As soon as a support measure is anti-
monotonic on this topological structure, the frequent pat-
tern mining trick can be used to eﬃciently prune the search
space. Ideally, this structure is a lattice. In this case, the
above strategy is complete and correct.

It is worth noticing that the support measure strongly
contributes to the semantic of the interestingness of pat-
terns.
In fact, output patterns depend on their supports
in the dataset(s) of examples. Diﬀerent support measures
have diﬀerent outputs. For instance, in sequential pattern
mining, counting occurrences considering gap constraints

does not result in the same set of patterns. 1

In this work, we explore the domain of negative sequen-
tial patterns. Sequential patterns describe a sequence of
items. The pattern occurs in a sequence while its items ap-
pear in the same order in a sequence. For instance, a pattern
(cid:104)a b c(cid:105) is read as “a occurs and then b occurs and ﬁnally
c occurs”. Negative sequential patterns are sequential pat-
terns with the speciﬁcation of absent events. Intuitively, the
syntax of a negative sequential pattern will be the follow-
ing (cid:104)a ¬b c(cid:105). This pattern is read as “a occurs and then c
occurs, but b does not occurs in between”.

The apparently intuitive notion of absent event appears
to be complex. Few approaches explored what seems to be
the same pattern domain [3, 4, 6, 9, 13, 14]. They use the
similar notation of negation (¬) but this unique syntax is
hiding diﬀerent semantics.

In this article, we bring the light on eight diﬀerent se-
mantics of negative sequential patterns and we study them
formally: we introduce dominance and equivalence re-
lations between these semantics, and we establish anti-
monotony results to thwart the idea that negative sequential
patterns are not anti-monotonic.

2 Negative sequential patterns

In the sequel, [n] = {1, . . . , n} denotes the set of the ﬁrst
n strictly positive integers. Let I be the set of items (al-
phabet). An itemset A = {a1 a2 ... am} ⊆ I is a set of
items. A sequence s is a set of sequentially ordered item-
sets s = (cid:104)s1 s2 ... sn(cid:105): ∀i, j ∈ [n],
i < j means that si
is located before s j in sequence s which starts by s1 and
ﬁnishes by sn.

Deﬁnition 1 (Negative sequential patterns (NSP)). A neg-
ative pattern p = (cid:104)p1 ¬q1 p2 ¬q2 . . . pn−1 ¬qn−1 pn(cid:105) is a
ﬁnite sequence where pi ⊆ I \ ∅ for all i ∈ [n] and qi ⊆ I
for all i ∈ [n − 1].

The length of a NSP, denoted | p| is n, its number of item-
sets (negative or positive). p+ = (cid:104)p1 . . . pn(cid:105) is so-called
the positive part of the NSP.

We denote by N the set of negative sequential patterns.
It can be noticed that Deﬁnition 1 introduces a syntactic

limitation on negative sequential patterns:

— a pattern cannot start neither ﬁnish by a negative pat-

tern,

— a pattern cannot have two successive negative item-

sets.

Example 1 (Negative sequential pattern). This example il-
lustrates notations of Deﬁnition 1. Let I = {a, b, c, d} and
p = (cid:104)a ¬(bc) (ad) d ¬(ab) d(cid:105). We have p1 = {a}, p2 = {ad},

p3 = {d}, p4 = {d} and q1 = {bc}, q2 = ∅, q3 = {ab}. The
length of p is | p| = 6 and p+ = (cid:104)a (ad) d d(cid:105).

3 Semantics of negative sequential patterns

The semantics of negative sequential patterns relies on
negative containment: a sequence s supports pattern p (or
p matches the sequence s) iﬀ s contains a sub-sequence s(cid:48)
such that every positive itemset of p is included in some
itemset of s(cid:48) in the same order and for any negative itemset
¬qi of p, qi is not included in any itemset occurring in the
sub-sequence of s(cid:48) located between the occurrence of the
positive itemset preceding ¬qi in p and the occurrence of
the positive itemset following ¬qi in p.

Deﬁnition 2 (Non inclusion). We introduce two operators
relating two itemsets P ⊆ I \ ∅ and I ⊆ I:

— partial non inclusion: P (cid:14) I ⇔ ∃e ∈ P, e (cid:60) I
— total non inclusion: P (cid:64) I ⇔ ∀e ∈ P, e (cid:60) I
and, by convention, ∅ (cid:64) I and ∅ (cid:14) I for all I ⊆ I.

In the sequel we will denote the general form of itemset

non inclusion by the symbol (cid:42), meaning either (cid:14) or (cid:64).

Intuitively, partial non inclusion considers the itemset as
a disjunction of negative constraints, i.e. at least one of the
item has to be absent, and total non-inclusion consider the
itemset as a conjunction of negative constraints: all items
have to be absent.

.





D =







Choosing one non inclusion interpretation or the other
has consequences on extracted patterns as well as on pat-
tern search. Let’s illustrate this with following sequence
dataset:

s1 = (cid:104)(bc) f a(cid:105)
s2 = (cid:104)(bc) (c f ) a(cid:105)
s3 = (cid:104)(bc) (d f ) a(cid:105)
s4 = (cid:104)(bc) (e f ) a(cid:105)
s5 = (cid:104)(bc) (cde f ) a(cid:105)
Table 1 compares the support of patterns under the two
semantics of itemset non-inclusion. Let’s consider pattern
p2 on sequence s2. Considering that the positive part of p2
is in s2, p2 occurs in the sequence iﬀ (cd) (cid:42) (c f ). In case
of total non inclusion, it is false that (cd) (cid:64) (c f ) because of
c that occurs in (c f ), and thus p2 does not occur in s2. But
in case of a partial non inclusion, it is true that (cd) (cid:14) (c f ),
because of d that does not occur in (c f ), and thus p2 occurs
in s2.

Lemma 1. 2 Let P, I ⊆ I be two itemsets:

P (cid:64) I =⇒ P (cid:14) I

(1)

Now, we formulate the notions of sub-sequence, non in-
clusion and absence by means of the concept of embed-
ding.

1. For instance, a max-gap constraint speciﬁes a maximum delay be-

tween two successive items of an occurrences.

2. All proofs are provided in Appendix A.

Table 1 – Lists of supported sequences in D by negative
patterns ( pi)i=1..4 under the total and partial non inclusion
semantics. Each pattern has the shape (cid:104)a ¬qi b(cid:105) where qi
are itemsets such that qi ⊂ qi+1.

partial
non inclusion
(cid:14)

total
non inclusion
(cid:64)

p1 = (cid:104)b ¬c a(cid:105)
p2 = (cid:104)b ¬(cd) a(cid:105)
p3 = (cid:104)b ¬(cde) a(cid:105)
p4 = (cid:104)b ¬(cdeg) a(cid:105)

{s1, s3, s4}
{s1, s2, s3, s4}
{s1, s2, s3, s4}
{s1, s2, s3, s4, s5}

{s1, s3, s4}
{s1, s4}
{s1}
{s1}

Deﬁnition 3 (Positive pattern embedding). Let s =
(cid:104)s1 . . . sn(cid:105) be a sequence and p = (cid:104)p1 . . . pm(cid:105) be a (posi-
tive) sequential pattern. e = (ei)i∈[m] ∈ [n]m is an embed-
ding of pattern p in sequence s iﬀ ∀i ∈ [m], pi ⊆ sei and
ei < ei+1 for all i ∈ [m − 1].

Deﬁnition 4 (Strict and soft embeddings of negative pat-
terns). Let s = (cid:104)s1 . . . sn(cid:105) be a sequence and p =
(cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) be a negative sequential pattern.
e = (ei)i∈[m] ∈ [n]m is a soft-embedding of pattern p in

sequence s iﬀ:

— pi ⊆ sei, ∀i ∈ [m]
— qi (cid:42) s j, ∀ j ∈ [ei + 1, ei+1 − 1] for all i ∈ [m − 1]
e = (ei)i∈[m] ∈ [n]m is a strict-embedding of pattern p in

sequence s iﬀ:

— pi ⊆ sei, ∀i ∈ [m]
— qi (cid:42) (cid:83)

j∈[ei+1,ei+1−1] s j for all i ∈ [m − 1]

Intuitively,

the constraint of a negative itemset qi is
checked on the sequence’s itemsets at positions in inter-
val [ei + 1, ei+1 − 1], i.e. between occurrences of the posi-
tive itemset surrounding the negative itemset in the pattern.
The soft embedding considers individually each of the se-
quence’s itemsets of [ei +1, ei+1 −1] while strict embedding
consider them as a whole.

Notation 1. Soft-embedding is denoted -embedding, and
strict-embedding is denoted -embedding.

Example 2 (Itemset absence semantics). Let p =
(cid:104)a ¬(bc) d(cid:105) be a pattern and four sequences:

Sequence

(cid:64)

(cid:64) (cid:14) (cid:14)

s1 = (cid:104)a c b e d(cid:105)
s2 = (cid:104)a (bc) e d(cid:105)
s3 = (cid:104)a b e d(cid:105)
s4 = (cid:104)a e d(cid:105)

(cid:51)

(cid:51) (cid:51)
(cid:51) (cid:51) (cid:51) (cid:51)

One can notice that each sequence contains a unique oc-
currence of (cid:104)a d(cid:105), the positive part of pattern p. Using
soft-embedding and partial non inclusion ((cid:42):=(cid:14)), p oc-
curs in s1, s3 and s4 but not in s2. Using strict-embedding

and partial non-inclusion, p occurs in sequence s3 and s4.
Indeed, items b and c occur between occurrences of a and
d in sequences 1 and 2. With total non inclusion ((cid:42):=(cid:64))
and either type of embeddings, the absence of an itemset is
satisﬁed if any of its item is absent. As a consequence, p
occurs only in sequence s4.

Lemma 2. If e is a -embedding, then e is a -embedding,
whatever is the itemset non-inclusion ((cid:42)).

Lemma 3. e is a -embedding iﬀ e is a -embedding when
(cid:42):=(cid:64).

Lemma 4. Let p = (cid:104)p1 ¬q1 . . . ¬qn−1 pn(cid:105) ∈ N s.t. |qi| ≤ 1
for all i ∈ [n − 1], then e is a -embedding iﬀ e is a -
embedding.

Lemma 4 shows that in the simple case of patterns
with negative singleton only, strict and soft-embeddings are
equivalent.

Lemma 5. Let p = (cid:104)p1 ¬q1 . . . ¬qn−1 pn(cid:105) ∈ N, if e is an
embedding of pattern p in some sequence s, then e is an
embedding of the positive sequential pattern p+ in s.

Example 2 illustrates the impact of
inclusion operator and of embedding type.

itemset non-

Another point that determines the semantics of negative
containment concerns the multiple occurrences of some
pattern in a sequence: should all or at least one occur-
rence(s) of the pattern positive part in the sequence satisfy
the non inclusion constraints?

Deﬁnition 5 (Negative pattern occurrence). Let s be a se-
quence, p be a negative sequential pattern, and p+ the pos-
itive part of p. Let (cid:42)∈ {(cid:64), (cid:14)} be a itemset non-inclusion
operator, and ∈ { , } correspond to the embedding strat-
egy ( : soft-embedding, and : strict-embedding).

(cid:42)

— Pattern p softly-occurs in sequence s, denoted p (cid:22)
s, iﬀ there exists at least one embedding of p in s.
— Pattern p strictly-occurs in sequence s, denoted
s, iﬀ for each embedding e of p+ in s, e is
p (cid:118)
also an embedding of p in s, and there exists at least
one embedding e of p+.

(cid:42)

Deﬁnition 5 allows for capturing two semantics for neg-
ative sequential patterns depending on the occurrences of
the positive part:

— strict occurrence: a negative pattern p occurs in a
sequence s iﬀ there exists at least one occurrence of
the positive part of pattern p in sequence s and every
such occurrence satisﬁes the negative constraints,
— soft occurrence: a negative pattern p occurs in a se-
quence s iﬀ there exists at least one occurrence of
the positive part of pattern p in sequence s and at
least one of these occurrences satisﬁes the negative
constraints.

Example 3 (Strict vs soft occurrence semantics). Let p =
(cid:104)a b ¬c d(cid:105) be a pattern, s1 = (cid:104)a b e d(cid:105) and s2 =
(cid:104)a b c a d e b d(cid:105) be two sequences. p+ = (cid:104)a b d(cid:105) occurs once
in s1 so there is no diﬀerence for occurrences under the
two semantics. But, it occurs fourth in s2 with embeddings
(1, 2, 5), (1, 2, 8), (1, 7, 8) and (4, 7, 8). The two ﬁrst occur-
rences do not satisfy the negative constraint (¬c) while the
two last occurrences do. Under the soft occurrence seman-
tics, pattern p occurs in sequence s2 whereas it does not
under the strict occurrence semantics.

Lemma 6. Let p be a NSP and s a sequence,

(cid:42)

p (cid:118)

s =⇒ p (cid:22)

(cid:42)

s

where ∈ { , } and (cid:42)∈ {(cid:14), (cid:64)}.

Lemma 7. Let p be a NSP and s a sequence,

p (cid:74)(cid:64)

s =⇒ p (cid:74)(cid:14)

s

where (cid:74)∈ {(cid:22), (cid:118)} and ∈ { , }

(2)

(3)

In this section, we shown that there are several semantics
associated to negative patterns. This leads to eight diﬀer-
ent types of pattern occurrences. We denote Θ the set of
considered pattern occurrence operators:

Θ =

(cid:26)
(cid:22)(cid:64)

, (cid:22)(cid:64)

(cid:14)

, (cid:22)

(cid:14)

, (cid:22)

, (cid:118)(cid:64)

, (cid:118)(cid:64)

, (cid:118)

(cid:14)

, (cid:118)

(cid:14)(cid:27)

These operators allows to disambiguate the semantics
of negative pattern containment. But, is there no useless
distinctions between containment relations? Is there some
equivalent containment relations in Θ? The next section
answers these questions by introducing the notion of dom-
inance between semantics. Then, we provide some results
about the anti-mononicity of these containment relations.

4 Dominance and equivalence between con-

tainment relations

Deﬁnition 6 (Dominance). For all θ, θ(cid:48) ∈ Θ, θ dominates
θ(cid:48), denoted θ (cid:49) θ(cid:48), iﬀ pθs =⇒ pθ(cid:48)s for all p ∈ N and all
sequence s.

The idea behind the dominance relation between two
containment relations θ and θ(cid:48) is related to the sequences
in which a pattern occurs. By deﬁnition, if θ (cid:49) θ(cid:48) then for
any pattern p ∈ N, if p occurs in a sequence s according
to the θ pattern containment relation, then it also occurs in
s according to the θ(cid:48) pattern containment relation. In the
context of pattern mining, such kinds of relation are useful
to propose algorithms which could beneﬁt from properties
of a dominating containment relation to extract eﬃciently
the patterns according to dominated containment relations.

Notation 2. We denote by θ (cid:54)(cid:49) θ(cid:48) iﬀ θ (cid:49) θ(cid:48) is false.

Lemma 8. Dominance relation is a pre-order.

Deﬁnition 7 (Equivalent containment relations). For all
θ, θ(cid:48) ∈ Θ, θ is equivalent to θ(cid:48), denoted θ ∼ θ(cid:48) iﬀ θ (cid:49) θ(cid:48) and
θ(cid:48) (cid:49) θ.

Lemma 9. ∼ is an equivalence relation on Θ.

Equivalent containment relations have the same seman-
tic. The sets of sequences in which a given pattern occurs
are the same and, reciprocally, the sets of negative patterns
which occur in a sequence are the same considering these
equivalent containment relations.

We now study the practical dominance relations we have

between the elements of Θ.

Proposition 1. The following dominances between con-
tainment relations hold:

(cid:74)(cid:42) (cid:49) (cid:74)(cid:42)
(cid:74)(cid:64) (cid:49) (cid:74)(cid:64)
(cid:42) (cid:49) (cid:22)
(cid:118)
(cid:74)(cid:64) (cid:49) (cid:74)(cid:14)

(cid:42)

and the following non-dominance statements hold:

(cid:74)(cid:14)

(cid:42)

(cid:118)
(cid:74)(cid:14)

(cid:54)(cid:49) (cid:74)(cid:64)
(cid:42)

(cid:54)(cid:49) (cid:22)
(cid:54)(cid:49) (cid:74)(cid:14)

(4)

(5)

(6)

(7)

(8)

(9)

(10)

where (cid:42)∈

(cid:110)(cid:64), (cid:14)(cid:111)

, (cid:74)∈ {(cid:22), (cid:118)} and ∈ { , }.

Proposition 1 gathers the results from the previous sec-
tion. Each line expresses several relationships between
pairs of containment relations. Equations 4-7 are domi-
nances deduced from Lemmas 2, 3, 6 and 7. Equations
8-10 states the absence of dominance for which we can ex-
hibit counterexamples. Figure 1 summarizes them. 3

In addition, many other dominance and non dominance
relationships can be deduced from Proposition 1 using the
transitivity of dominance (Lemma 8). Nonetheless, in this
work, some relationships between pairs of containment re-
lations can not be deduced from Proposition 1. For in-
stance, the relationship between (cid:118)
mined by Proposition 1.

is not deter-

and (cid:22)

(cid:14)

(cid:14)

One interesting result of Proposition 1 is that there are
(cid:14)(cid:19)
,

, (cid:118)(cid:64)(cid:17)

and

(cid:118)(cid:64)

, (cid:118)

(cid:118)

(cid:14)

(cid:18)

(cid:16)

two pairs of containment relations,
whose elements are equivalent.

3. Assuming that two containment relations are not equals iﬀ they are
diﬀerent, the dominance relation is a pre-order. The property is not cen-
tral in the following. Figure 1 illustrates clearly that it is not a partial
order. Indeed, two pairs of diﬀerent containment relations are symmetri-
cally dominated.

((cid:14),

, (cid:118))

((cid:14),

, (cid:22))

((cid:64),

, (cid:118))

((cid:64),

, (cid:22))

((cid:14),

, (cid:118))

((cid:14),

, (cid:22))

((cid:64),

, (cid:118))

((cid:64),

, (cid:22))

Figure 1 – Summary of the dominance relation between re-
lations of Θ. An arrow shows that the operator at the desti-
nation is dominated by the operator at the origin. Unidirec-
tional arrows indicates that the dominance relation holds in
one direction but not in the other direction.

It ensues that they are six equivalent classes of contain-
(cid:14)

(cid:14)

(cid:14)

(cid:110)
(cid:118)(cid:64)

, (cid:118)(cid:64)(cid:111)

,

and

(cid:26)
(cid:118)

(cid:14)(cid:27)
.

, (cid:118)

ment relations: (cid:22)(cid:64)

, (cid:22)(cid:64)

, (cid:22)

, (cid:22)

We can ﬁnally point out that Lemma 4 adds a dominance
relation when negative sequential patterns are restricted to
have singleton negative itemsets. In this case, the equiv-
, (cid:22)(cid:64)(cid:111)
,

, (cid:118)(cid:64)(cid:111)

(cid:110)
(cid:118)(cid:64)

(cid:110)
(cid:22)(cid:64)

(cid:26)
(cid:22)

and

(cid:14)(cid:27)

, (cid:22)

(cid:14)

,

alent classes become:
(cid:26)
(cid:118)

(cid:14)(cid:27)

, (cid:118)

(cid:14)

.

5 Anti-monotonicity

Our question is now to know whether there are contain-
ment relations that have more interesting properties. In our
original context of mining frequent negative sequential pat-
terns, we investigate the anti-monotonicity properties.

According to Zheng et al. [14], “the APriori principle
doesn’t apply to negative sequential pattern”. The “APri-
ori principle” can be understood as the anti-monotonicity
property. We will see that assertion is actually only par-
tially true.

The anti-monotonicity makes sense only with a par-
tial order on the set of NSPs. We ﬁrst introduce diﬀer-
ent possible partial orders and then we introduce the anti-
monotonicity.

For sake of conciseness, the remaining of the section
assumes that (cid:42):=(cid:64). Thus, we can count on the anti-
monotonicity of the non inclusion of itemsets: q ⊆ q(cid:48) =⇒
q(cid:48) (cid:42) q for all q, q(cid:48) ⊆ I. The following results can be
extended to the case (cid:42):=(cid:14) by reversing the inclusion rela-
tions for negatives in the partial orders.

5.1 Partial orders

Deﬁnition 8 introduces several relations between nega-
tive sequential patterns that are partial orders (see Proposi-
tion 2).

=

(cid:104)p1
=

p(cid:48)

k(cid:48)−1 ¬q(cid:48)

Deﬁnition 8
p2 ¬q2
¬q1
(cid:104)p(cid:48)
1 p(cid:48)
2 ¬q(cid:48)

p
pk(cid:105) and
k(cid:48) (cid:105) be two NSPs.

(NSP relations). Let
pk−1 ¬qk−1
· · ·
1 ¬q(cid:48)
k(cid:48)−1 p(cid:48)
2 · · · p(cid:48)
By deﬁnition, p (cid:67)· p(cid:48) iﬀ k ≤ k(cid:48) and ∃(ui)i∈[k] ∈ [k(cid:48)]k s.t.:
1. ∀i ∈ [k], pi ⊆ p(cid:48)
ui
2. ∀i ∈ [k − 1], qi ⊆ (cid:83)
3. k = k(cid:48) =⇒ ∃ j ∈ [k], p j (cid:44) p(cid:48)
4. ui < ui+1, for all i ∈ [k − 1]
by deﬁnition, p (cid:67) p(cid:48) iﬀ k ≤ k(cid:48) s.t.:

j∈[ui,ui+1−1] q(cid:48)
j

j or q j (cid:44) q(cid:48)

j

1. ∀i ∈ [k], pi ⊆ p(cid:48)
i
2. ∀i ∈ [k − 1], qi ⊆ q(cid:48)
i
3. k = k(cid:48) =⇒ pk (cid:44) p(cid:48)

k or ∃ j ∈ [k − 1] s.t. q j (cid:44) q(cid:48)

j

and, by deﬁnition, p (cid:67)+ p(cid:48) iﬀ k = k(cid:48) s.t.:

1. ∀i ∈ [k], pi = p(cid:48)
i
2. ∀i ∈ [k − 1], qi ⊆ q(cid:48)
i
3. ∃ j ∈ [k − 1] s.t. q j (cid:44) q(cid:48)
j
The (cid:67)· relation can be seen as the “classical” inclusion
relation between sequential patterns [12]. A NSP p is less
speciﬁc than p(cid:48) iﬀ p+ is a subsequence of p(cid:48)+ and negative
constraints are satisﬁed. The principal diﬀerence with (cid:67) is
that (cid:67)· permits to insert new positive itemsets in the middle
of the sequence while (cid:67) permits only insertion of new pos-
itive itemsets at the end. 4, 5 Nonetheless, it is still possible
to insert items to the positive itemsets. The (cid:67)+ does not even
permit such diﬀerences: each pair of positive itemsets must
be equals to have comparable NSP.

Lemma 10. For all p, p(cid:48) ∈ N,

p (cid:67)+ p(cid:48) =⇒ p (cid:67) p(cid:48) =⇒ p (cid:67)· p(cid:48)

(11)

Proposition 2 (Strict partial orders). (cid:67)· , (cid:67) and (cid:67)+ are par-
tial orders on N.

We can notice that the third conditions in Deﬁnition 8
enforce the relations to be irreﬂexive. Removing these con-
ditions enables to deﬁne non-strict partial orders.

5.2 Anti-monotonicity

Let us ﬁrst deﬁne the anti-monotonicity property of a
containment relation θ ∈ Θ considering a strict partial order
(cid:110) ∈ {(cid:67), (cid:67)· , (cid:67)+ }.

Deﬁnition 9 (Anti-monotonicity on (N, (cid:110))). Let θ ∈ Θ be
a containment relation, θ is anti-monotonic on (N, (cid:110)) iﬀ
for all p, p(cid:48) ∈ N and all sequence s:

p (cid:110) p(cid:48) =⇒ (cid:0)p(cid:48)θs =⇒ pθs(cid:1)
4. In sequential pattern mining, it is called a backward-extension of

the patterns.

5. We remind that, by Deﬁnition 1, pi (cid:44) ∅ and that we never have two

successive negative itemsets in a NSP.

First of all, we provide an example showing that none
of the containment relation is monotonic on (N, (cid:67)· ). Let
p = (cid:104)b ¬c a(cid:105), p(cid:48) = (cid:104)b ¬c d a(cid:105) and s = (cid:104)b e d c a(cid:105). Then,
we have p (cid:67)· p(cid:48). 6 Nonetheless, for each θ ∈ Θ, p(cid:48)θs but it
is false that pθs. In fact, the presence of the item d in the
sequence changes the scope for checking the absence of c.
This example illustrates the case of Zheng et al. [14] to
argue for the absence of anti-monotonic property for neg-
ative patterns. But, using partial orders that prevent from
changing the scope for absent items enables to exhibit anti-
monotonicity properties.
Proposition 3. (cid:22)(cid:64)
{ , }.

is anti-monotonic on (N, (cid:67)), where ∈

Proposition 3 shows that using the (cid:67) order leads to
have anti-monotonicity only for containment with soft-
occurrence, but not with strict-occurrence. Let us give
a counterexample illustrating the problem with strict-
occurrence. Let p = (cid:104)a ¬b c(cid:105), p(cid:48) = (cid:104)a ¬b c d(cid:105) and
s = (cid:104)a c d a b c(cid:105). Then, we have p (cid:67) p(cid:48). 7 Nonethe-
less, p(cid:48) (cid:118)
s holds but it is false that p (cid:118)
s. In fact,
without the presence of the item d in the pattern, there are
three possible embeddings of p in s. Considering (cid:118)
each
embedding must satisfy the negation of b, which is not the
case, while it is suﬃcient to have only one embedding sat-
isfying negations for (cid:22)

(cid:42)

(cid:42)

(cid:42)

(cid:42)

.

The previous example illustrates the problem while ex-
tending the pattern with additional itemsets. The same is-
sue is encountered with the following example consider-
ing same length patterns but with an extended itemset. Let
p = (cid:104)a ¬b c(cid:105), p(cid:48) = (cid:104)a ¬b (cd)(cid:105) and s = (cid:104)a (cd) a b c(cid:105). Then,
we have p (cid:67) p(cid:48). Nonetheless, p(cid:48) (cid:118)
s holds but it is false
that p (cid:118)

s.

(cid:42)

(cid:42)

Proposition 4. (cid:74)(cid:64)
{(cid:22), (cid:118)} and ∈ { , }.

is anti-monotonic on (N, (cid:67)+ ), where (cid:74)∈

We remind that this section presented the case of total
non-inclusion ((cid:42):=(cid:64)) but similar results can be obtained
with partial non-inclusion.

6 Come back to pattern mining

The deﬁnitions of pattern support, frequent pattern and
pattern mining derive naturally from the notion of occur-
rence of a negative sequential pattern, no matter the choices
for embedding (soft or strict), non inclusion (partial or to-
tal) and occurrences (soft or strict). However, these choices
concerning the semantics of NSPs impact directly the num-
ber of frequent patterns (under the same minimal threshold
constraint) and further the computation time. The stronger

the negative constraints, the lesser the number of sequences
containing a pattern, and the lesser the number of frequent
patterns.

Deﬁnition 10 (Pattern supports). Let D = {si}i∈[n] be a set
of n sequences and p be a NSP. The support of p in D, de-
noted suppD
θ (p) is the number of sequences of D in which
p occurs according to the θ ∈ Θ containment relation.

Notation 3. When there is no ambiguity on the dataset of
sequences, suppD
θ (p) is denoted suppθ(p). And, for sake
of readability, the θ operators are represented as triplets.

It is clear that if a containment relation θ is dominated
by another containment relation θ(cid:48), then the Proposition
1 implies that the support of the pattern evaluated with θ
is lower than the support of the pattern evaluated with θ(cid:48).
Thus, we have the following proposition.

Proposition 5. For all pattern p ∈ N:

supp(cid:42),
supp(cid:64),
supp(cid:42),
supp(cid:64),

,(cid:74)(p) ≤ supp(cid:42),
,(cid:74)( p) ≤ supp(cid:64),
,(cid:118)( p) ≤ supp(cid:42),
,(cid:74)(p) ≤ supp(cid:14),

,(cid:74)( p)
,(cid:74)( p)
,(cid:22)( p)
,(cid:74)( p)

(12)

(13)

(14)

(15)

In addition, we can also deduce anti-monotonicity prop-
erties for support measures from the Propositions 3 and 4.

Proposition 6. For all pairs of NSPs p, p(cid:48) ∈ N:

p (cid:67) p(cid:48) =⇒ supp(cid:64),
p (cid:67)+ p(cid:48) =⇒ supp(cid:64),

,(cid:22)( p(cid:48)) ≤ supp(cid:64),
,(cid:74)(p(cid:48)) ≤ supp(cid:64),

,(cid:22)( p)
,(cid:74)( p)

(16)

(17)

Then, there is two ways to use these results to imple-
ment eﬃcient frequent NSP mining algorithms. On the one
hand, the results from Proposition 6 can be directly used to
implement algorithms with eﬃcient and correct strategies
to prune the search space. 8 For (cid:22)(cid:64)
containment relation,
Equation 16 fully exploits the (cid:67) partial order to early prune
a priori unfrequent patterns. For (cid:118)(cid:64)
containment relation,
the (cid:67)+ partial order must be used to ensure the correctness
of the algorithm (Equation 17). Unfortunalety, this partial
order is less interesting than (cid:67) because it gives a priori in-
formation on less patterns than (cid:67) does. On the other hand,
the support evaluated with (cid:22)(cid:64)
is an upper bound for the
support of (cid:118)(cid:64)
(Equation 14). Thus, it is possible also to
prune patterns accessible with (cid:67) partial order without los-
ing the correctness of the pruning strategy.

7 Conclusion and perspectives

In this article, we explored the semantics of negation
in sequential patterns. We gave eight possible semantics

6. In this case, we do not have p (cid:67) p(cid:48) nor p (cid:67)+ p(cid:48)
7. In this case, we also have p (cid:67)· p(cid:48) but not p (cid:67)+ p(cid:48)

8. The completeness of the algorithms requires to study how to tra-

verse the search space. It is out of the scope of this article.

where the state of the art in sequential pattern mining did
not notice these diﬀerences. We investigated the formal
their respective relations
properties of these semantics:
(dominance and equivalence) and anti-monotonicity prop-
erties. These results may be used to develop new eﬃcient
algorithms to extract negative sequential patterns.

It is worth noticing that no semantics is “more” correct
or relevant than another one. It depends on the information
to be captured. Our objective is to give the opportunity
to make an informed choice. Even if, in the context of
pattern mining, the choice is constrained by computational
considerations. With the three proposed partial orders, we
have seen that interesting anti-monotonicity holds only for
some semantics. Thus, dominance relations may be used
to propose alternative search heuristics.

Hence, the ﬁrst perspective of this work is to develop
negative sequential pattern mining algorithms. This has
been done for containment relations ≺(cid:64)
[7]. 9 In this algo-
rithm, we also introduced maxgap and maxspan constrains
negative sequential patterns. The anti-mononicity proper-
ties still hold with these constraints. A step further, the
framework presented in this article would make possible to
propose a complete and correct algorithm to mine closed
NSP.

Our second perspective is to provide a complete results
on the dominance between containment relations. There
are still few cases that are undetermined to achieve this ob-
jective. Further studies aim at having results on the quo-
tient set Θ/ ∼.

Our third perspective is to propose new intuitive syn-
tax(es) of containment relations. The main problem was
the semantic overload of the negation symbol (¬) in the lit-
erature of negative sequential patterns. We are currently
working on some proposals and plan to evaluate them. To
be intuitive, these proposals are based on the equivalent
classes we highlight in this work.

References

[1] Agrawal, Rakesh et Ramakrishnan Srikant: Fast Al-
gorithms for Mining Association Rules in Large
Databases. Dans Proc. of the Int. Conf. on Very Large
Data Bases (VLDB), pages 487–499, 1994.

[2] Besnard, Philippe et Thomas Guyet: Chronicles. à

paraître, 2019.

[3] Cao, Longbing, Xiangjun Dong et Zhigang Zheng:
e-NSP: Eﬃcient negative sequential pattern mining.
Artiﬁcial Intelligence, 235:156–182, 2016.

quence databases. Expert System with Applications,
25(3):343–354, 2003.

[5] Dauxais, Yann, Thomas Guyet, David Gross-
Amblard et André Happe: Discriminant chronicles
mining - application to care pathways analytics. Dans
Proc. of Conf. on Artiﬁcial Intelligence in Medicine
(AIME), pages 234–244, 2017.

[6] Gong, Yongshun, Tiantian Xu, Xiangjun Dong
et Guohua Lv: e-NSPFI: Eﬃcient mining nega-
tive sequential pattern from both frequent and in-
frequent positive sequential patterns.
Int. Journal
of Pattern Recognition and Artiﬁcial Intelligence,
31(02):1750002, 2017.

[7] Guyet, Thomas et René Quiniou: NegPSpan: eﬃcient
extraction of negative sequential patterns with em-
bedding constraints. CoRR, abs/1804.01256, 2018.

[8] Han, Jiawei, Micheline Kamber et Jian Pei: Advanced
pattern mining. Dans Data Mining (Third Edition),
pages 279–325. Morgan Kaufmann, 2012.

[9] Hsueh, Sue Chen, Ming Yen Lin et Chien Liang
Chen: Mining negative sequential patterns for e-
commerce recommendations. Dans Proc. of Asia-
Paciﬁc Services Computing Conference, pages 1213–
1218, 2008.

[10] Laxman, Srivatsan et P. S. Sastry: A survey of tempo-
ral data mining. Sadhana, 31(2):173–198, 2006.

[11] Mannila,

Hannu

Toivonen
et A.
Heikki,
Inkeri Verkamo: Discovery of
frequent episodes
in event sequences. Data Mining and Knowledge
Discovery, 1(3):259–289, 1997.

[12] Mooney, Carl H. et John F. Roddick: Sequential pat-
tern mining – approaches and algorithms. ACM
Computing Survey, 45(2):1–39, 2013.

[13] Xu, Tiantian, Xiangjun Dong, Jianliang Xu et Yong-
shun Gong: E-msNSP: Eﬃcient negative sequential
patterns mining based on multiple minimum supports.
Int. Journal of Pattern Recognition and Artiﬁcial In-
telligence, 31(02):1750003, 2017.

[14] Zheng, Zhigang, Yanchang Zhao, Ziye Zuo et Long-
bing Cao: Negative-GSP: An eﬃcient method for min-
ing negative sequential patterns. Dans Proc. of the
Australasian Data Mining Conference, pages 63–67,
2009.

[4] Chen, Yen-Liang, Mei-Ching Chiang et Ming-Tat Ko:
Discovering time-interval sequential patterns in se-

A Proofs

9. A demo

of

such

an

algorithm is

accessible

online:

http://people.irisa.fr/Thomas.Guyet/negativepatterns/
evalnegpat.php.

Proof of Lemma 1. Let P, I ⊆ I s.t. P (cid:64) I. If P = ∅, by
deﬁnition, P (cid:14) I. Otherwise, because P is not empty, then
there exists e ∈ P s.t. e (cid:60) I, i.e. P (cid:14) I.

-embedding matches the one for

Proof of Lemma 2. Let e = (ei)i∈[m] ∈ [n]m be a
-
embedding of a NSP p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) in
a sequence s = (cid:104)s1 . . . sn(cid:105). For all positive itemsets
pi, the deﬁnition of
-
embedding. For a negative itemset qi, let us start with
(cid:14):=(cid:42). By deﬁnition 4, qi (cid:14) (cid:83)
j∈[ei+1,ei+1−1] s j, and by
Deﬁnition 2, ∃α ∈ qi, α (cid:60) (cid:83)
j∈[ei+1,ei+1−1] s j. And then,
∃α ∈ qi, ∀ j ∈ [ei + 1, ei+1 − 1], α (cid:60) s j. That is
∀ j ∈ [ei + 1, ei+1 − 1], ∃α ∈ qi, α (cid:60) s j. This shows
∀ j ∈ [ei + 1, ei+1 − 1], qi (cid:14) s j ( -embedding deﬁnition).
It remains (cid:64):=(cid:42). By deﬁnition 4, qi (cid:64) (cid:83)
j∈[ei+1,ei+1−1] s j,
and by Deﬁnition 2, ∀α ∈ pi, α (cid:60) (cid:83)
j∈[ei+1,ei+1−1] s j. And
then, ∀α ∈ qi, ∀ j ∈ [ei + 1, ei+1 − 1], α (cid:60) s j. That is
∀ j ∈ [ei + 1, ei+1 − 1], ∀α ∈ qi, α (cid:60) s j. This shows
∀ j ∈ [ei + 1, ei+1 − 1], qi (cid:42) s j.
Proof of Lemma 3. Let s = (cid:104)s1 . . . sn(cid:105) be a sequence
and p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) be a negative sequen-
-embedding implies -
tial pattern. Lemma 2 shows that
It remains the implication to the left. Let
embedding.
e = (ei)i∈[m] ∈ [n]m be a -embedding of pattern p in
sequence s. Then, the deﬁnition matches the one for
-
embedding for positives, pi. For negatives, qi, then ∀ j ∈
[ei + 1, ei+1 − 1], qi (cid:64) s j, i.e. ∀ j ∈ [ei + 1, ei+1 − 1], ∀α ∈
qi, α (cid:60) s j and then ∀α ∈ qi, ∀ j ∈ [ei + 1, ei+1 − 1], α (cid:60) s j.
It thus implies that ∀α ∈ pi, α (cid:60) (cid:83)
j∈[ei+1,ei+1−1] s j, i.e. by
deﬁnition, qi (cid:64) (cid:83)
Proof of Lemma 4. Let s = (cid:104)s1 . . . sn(cid:105) be a sequence and
p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) be a NSP s.t. ∀i,
|qi| ≤≤ 1.
Let e = (ei)i∈[m] ∈ [n]m be a -embedding of p in s then,
by deﬁnition, 1) pi ⊆ sei for all i ∈ [m] and 2) qi (cid:49) s j
for all j ∈ [ei + 1, ei+1 − 1]. In case |qi| = 0, there is no
constraint. In case |qi| = 1, and 2) becomes qi (cid:60) s j for
all j ∈ [ei + 1, ei+1 − 1] whatever (cid:42)∈ {(cid:14), (cid:64)}. Hence, qi (cid:60)
(cid:83)
j∈[ei+1,ei+1−1] s j (no matter (cid:14) or
(cid:97)). As a consequence e is a -embedding of p.

j∈[ei+1,ei+1−1] s j i.e. qi (cid:42) (cid:83)

j∈[ei+1,ei+1−1] s j.

Proof of Lemma 5. Let s = (cid:104)s1 . . . sn(cid:105) be a sequence and
p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) ∈ N be a pattern. By deﬁnition
4, if e = (ei)i∈[m] ∈ [n]m is an embedding of pattern p in
sequence s then ∀i ∈ [l]: pi ⊆ sei because pi is positive.
According to deﬁnition 3, e is an embedding of the positive
pattern p+.

Proof of Lemma 6. Let s = (cid:104)s1 . . . sn(cid:105) be a sequence and
(cid:42)
p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) ∈ N be a pattern s.t. p (cid:118)
s. Then, there exists e an embedding of p+ in s and, by
deﬁnition, it is also an embedding of p in s. This means
that p (cid:22)

s.

(cid:42)

Proof of Lemma 7. Let s = (cid:104)s1 . . . sn(cid:105) be a sequence and
p = (cid:104)p1 ¬q1 . . . ¬qm−1 pm(cid:105) ∈ N be a pattern.

We start by considering relations between semantics at
the embedding level, and then we will conclude at the pat-
tern level.

Let’s ﬁrst assume that

:= . Then, for all ( , (cid:64))-
embedding e = (ei)i∈[m] of pattern p in sequence s. Hence,
∀i ∈ [m], pi ⊆ sei and ∀i ∈ [m−1], ∀ j ∈ [ei+1, ei+1−1], qi (cid:64)
s j. According to eq. 1, we have qi (cid:14) s j. It comes that e is
a ( , (cid:22))-embedding.

Let’s now assume that

:= . Then, let e = (ei)i∈[m]
be a ( , (cid:64))-embedding of pattern p in sequence s. Hence,
∀i ∈ [m], pi ⊆ sei and ∀i ∈ [m − 1], qi (cid:64) (cid:83)
j∈[ei+1,ei+1−1] s j.
In addition (cid:83)
j∈[ei+1,ei+1−1] s j ⊆ I, then, ∀i ∈ [m − 1], qi (cid:14)
(cid:83)
j∈[ei+1,ei+1−1] s j according to eq. 1. It comes that e is an

( , (cid:22))-embedding.

Let’s come back at the pattern level. if p (cid:74)(cid:64)

s, in the
two cases ((cid:74)∈ {(cid:22), (cid:118)}). In the ﬁrst case the existing ( , (cid:64))-
embedding is a ( , (cid:14))-embedding, and in the second case,
all ( , (cid:64))-embeddings are ( , (cid:14))-embeddings. Therefore,
we have that p (cid:74)(cid:14)

s.

Proof of Lemma 8. A pre-order is a reﬂexive, transitive bi-
nary relation. The reﬂexivity of the relation comes with
Deﬁnition 6. Let θ, θ(cid:48), θ(cid:48)(cid:48) ∈ Θ be three dominance relations
s.t. θ (cid:49) θ(cid:48) and θ(cid:48) (cid:49) θ(cid:48)(cid:48). Then, for all p ∈ N and sequence
s: pθs =⇒ pθ(cid:48) s and pθ(cid:48)s =⇒ pθ(cid:48)(cid:48)s. Hence, we have,
pθs =⇒ pθ(cid:48)(cid:48)s, i.e. θ (cid:49) θ(cid:48)(cid:48).

Proof of Lemma 9. Let θ, θ(cid:48) ∈ Θ, by reﬂexivity of (cid:49) we
have that ∼ is reﬂexive. By deﬁnition (θ (cid:49) θ(cid:48) ∧ θ(cid:48) (cid:49) θ), ∼
is symmetric. And , ∼ is also transitive. Let θ, θ(cid:48), θ(cid:48)(cid:48) ∈ Θ
be three dominance relation s.t. θ ∼ θ(cid:48) and θ(cid:48) ∼ θ(cid:48)(cid:48) then,
θ (cid:49) θ(cid:48), θ(cid:48) (cid:49) θ(cid:48)(cid:48), θ(cid:48) (cid:49) θ and θ(cid:48)(cid:48) (cid:49) θ(cid:48). Hence, by transitivity
of (cid:49), θ (cid:49) θ(cid:48)(cid:48) and θ(cid:48)(cid:48) (cid:49) θ, θ ∼ θ(cid:48)(cid:48).

Proof of Proposition 1. Let p ∈ N and s a sequence.

According to Lemma 6, p (cid:118)

s. Thus we
obtain Equality 6 by Deﬁnition 6. is immediately deduced
from .

s =⇒ p (cid:22)

(cid:42)

(cid:42)

According to Lemma 7, p (cid:74)(cid:64)
obtain Equality 7 by Deﬁnition 6.

s =⇒ p (cid:74)(cid:14)

s. Thus we

According to Lemma 2, a -embedding is a -embedding
whatever the itemset non-inclusion operator. Then, we can
conclude that p (cid:74)(cid:42)

s =⇒ p (cid:74)(cid:42)

s (Equality 4).

In addition, Lemma 3 shows that a -embedding is -
embedding in case of total itemset non-inclusion. Then,
we can conclude that p (cid:74)(cid:64)

s =⇒ p (cid:74)(cid:64)

s (Equality 5).

Let now gives some counterexamples for known non-
dominance relationships. A counterexample for Equation
8 is p = (cid:104)a ¬(bc) d(cid:105) and s = (cid:104)a b d(cid:105). We have that p (cid:74)(cid:14)
but p (cid:74)(cid:64)
Similarly, a counterexample for Equation 9 is p = (cid:104)a ¬b c(cid:105)
and s = (cid:104)a c b c(cid:105), and a counterexample for Equation 10 is
p = (cid:104)a ¬(bc) d(cid:105) and s = (cid:104)a b c d(cid:105).

s is false.

s

Proof of Lemma 10. We start with the implication p (cid:67)+
p(cid:48) =⇒ p (cid:67) p(cid:48). Let p, p(cid:48) ∈ N s.t. p (cid:67)+ p(cid:48). By deﬁni-
tion, k = k(cid:48) and 1. ∀i ∈ [k], pi = p(cid:48)
i, 2. ∀i ∈ [k − 1], qi ⊆ q(cid:48)

i

and 3. ∃ j ∈ [k − 1] s.t. qi (cid:44) q(cid:48)
i. A particular case of 1.
i. In addition, third condition of (cid:67)
is that ∀i ∈ [k], pi ⊆ p(cid:48)
is obtained easily from 3. adding a disjunctive condition.
Hence, p (cid:67) p(cid:48).

We now prove the second implication: p (cid:67) p(cid:48) =⇒ p (cid:67)·
p(cid:48). Let p, p(cid:48) ∈ N s.t. p(cid:67) p(cid:48). Let’s now deﬁne the sequence
ui such that ui = i for all i ∈ [k]. By construction, we
have that ui < ui+1, for all i ∈ [k − 1] (4.). In addition, by
deﬁnition of (cid:67), we have that ∀i ∈ [k], pi ⊆ p(cid:48)
= p(cid:48)
ui, and
i
= (cid:83)
j∈[ui,ui+1−1] q(cid:48)
j∈[i,(i+1)−1] q(cid:48)
∀i ∈ [k − 1], qi ⊆ q(cid:48)
j.
j
i
k or ∃ j ∈ [k − 1] s.t. q j (cid:44) q(cid:48)
Assuming k = k(cid:48), then pk (cid:44) p(cid:48)
j.
If pk (cid:44) p(cid:48)
k the third condition of (cid:67)· is satisﬁed (with j = k).
Otherwise, it is also satisﬁed with the j of the deﬁnition of
(cid:67).

= (cid:83)

Proof of Proposition 2. We begin with the (cid:67)+ relation. We
ﬁrst remind that (cid:67)+ is a strict partial order iﬀ the three fol-
lowing conditions hold:

1. ∀p ∈ N, not p (cid:67)+ p (irreﬂexive),
2. ∀p, p(cid:48), p(cid:48)(cid:48) ∈ N, p (cid:67)+ p(cid:48) and p(cid:48) (cid:67)+ p(cid:48)(cid:48) =⇒ p (cid:67)+ p(cid:48)(cid:48)

(transitivity),

= q(cid:48)(cid:48)

= p(cid:48)(cid:48)

i ⊆ q(cid:48)(cid:48)

i and q(cid:48)

3. ∀p, p(cid:48) ∈ N, p (cid:67)+ p(cid:48) =⇒ not p(cid:48) (cid:67)+ p (asymmetry)
Irreﬂexive. Let’s assume that ∃ ∈ N s.t. p (cid:67)+ p. Then,
because k = k(cid:48) the third condition implies that ∃ j ∈ [k − 1]
s.t. q j (cid:44) q j, which is absurd. Then (cid:67)+ is irreﬂexive.
Transitivity. Let p, p(cid:48), p(cid:48)(cid:48) ∈ N s.t. p (cid:67)+ p(cid:48) and p(cid:48) (cid:67)+ p(cid:48)(cid:48).
Then, for all i ∈ [k], pi = p(cid:48)
i and for all i ∈ [k − 1],
i
i (k = k(cid:48) = k(cid:48)(cid:48)). Finally, it is not possible to
i ⊆ q(cid:48)(cid:48)
qi ⊆ q(cid:48)
have qi = q(cid:48)(cid:48)
i for all i ∈ [k − 1]. In fact, if we have these
equalities, then we would have qi = q(cid:48)
i for all
i
i ∈ [k − 1] because qi ⊆ q(cid:48)
i . But, it is not possible
according to 3. Therefore, we have that p (cid:67)+ p(cid:48)(cid:48).
Asymmetry. Let p, p(cid:48) ∈ N s.t. p (cid:67)+ p(cid:48). Then, according to
2. and 3., there exists j ∈ [k − 1] s.t. q j (cid:32) q(cid:48)
j. And then, it
is not possible to have q(cid:48)
j ⊆ q j. As a consequence, we can
not have p(cid:48) (cid:67)+ p.
We now prove that (cid:67) is a strict partial order.
Irreﬂexive. Let’s assume that ∃ ∈ N s.t. p (cid:67) p. Then,
because k = k(cid:48) and that it is not possible that pk (cid:44) pk, then
the third condition implies that ∃ j ∈ [k − 1] s.t. q j (cid:44) q j,
which is also absurd. Then (cid:67) is irreﬂexive.
Transitivity. Let p, p(cid:48), p(cid:48)(cid:48) ∈ N s.t. p (cid:67) p(cid:48) and p(cid:48) (cid:67) p(cid:48)(cid:48).
Then, for all i ∈ [k], pi ⊆ p(cid:48)
i and for all i ∈ [k − 1],
(k ≤ k(cid:48) ≤ k(cid:48)(cid:48)). Finally, if k = k(cid:48)(cid:48), then
qi ⊆ q(cid:48)
k = k(cid:48)(cid:48) = k(cid:48). Assuming that pk = p(cid:48)
k then pk =
k and p(cid:48)
k(cid:48)(cid:48) . Assuming that pk (cid:44) p(cid:48)
(cid:44) p(cid:48)(cid:48)
p(cid:48)(cid:48)
k or p(cid:48)
k , then ∃ j ∈ [k − 1]
j , and hence q j (cid:44) q(cid:48)(cid:48)
s.t. q j (cid:44) q(cid:48)
j or q(cid:48)
j . Then, we have
that p (cid:67) p(cid:48)(cid:48).
Asymmetry. Let p, p(cid:48) ∈ N s.t. p (cid:67) p(cid:48). Then, if k < k(cid:48)
we can not have p(cid:48) (cid:67) p. Assuming that k = k(cid:48) and that
k for the same reason as the asymmetry of (cid:67)+ , it
pk = p(cid:48)
k the, pk (cid:32) p(cid:48)
is not possible to have q j (cid:44) q(cid:48)
k
(according to 1.) and then it is not possible to have p(cid:48)
j ⊆ p j.
As a consequence, we can not have p(cid:48) (cid:67) p.

j. If pk (cid:44) p(cid:48)

i ⊆ q(cid:48)(cid:48)

i ⊆ p(cid:48)(cid:48)

= p(cid:48)(cid:48)

(cid:44) q(cid:48)(cid:48)

k

k

j

i

(cid:83)

= (cid:83)

j∈[ui,ui+1−1]

We now prove that (cid:67)· is a strict partial order.
Irreﬂexive. Let’s assume that ∃ ∈ N s.t. p (cid:67) p. Then, the
unique strictly incremental (auto-)mapping is ui = i, for all
i ∈ [k]. Then, the third condition implies that ∃ j ∈ [k − 1]
s.t. q j (cid:44) q j or p j (cid:44) p j, which is absurd. Then (cid:67)· is irreﬂex-
ive.
Transitivity. Let p, p(cid:48), p(cid:48)(cid:48) ∈ N s.t. p (cid:67)· p(cid:48) and p(cid:48) (cid:67)· p(cid:48)(cid:48).
We denotes by (ui)i ∈ [k(cid:48)]k and (vi)i ∈ [k(cid:48)(cid:48)]k(cid:48)
the respective
mapping, and we deﬁne (wi)i ∈ [k(cid:48)(cid:48)][k] such that wi = vui
= p(cid:48)(cid:48)
for all i ∈ [k]. Then, for all i ∈ [k], pi ⊆ p(cid:48)
⊆ p(cid:48)(cid:48)
wi;
ui
vui
qi ⊆ (cid:83)
l∈[v j,v j+1−1] q(cid:48)(cid:48)
j∈[ui,ui+1−1] q(cid:48)
l . The
j
union of the q(cid:48)(cid:48)
in the intervals [v j, v j+1 − 1] for j ∈
l
[ui, ui+1 − 1] can be sum up as an union on the interval
[vui, v(ui+1−1)+1 − 1] = [vui, vui+1 − 1] = [wi, wi+1 − 1] because
intervals are contiguous. Then, qi ⊆ (cid:83)
j . Fi-
nally, if k = k(cid:48)(cid:48), then k = k(cid:48)(cid:48) = k(cid:48) and then it exists j ∈ [k],
s.t. p j (cid:44) p(cid:48)
j or
q j (cid:44) q(cid:48)(cid:48)
Asymmetry. Let p, p(cid:48) ∈ N s.t. p (cid:67)· p(cid:48). Then, if k < k(cid:48) we
can not have p(cid:48) (cid:67)· p. Assuming that k = k(cid:48) (and thus ui = i
for all i ∈ [k]), we have that it exists j ∈ [k] s.t. p j (cid:44) p(cid:48)
j or
q j (cid:44) q(cid:48)
j. If p j (cid:44) p(cid:48)
j, it is not
possible to have p(cid:48)
j, then, according to 2.
q j (cid:32) (cid:83)
j∈[ui,ui+1−1] q(cid:48)
j. Thus, it is not possible to have
j
j ⊆ q j = (cid:83)
q(cid:48)
j∈[ui,ui+1−1] q j. As a consequence, we can not
have p(cid:48) (cid:67)· p.

j or q j (cid:44) q(cid:48)
j . As a consequence, we have p (cid:67)· p(cid:48)(cid:48).

j then, according to 1. p j (cid:32) p(cid:48)
j ⊆ p j. If q j (cid:44) q(cid:48)

j . Thus, p j (cid:44) p(cid:48)(cid:48)

j∈[wi,wi+1−1] q(cid:48)(cid:48)

j ⊆ p(cid:48)(cid:48)

j ⊆ q(cid:48)(cid:48)

= q(cid:48)

Proof of Proposition 3. We start this proof by a small re-
sult about the anti-monotonicity of (cid:64). Let P, Q ∈ I be two
itemsets s.t. P ⊆ Q, and I ∈ I another itemset. Then,
Q (cid:64) I =⇒ P (cid:64) I. In fact, Q (cid:64) I implies that for all
e ∈ Q, e (cid:60) I, and because P ⊆ Q, we also have that
e ∈ P, e (cid:60) I.

(cid:104)p(cid:48)

. . . ¬qm−1 pm(cid:105) ∈ N and p(cid:48) =

Let p = (cid:104)p1 ¬q1
m(cid:48) (cid:105) ∈ N be two NSP s.t. p (cid:67) p(cid:48).
1 ¬q(cid:48)
m(cid:48)−1 p(cid:48)
1 . . . ¬q(cid:48)
We ﬁrst show that an ( , (cid:64))-embedding of p(cid:48)

in a
induces an ( , (cid:64))-
i ⊆ sei, ∀i ∈
(cid:64) s j, for all j ∈ [ei + 1, ei+1 − 1] and for all

sequence s, denoted e = (ei)i∈[m(cid:48)],
embedding of p. By Deﬁnition 4, we have p(cid:48)
[m(cid:48)] and q(cid:48)
i
i ∈ [m(cid:48) − 1].
On the other side, p(cid:67) p(cid:48) implies that pi ⊆ p(cid:48)
i for all i ∈ [m].
Then, because m ≤ m(cid:48) ( p (cid:67) p(cid:48)), we have that pi ⊆ sei for
all i ∈ [m]. In addition, p (cid:67) p(cid:48) also implies that qi ⊆ q(cid:48)
i
for all i ∈ [m − 1] and thus, by anti-monotonicity of (cid:64) (and
(cid:64) s j), we have qi (cid:64) s j for all j ∈ [ei + 1, ei+1 − 1] and for
q(cid:48)
i
all i ∈ [m − 1]. In conclusion, we have that e = (ei)i∈[m] is
an ( , (cid:64))-embedding of p.

We now show that an ( , (cid:64))-embedding of p(cid:48)

in a
induces an ( , (cid:64))-
sequence s, denoted e = (ei)i∈[m(cid:48)],
embedding of p. By Deﬁnition 4, we have pi ⊆ sei, ∀i ∈
[m(cid:48)] and qi (cid:64) (cid:83)
On the other side, p(cid:67) p(cid:48) implies that pi ⊆ p(cid:48)
i for all i ∈ [m].
Then, because m ≤ m(cid:48) (p (cid:67) p(cid:48)), we have that pi ⊆ sei for
all i ∈ [m]. In addition, p (cid:67) p(cid:48) also implies that qi ⊆ q(cid:48)
i
for all i ∈ [m − 1], by anti-monotonicity of (cid:64), we have

j∈[ei+1,ei+1−1] s j, for all i ∈ [m(cid:48) − 1].

qi (cid:64) (cid:83)
have that e = (ei)i∈[m] is an ( , (cid:64))-embedding of p.

j∈[ei+1,ei+1−1] s j, for all i ∈ [m − 1]. In conclusion, we

Proof of Proposition 4. Let p = (cid:104)p1 ¬q1 . . . ¬qk−1 pk(cid:105) ∈
N and p(cid:48) = (cid:104)p(cid:48)
1 ¬q(cid:48)
k(cid:48)−1 p(cid:48)
k(cid:48) (cid:105) ∈ N be two NSP s.t.
p (cid:67)+ p(cid:48). Thus, we have that k = k(cid:48).

1 . . . ¬q(cid:48)

Similarly to the proof of Proposition 3, we can show
that any ( , (cid:64))-embedding of p(cid:48) in s induces an ( , (cid:64))-
embedding of p in s. This enables to conclude that (cid:22)(cid:64)
is
anti-monotonic on (N, (cid:67)+ ).

The anti-monotonicity of (cid:118)(cid:64)

requires that each embed-
ding of p+ in s satisﬁes the negations. Let us assume that
p(cid:48) (cid:118)(cid:64)
s, then there exists an embedding (ei)i∈[k] of p(cid:48).
(ei)i∈[k] is also an embedding of p(cid:48)+ (Lemma 5). According
to 1. and because k = k(cid:48), p(cid:48)+ = p+, and then (ei)i∈[k] is an
embedding of p in s. Thus, we shown that there is at least
one embedding of p+ in s. If (cid:118)(cid:64)
is not anti-monotonic, then
there exists an embedding (ei)i∈[k] of p+ such that ∃ j ∈ [k]
it is false that q j (cid:64) sl
and l ∈ [e j + 1, e j+1 − 1], s.t.
(∃α ∈ q j, α ∈ sl). According to 2. q j ⊆ q(cid:48)
j, and thus it
(cid:64) sl. Nonetheless, (ei)i∈[k] is also an embedding
is false q(cid:48)
j
of p(cid:48)+. And p(cid:48) (cid:118)(cid:64)
(cid:64) sl. There is a
contradiction, thus (cid:118)(cid:64)

s, it implies that q(cid:48)
j
is anti-monotonic.

The anti-monotonicity of (cid:118)(cid:64)

requires that each embed-
ding of p+ in s satisﬁes the negations. Let us assume that
p(cid:48) (cid:118)(cid:64)
s, then there exists an embedding (ei)i∈[k] of p(cid:48).
(ei)i∈[k] is also an embedding of p(cid:48)+ (Lemma 5). According
to 1. and because k = k(cid:48), p(cid:48)+ = p+, and then (ei)i∈[k] is an
embedding of p in s. Thus, we shown that there is at least
one embedding of p+ in s. If (cid:118)(cid:64)
is not anti-monotonic, then
there exists an embedding (ei)i∈[k] of p+ such that ∃ j ∈ [k],
s.t. it is false that q j (cid:64) (cid:83)
l∈[e j+1,e j+1−1] sl. According to 2.
q j ⊆ q(cid:48)
j, and thus it is false q(cid:48)
l∈[e j+1,e j+1−1] sl. Nonethe-
less, (ei)i∈[k] is also an embedding of p(cid:48)+. And p(cid:48) (cid:118)(cid:64)
s, it
implies that q(cid:48)
l∈[e j+1,e j+1−1] sl. There is a contradiction,
j
thus (cid:118)(cid:64)

is anti-monotonic.

(cid:64) (cid:83)

(cid:64) (cid:83)

j

Proof of Proposition 5. Let θ, theta(cid:48) ∈ Θ, then θ (cid:49) θ(cid:48) =⇒
suppθ( p) ≤ suppθ(cid:48) ( p) for all p ∈ N (by Deﬁnition 6 of the
dominance relation). Thus, Proposition 5 comes immedi-
ately with Proposition 1.

Proof of Proposition 6. Let p, p(cid:48) ∈ N be two negative se-
quential patterns such that p (cid:67) p(cid:48). According to Propo-
=⇒ p (cid:22)(cid:64)
sition 3, p(cid:48) (cid:22)(cid:64)
s for all s. Thus,
,(cid:22)( p).
supp(cid:64),
If p (cid:67)+ p(cid:48). According to Proposition 4, p(cid:48) (cid:74)(cid:64)
,(cid:74)( p).

s for all s. Thus, supp(cid:64),

,(cid:74)( p) ≤ supp(cid:64),

,(cid:22)( p) ≤ supp(cid:64),

s =⇒

p (cid:74)(cid:64)

s

