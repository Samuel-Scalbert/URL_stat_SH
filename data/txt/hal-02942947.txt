So, what exactly is a qualitative calculus?
Armen Inants, Jérôme Euzenat

To cite this version:

Armen Inants, Jérôme Euzenat. So, what exactly is a qualitative calculus?. Artificial Intelligence,
2020, 289, pp.103385. ￿10.1016/j.artint.2020.103385￿. ￿hal-02942947￿

HAL Id: hal-02942947

https://hal.science/hal-02942947

Submitted on 18 Sep 2020

HAL is a multi-disciplinary open access
archive for the deposit and dissemination of sci-
entific research documents, whether they are pub-
lished or not. The documents may come from
teaching and research institutions in France or
abroad, or from public or private research centers.

L’archive ouverte pluridisciplinaire HAL, est
destinée au dépôt et à la diffusion de documents
scientifiques de niveau recherche, publiés ou non,
émanant des établissements d’enseignement et de
recherche français ou étrangers, des laboratoires
publics ou privés.

So, what exactly is a qualitative calculus?

Armen Inants, J´erˆome Euzenat

Univ. Grenoble Alpes, Inria, CNRS, Grenoble INP, LIG 38000 Grenoble, France

Abstract

The paradigm of algebraic constraint-based reasoning, embodied in the notion of
a qualitative calculus, is studied within two alternative frameworks. One frame-
work deﬁnes a qualitative calculus as “a non-associative relation algebra (NA)
with a qualitative representation”, the other as “an algebra generated by jointly
exhaustive and pairwise disjoint (JEPD) relations”. These frameworks provide
complementary perspectives: the ﬁrst is intensional (axiom-based), whereas the
second one is extensional (based on semantic structures). However, each deﬁni-
tion admits calculi that lie beyond the scope of the other. Thus, a qualitatively
representable NA may be incomplete or non-atomic, whereas an algebra gen-
erated by JEPD relations may have non-involutive converse and no identity
element. The divergence of deﬁnitions creates a confusion around the notion
of a qualitative calculus and makes the “what” question posed by Ligozat and
Renz actual once again. Here we deﬁne the relation-type qualitative calculus uni-
fying the intensional and extensional approaches. By introducing the notions of
weak identity, inference completeness and Q-homomorphism, we give equivalent
deﬁnitions of qualitative calculi both intensionally and extensionally. We show
that “algebras generated by JEPD relations” and “qualitatively representable
NAs” are embedded into the class of relation-type qualitative algebras.

1. Introduction

Qualitative calculi are algebraic languages used for qualitative constraint-
based reasoning over relational knowledge. The “qualitative calculus” paradigm
emerged and has been shaped in the Qualitative Spatial and Temporal Reason-
ing ﬁeld (Aiello et al., 2007; Ligozat, 2013). A recent survey (Dylla et al., 2017)
outlines over 40 families of qualitative spatio-temporal calculi, each covering one
particular aspect of time or space, e.g. topology, direction, orientation, relative
duration, etc. Among standard examples are Allen’s interval calculus (Allen,
1983), Region Connection Calculi RCC-5 and RCC-8 (Randell et al., 1992),

This work is under a CC BY-NC-ND 4.0 license.
The published version’s DOI is 10.1016/j.artint.2020.103385.

Author version

and Oriented Point Relation Algebras OPRAm (Moratz, 2006). However, the
paradigm of algebraic constraint-based reasoning has relevance within a broader
scope of knowledge representation and reasoning. For example, there are quali-
tative calculi developed in the ﬁeld of ontology matching (Inants and Euzenat,
2015; Inants et al., 2016). Moreover, there are algebraic calculi that combine
both qualitative and quantitative information (Kautz and Ladkin, 1991; Hirsch,
1996; Meiri, 1996; Ouaknine and Worrell, 2008; Li and Liu, 2010; Inants et al.,
2016).

Frameworks that study qualitative calculi have evolved in two diﬀerent direc-
tions. One approach is representation-based: it started by deﬁning qualitative
calculi as relation-algebraic representations (Ladkin and Maddux, 1994), then
the deﬁnition was weakened to “weak representations” (Ligozat and Renz, 2004),
then strengthened to “semi-strong representations” (Mossakowski et al., 2006),
and ﬁnally expanded to “qualitative representations” (Hirsch et al., 2019). We
call this approach intensional, since it deals with abstract relations and de-
scribes their properties axiomatically. In contrast, the second approach deals
with sets of concrete binary relations and deﬁnes operations on them. It started
with deﬁning weak composition on strong partition schemes (Ligozat and Renz,
2004), then was generalized to arbitrary jointly exhaustive and pairwise disjoint
(JEPD) relations (Dylla et al., 2013) by introducing weak converse. We call this
approach extensional, since it is based on concrete binary relations.

The problem is that the two deﬁnitions diverge: each of them admits cal-
culi that lie beyond the scope of the other. The algebras that correspond to
each deﬁnition diﬀer in their properties, as shown in Table 1. For instance,
the algebra CDR generated by cardinal direction relations (Skiadopoulos and
Koubarakis, 2004) is not a non-associative relation algebra, as it is required by
the intensional deﬁnition. On the other hand, the inﬁnite algebra of qualitative
distances on a real line (Hirsch et al., 2019) is not complete, thus cannot be
described as an algebra generated by JEPD relations.

Table 1: Qualitatively representable algebras (Hirsch et al., 2019) in comparison with
algebras generated by JEPD relations (Dylla et al., 2013).

Algebraic property
converse is involutive (r˘˘ = r)
distinguished identity element
completeness
atomicity

QRA algebras
yes
yes
not necessarily
not necessarily

QAJEPD algebras
not necessarily
not necessarily
yes
yes

To overcome this divergence, we introduce the notions of Q-representation,
inference completeness and weak identity, enabling to expand the former in-
tensional and extensional deﬁnitions of qualitative calculi. We prove that the
resulting deﬁnitions of qualitative calculi are equivalent and show that they
deﬁne the broadest class of algebras with respect to a predeﬁned set of charac-
teristic properties. Finally, we embed the known classes of qualitative calculi
into this general framework.

2

Qualitative calculi of arity greater than two, as well as non-relation-type

calculi, lie beyond the scope of this paper.

The rest of the paper is structured as follows. Section 2 provides the nec-
essary algebraic background. In Section 3, we give some historical notes and
discuss the state-of-the-art deﬁnitions of qualitative calculi. We specify the class
of qualitative algebras corresponding to each deﬁnition. Section 4 gives a general
perspective on the algebraic approach to constraint-based reasoning and deﬁnes
the notion of a relation-type qualitative calculus within this context. Section 5
deﬁnes the class of relation-type qualitative algebras in two equivalent ways: in-
tensional and extensional. In Section 6, we embed “qualitatively representable
NAs” and “algebras generated by JEPD relations” into the class of qualitative
algebras deﬁned in Section 5. We provide intensional and extensional classiﬁ-
cation of important subclasses of qualitative algebras. Finally, Section 7 gives
concluding remarks and directions for future work.

2. Preliminaries

We assume familiarity with basic universal-algebraic notions such as signa-
ture, algebra, subalgebra, homomorphism, isomorphism, direct product, etc.
(Burris and Sankappanavar, 1981).

An algebra B = (B, +,¯) with a binary operation + called Boolean sum and
a unary operation ¯ called complement is called a Boolean algebra if it satisﬁes
the following equations:

a + b = b + a,

(a + b) + c = a + (b + c),

(a + b) + (a + b) = a.

(1)

The standard derived operations and constants are: Boolean product a ·
b = (a + b), unit element 1 = a + a, zero element 0 = 1. An example of a
Boolean algebra is the powerset of any set X, denoted by ℘(X), together with
set union ∪ and complement −X deﬁned as −X (Y ) = X\Y . Subalgebras of
powerset Boolean algebras ℘(X) are called ﬁelds of sets. Every Boolean algebra
is isomorphic to a ﬁeld of sets. A partial order ≤ is deﬁned on B as a ≤ b
iﬀ a + b = b. A non-zero element a of a Boolean algebra is called an atom if
0 ≤ b ≤ a implies that b = 0 or b = a for any b. A Boolean algebra is atomic if
every element is a supremum of atoms below it (Birkhoﬀ, 1973). The set of all
atoms of B is denoted by At(B). For any element x of B, At(x) denotes the set
of those atoms a, for which a ≤ x.

A Boolean algebra B is said to be complete, if the poset (B, ≤) has all
suprema and all inﬁma. Every complete atomic Boolean algebra is isomorphic
to a powerset Boolean algebra. If X is a set of sets, then we will use a shorter
notation ∪X instead of ∪X∈X X, and ∩X for ∩X∈X X.

An expansion of a Boolean algebra with one or more operations is called
a Boolean algebra with operators (BAO) if each of these operations is additive
in every argument (J´onsson and Tarski, 1951). A BAO is atomic if so is its
Boolean reduct. A BAO is said to be complete if its Boolean reduct is complete
and if each of its operators is completely additive.

3

A relation-type algebra is an algebra with a signature consisting of Boolean
operations +, ·,¯, 0, 1, a binary operation ‘;’ called relative product, a unary
operation ‘˘’ called converse, and a constant ‘1(cid:48)’ called the identity element.
A relation-type algebra A = (A, +, ·,¯, 0, 1, ; ,˘, 1(cid:48)) is called a non-associative
relation algebra 1 (NA) (Maddux, 1982), if

1) the reduct (A, +, ·,¯, 0, 1) is a Boolean algebra,

2) 1(cid:48); x = x; 1(cid:48) = x (identity law),

3) (x; y) · z = 0 ⇔ (x˘; z) · y = 0 ⇔ x · (z; y˘) = 0 (Peircean law),

for all x, y, z ∈ A. A non-associative relation algebra A is called

a) a weakly-associative relation algebra, if (1(cid:48) · x); (1; 1) = ((1(cid:48) · x); 1); 1,

b) a semi-associative relation algebra, if x; (1; 1) = (x; 1); 1,

c) a relation algebra, if (x; y); z = x; (y; z),

for all x, y, z ∈ A. The respective classes of algebras are denoted by NA, WA,
SA and RA. The following inclusions hold: NA ⊃ WA ⊃ SA ⊃ RA.

Fact 1 (Maddux (1982)). In non-associative relation algebras relative compo-
sition and converse are completely additive.

The set ℘(U × U ) of binary relations over U , together with Boolean set
operations, composition ◦, converse −1 and identity Id U is a relation algebra,
denoted by Re(U ).

Any complete atomic (particularly any ﬁnite) non-associative relation alge-
bra A is fully speciﬁed by its atom structure. An atom structure consists of the
set of atoms At(A), the set of identity atoms At(1(cid:48)) ⊆ At(A), the converse re-
stricted to atoms ˘ : At(A) → At(A) and the composition table. A composition
table is a function CT : At(A) × At(A) → ℘(At(A)), deﬁned by z ∈ CT (x, y) iﬀ
(x; y) · z (cid:54)= 0. The triples (x, y, z), where x, y and z are atoms and which satisfy
(x; y) · z (cid:54)= 0 are called consistent triples.

3. State of the art: intensional and extensional deﬁnitions of qualita-

tive calculi

In a nutshell, a qualitative calculus consists of two components: one symbolic
and one semantic. The symbolic component is an abstract algebra of relations,
and the semantic component is a function that interprets the relation symbols
as relations over some set. The intensional approach to deﬁning a qualitative
calculus starts with an abstract algebra that satisﬁes certain axioms, whereas
the extensional approach starts with a semantic structure, namely a system of
JEPD relations.

1The name “non-associative relation algebra” is somewhat confusing, as it is meant to

denote a “not necessarily associative relation algebra”.

4

3.1. Intensional approach

The intensional approach dates back to the paper of Ladkin and Maddux
(1994), in which the paradigm of algebraic constraint-based reasoning intro-
duced by Allen (1983) was generalized to relation algebras with a representation.
Such a framework assumes a perfect match between the symbolic (intensional)
and the actual (extensional) composition of relations. Then Ligozat and Renz
(2004) deﬁned a qualitative calculus as “a non-associative relation algebra with
a weak representation”. The notion of a weak representation allows symbolic
composition to be an upper approximation of the relational composition. Not
only does “weak representation” describe the relation between abstract and ac-
tual composition, but also allows to cast the consistency problem as two weak
representations’ compatibility.

However, the deﬁnition of Ligozat and Renz was criticized for several short-
comings. First, weak representation is overly permissive when it comes to de-
scribing qualitative calculi, since it allows an unnecessary loss of information.
It was suggested to narrow the framework down to “best upper approxima-
tions” of composition, which led to the notion of a semi-strong representation
(Mossakowski et al., 2006). The second shortcoming is that weak representations
are not required to be injective, which is the case in all qualitative calculi (Dylla
et al., 2013). Indeed, a non-injective map corresponds to the case when some re-
lation symbols are interpreted as the empty relation. Finally, it was pointed out
that weak representations allow non-atomic identity elements (Inants, 2016),
which means that partition schemes in the sense of Ligozat and Renz (2004) are
not the only semantic structures that correspond to weak representations.

The deﬁnition of a qualitative calculus proposed by Hirsch et al. (2019)
overcomes the abovementioned shortcomings and generalizes that of Ligozat
and Renz (2004) to the inﬁnite case. This generalization is motivated by sev-
eral eﬀorts to combine qualitative calculi with quantitative information, which
results in inﬁnitely many relations. An interesting feature of this deﬁnition is
that it does not require qualitative calculi to be based on JEPD relations.

Summing up, the state-of-the-art deﬁnition of a qualitative calculus within
the representation-based intensional approach is that “qualitative calculus is a
non-associative relation algebra with a qualitative representation”.

Deﬁnition 1 (Hirsch et al. (2019)). Let A = (A, +, ·,¯, 0, 1, ; ,˘, 1(cid:48)) be a non-
associative relation algebra. A qualitative representation of the algebra A over
a set U is a function ϕ : A → ℘(U ×U ), such that

1. ϕ is an embedding of Boolean algebras:

(a) ϕ is injective

(b) ϕ(a + b) = ϕ(a) ∪ ϕ(b)

(c) ϕ(a) = (U ×U )\ϕ(a)

2. ϕ(1(cid:48)) = Id D

3. ϕ(a˘) = (ϕ(a))−1,

5

4. a; b ≤ c ↔ ϕ(a) ◦ ϕ(b) ⊆ ϕ(c)

for all a, b, c ∈ A.

A qualitative representation is a (strong) representation iﬀ ϕ(a; b) = ϕ(a) ◦
If A has a qualitative representation, then it is called
ϕ(b) for all a, b ∈ A.
a qualitatively representable algebra. QRA denotes the class of all qualitatively
representable algebras.

Example 1 (Hirsch et al. (2019)). This is an example of an inﬁnite relation
algebra for expressing metric constraints on a linearly ordered metric space. Its
elements are ﬁnite unions of real intervals, e.g. (2, 5)∪[6, 8]. There is one identity
atom, namely [0, 0], converse is deﬁned by (m, n)˘ = (−n, −m), and composition
is deﬁned by (m, n); (m(cid:48), n(cid:48)) = (m + m(cid:48), n + n(cid:48)) for m > n, m(cid:48) > n(cid:48), with similar
deﬁnitions for closed and semi-open intervals. A strong representation ϕ over the
real numbers may be obtained by letting (x, y) ∈ ϕ((m, n)) ⇔ m < y − x < n,
with similar deﬁnitions for closed and semi-open intervals. This provides a
useful way of expressing metric constraints between points, e.g. the constraint
(x, y) ∈ ϕ([−3, −2] ∪ [2, 3]) means that the distance between x and y is at least
two and not more than three.

3.2. Extensional approach

The extensional approach starts with a set of jointly exhaustive and pairwise
disjoint relations (a partition of U ×U ). Any ﬁnite set P of nonempty JEPD
relations on a set U generates a concrete qualitative algebra

Q∗(P) = (P∪, ∪, ∩, −U ×U , ∅, U ×U, (cid:5),˘),

(2)

where P∪ is the union closure of P (P∪ = {∪X | X ⊆ P}), (cid:5) is called weak
composition (Ligozat and Renz, 2004) and ˘ is called weak converse (Dylla et al.,
2013).

R (cid:5) S = ∩{T ∈ P∪ | T ⊇ R ◦ S},

R˘ = ∩{T ∈ P∪ | T ⊇ R−1}.

(3)

Operations (cid:5) and ˘ are additive. A qualitative calculus in the sense of Dylla
et al. (2013) is a ﬁnite Boolean algebra with operators

A = (℘(Rel), ∪, ∩, −Rel, ∅, Rel, ; ,˘),

(4)

where Rel is a set of relation symbols, together with a partition scheme P and
a function ϕ : ℘(Rel) → P∪, such that

1. ϕ is an isomorphism between Boolean algebras (P∪, ∪, ∩, −U ×U , ∅, U×U )

and (℘(Rel), ∪, ∩, −Rel, ∅, Rel),

2. ϕ(a; b) ⊇ ϕ(a) (cid:5) ϕ(b)

3. ϕ(a˘) ⊇ ϕ(a)˘,

6

If ϕ(a; b) ⊃ ϕ(a) (cid:5) ϕ(b), then the relative product (;) is
for all a, b ∈ A.
weaker than weak composition ((cid:5)), similarly for converse. As pointed out in
(Mossakowski et al., 2006), “weaker than weak” composition allows an unneces-
sary loss of information. In addition, (Hirsch et al., 2019) shows several short-
coming of feeble representations – weaker variants of qualitative representations
that correspond to “weaker than weak” composition.
In particular, a feeble
representation of an algebra A does not represent A, because some consistent
triples may be absent in the representation. Due to these shortcomings, we
disregard “weaker than weak” operations in this paper. If a qualitative calculus
has at least weak composition and converse, then the interpretation function ϕ
is an isomorphism between A and Q∗(P). Thus, the class of such qualitative
algebras is deﬁned as the class of isomorphic copies of algebras Q∗(P), denoted
by QAJEPD. Note that QAJEPD algebras do not have the same signature as
QRA, since the former have no distinguished identity elements.

Example 2. The language of cardinal direction relations (CDR) is introduced
in (Skiadopoulos and Koubarakis, 2004). The universe is the set of regions of
the Euclidean plane R2 with a coordinate system. The relation symbols are 3×3
binary matrices. A relation symbol r = (rij), where i, j ∈ {1, 2, 3}, corresponds
to a binary relation R deﬁned as follows. A pair of regions (A, B) belongs to R
iﬀ the intersection of A with (i, j)-th partition of space created by the bounding
rectangle of B is empty if and only if rij = 0.

A less general deﬁnition that follows the extensional approach is given by
Westphal et al. (2014). Qualitative algebras are deﬁned as isomorphic copies of
algebras generated by strong partition schemes. Such algebras have an identity
element, hence are relation-type algebras. Moreover, they are weakly-associative
relation algebras, hence can be speciﬁed compactly by a structure called a “no-
tion of consistency” (Hodkinson, 1997).

3.3. Discussion

The intensional and extensional approaches provide complementary perspec-
tives. However, they have diﬀerent scopes. For instance, the algebra of the
calculus in Example 1 is not complete, hence does not belong to QAJEPD. On
the other hand, the algebra generated by the partition scheme of Example 2
does not satisfy the property r˘˘ = r and neither has an identity element, hence
it does not belong to QRA. In the rest of the paper, we will embed QAJEPD
and QRA into a larger class of qualitative algebras, which will be given two
equivalent deﬁnitions: intensional and extensional.

4. Contextual deﬁnition of a qualitative calculus

Having alternative deﬁnitions of the same object is very common in mathe-
matics. For instance, the deﬁnition of a Boolean lattice and that of a Boolean
algebra are equivalent, since they correspond to the same class of mathematical

7

objects. The situation with qualitative calculi is diﬀerent. There are alterna-
tive deﬁnitions of qualitative calculi not equivalent to each other, and moreover,
there is no deﬁnition more general than the others. Why is it so? The fact
that various deﬁnitions assign the same name to the deﬁned objects suggests
that there is a certain implicit property shared by all qualitative calculi. This
property, however, has never been made explicit, which resulted in perpetual
expansion of the class of objects called qualitative calculi. In this section, we
formalize the property that turns an abstract algebra of relation symbols into a
qualitative calculus, thus giving an “external”, contextual deﬁnition thereof.

4.1. Constraint language

Here we specify a logic CL for expressing relational constraints. We distin-
guish between simple constraints c(x1, x2) and complex constraints C deﬁned
inductively as follows:

c(x1, x2) ::= r(x1, x2) | c1(x1, x2) ∨ c2(x1, x2) | ¬c(x1, x2),

C ::= c(x1, x2) | C1 ∧ C2,

(5)

(6)

where r is a binary relation symbol and x1, x2 are variables. Notice that dis-
junction is allowed only between constraints over the same pair of variables
(c1(x1, x2) ∨ c2(x3, x4) does not belong to CL), whereas conjunction of arbitrary
constraints is allowed (c1(x1, x2) ∧ c2(x3, x4) belongs to CL).

A constraint language is given by a set of relation symbols Rel (possibly
inﬁnite), a domain U and an interpretation function I : Rel → ℘(U ×U ) which
maps relation symbols to binary relations. We assume the function I to be
injective, i.e. diﬀerent relation symbols are mapped to diﬀerent relations. The
set of variables occurring in a constraint C is denoted by vars(C). A constraint
C is evaluated to true or false with respect to the interpretation I and a variable
I
assignment δ : vars(C) → U by a predicate
δ deﬁned inductively as follows:

·
(cid:75)

(cid:74)

(cid:74)

(cid:74)

r(x1, x2)
(cid:75)
c1(x1, x2) ∨ c2(x1, x2)
(cid:75)
¬c(x1, x2)
(cid:75)
C1 ∧ C2
(cid:75)

(cid:74)

(cid:74)

I
δ = true
I
δ = true

I
δ = true
I
δ = true

iﬀ (δ(x1), δ(x2)) ∈ rI,
I
c1(x1, x2)
iﬀ
δ = true
(cid:75)
I
c2(x1, x2)
or
δ = true,
(cid:75)
I
c(x1, x2)
iﬀ
δ = false,
(cid:75)
I
δ = true and
C1
iﬀ
(cid:75)

(cid:74)
(cid:74)
(cid:74)
(cid:74)

(cid:74)

C2

I
δ = true.

(cid:75)

An empty constraint is always evaluated to true. A constraint C is said to
I
be satisﬁable if there exists a variable assignment δ such that
δ = true.
We say that a constraint C1 entails a constraint C2, in symbols C1 |=I C2,
I
δ = true for any variable assignment
C2
if from
δ : vars(C1) ∪ vars(C2) → U . Constraints C1 and C2 are said to be equivalent,
in symbols C1 ≡I C2, if C1 |=I C2 and C2 |=I C1.

I
δ = true it follows that

C1

C

(cid:75)

(cid:74)

(cid:75)

(cid:74)

(cid:75)

(cid:74)

4.2. Qualitative calculus of a constraint language

A qualitative calculus of a constraint language is a set of rules for transform-
ing one constraint into another in a way that its satisﬁability is preserved, i.e.
the resulting constraint is entailed from the initial one.

8

Deﬁnition 2 (Relation-type qualitative calculus). A (relation-type) qual-
itative calculus is a pair (A, I), where A = (Rel, +, ·,¯, 0, 1, ; ,˘, 1(cid:48)) is a relation-
type algebra with an underlying set of relation symbols Rel, and I is an inter-
pretation of Rel over some domain U , such that

r(x, y) ∨ s(x, y) ≡I (r + s)(x, y)
r(x, y) ∧ s(x, y) ≡I (r · s)(x, y)

¬r(x, y) ≡I r(x, y)
|=I 1(x, y)
|=I ¬0(x, y)

r(x, y) ∧ s(y, z) |=I (r; s)(x, z)

r(x, y) |=I r˘(y, x)
|=I 1(cid:48)(x, x)

(IR1)

(IR2)

(IR3)

(IR4)

(IR5)

(IR6)

(IR7)

(IR8)

for all r, s ∈ Rel. A is called a qualitative algebra of I, and I an interpretation
of A.

One can think of qualitative calculi as a binary relation between relation-type

algebras and constraint languages, given by IR1–IR8.

If (A, I) is a qualitative calculus, then each constraint C can be trans-
formed into an equivalent constraint in the form ∧x,y∈vars(C)rxy(x, y), using
the rules IR1, IR2, IR3 and IR4. Such a constraint is usually expressed as a
directed labeled graph (vars(C), λ) called an A-network (Hirsch, 1997), where
λ : vars(C) × vars(C) → Rel and λ(x, y) = rxy. A network (X, λ) is said to be
algebraically closed, if

λ(x, x) ≤ 1(cid:48)

λ(x, z) ≤ λ(x, y); λ(y, z)

λ(x, y) ≤ λ(y, x)˘

(7)

for all x, y, z ∈ X. There is a procedure for reﬁning a network into an alge-
braically closed one using the rules IR2, IR6, IR7, IR8. If Rel is ﬁnite, then this
procedure is guaranteed to terminate. An algebraically closed network is said
to be consistent if λ(x, y) (cid:54)= 0 for all x, y ∈ X, otherwise inconsistent. By IR5,
an inconsistent network is unsatisﬁable.

4.3. Minimality condition

If A and B are qualitative algebras for I, then we say that A is stronger

than B, noted as A (cid:22)I B, if

(r;A s)I ⊆ (r;B s)I

(r˘A)I ⊆ (r˘B)I

(1(cid:48)A)I ⊆ (1(cid:48)B)I

(8)

for all r, s ∈ Rel.
If A is stronger than all qualitative algebras for a given
constraint language I, then (A, I) is called a proper qualitative calculus. (A, I)
is a proper qualitative calculus if and only if A is the least element with respect
to the partial order (cid:22)I. This minimality condition ensures that A provides the
best calculus for I, w.r.t. the inference rules template IR1–IR8. As will be seen
later, not all constraint languages have a proper qualitative calculus.

9

4.4. General case

The deﬁnition of a qualitative calculus given above depends on the following
parameters: the constraint logic, the algebraic signature and the set of inference
rules. This is the reason why we call it contextual. These parameters can be
changed, yielding a diﬀerent type (or diﬀerent framework) of qualitative calculi.
It is also important to mention that one can deﬁne binary qualitative al-
gebras of non-relation type that still “support” constraint propagation. For
example, constraint algebras in the sense of Nebel and Scivos (2002) are also
qualitative calculi, but of a diﬀerent type. First, their constraint logic does not
have disjunction or negation operators, but has the equality predicate:

C ::= r(x1, x2) | x1 = x2 | C1 ∧ C2,

(9)

The algebraic signature is ·, 1, ; ,˘, 1(cid:48), and inference rules are IR2, IR4, together
with

r(x, y) ∧ s(y, z) ≡I (r; s)(x, z)

r(x, y) ≡I r˘(y, x)

x = y ≡I 1(cid:48)(x, y)

Qualitative calculi based on inf-semilattices discussed in (D¨untsch, 2005) also
belong to this framework.

In this paper, we conﬁne ourselves to proper relation-type qualitative calculi.

5. Relation-type qualitative algebras

In the previous section we have set up a framework for relation-type qual-
itative calculi by ﬁxing a constraint logic, an algebraic signature and a set of
inference rules. In this section, we describe the class of qualitative algebras of
proper qualitative calculi “internally”, that is, in a constructive way. We give
two deﬁnitions of relation-type qualitative algebras: intensional and extensional,
and prove their equivalence in the universal-algebraic sense.

5.1. Extensionally deﬁned qualitative algebras

A constraint language (Rel, U, I) has a proper qualitative calculus only if
RelI is closed under set union and complement (−U ×U ), as follows from IR1
and IR3. Assume B is an arbitrary ﬁeld of binary relations with a square
unit, i.e. with a unit of the form U × U .
In other words, B is a subalgebra
of ℘(U × U ). We shall expand B with operations (cid:5), ˘ and a constant 1(cid:48) in a
way that the resulting algebra is isomorphic to some proper qualitative algebra.
Reformulating IR6–IR8 and the minimality condition 8, we obtain that (cid:5), ˘ and
1(cid:48) must satisfy the following conditions.

• For any R, S ∈ B and any x, y, z ∈ U , if (x, y) ∈ R and (y, z) ∈ S, then
(x, z) ∈ R (cid:5) S. Moreover, R (cid:5) S is the least B-relation that satisﬁes the
above condition for R and S.

• For any R ∈ B and any x, y ∈ U , if (x, y) ∈ R, then (y, x) ∈ R˘. Moreover,

R˘ is the least B-relation that satisﬁes the above condition for R.

10

• 1(cid:48) is the least B-relation that contains (x, x) for all x ∈ U .

Here is the formal deﬁnition.

Deﬁnition 3 (Inferential operations). Let B = (B, ∪, ∩, −U ×U , ∅, U × U )
be a ﬁeld of binary relations.

• (cid:5) : B × B → B is called inferential composition on B if

R (cid:5) S = min{T ∈ B | ∀x, y, z. R(x, y) ∧ S(y, z) → T (x, z)},

(OP1)

for all R, S ∈ B.

• ˘ : B → B is called inferential converse on B if

R˘ = min{T ∈ B | ∀x, y. R(x, y) → T (y, x)},

(OP2)

for all R ∈ B.

• 1(cid:48)

B ∈ B is called inferential identity on B if

1(cid:48)
B = min{T ∈ B | ∀x. T (x, x)}.

(OP3)

The minima in OP1–OP3 exist if and only if the inﬁma of the respective sets,
taken in ℘(U ×U ), belong to B. Let F(X) denote the set of all elements of B
greater than X:

F(X) = {Y ∈ B | Y ⊇ X}.

(10)

One can give an equivalent deﬁnition of inferential operations that resorts to
the conventional composition, converse and identity:

R (cid:5) S = ∩F(R ◦ S),

R˘ = ∩F(R−1),

1(cid:48)
B = ∩F(Id U ).

(11)

The operations of inferential composition (cid:5) and inferential converse ˘ are known
in the literature as weak composition and weak converse. We prefer to call them
inferential, since these operations ensure validity of inference rules IR6 and IR7
respectively. If an inferential composition (converse, identity) corresponds to
the conventional one, then it is said to be strong, otherwise weak.

We name the necessary and suﬃcient condition on B that allows to deﬁne

inferential composition, converse and identity as inference completeness.

Deﬁnition 4 (Inference completeness). A subalgebra B of ℘(U ×U ) is said
to be inference complete, if, for all R, S ∈ B, the sets F(R ◦ S), F(R−1) and
F(Id U ) have least elements, or equivalently,

∩F(R ◦ S) ∈ B,

∩F(R−1) ∈ B,

∩F(Id U ) ∈ B.

(12)

An obviously suﬃcient condition for inference completeness is when B is closed
under composition and converse, and contains the identity relation.

The expansion of B with the inferential relational operations (cid:5),˘ and 1(cid:48) is

called a concrete qualitative algebra.

11

5

=
Deﬁnition
(B, ∪, ∩, −U ×U , ∅, U × U ) be an inference complete ﬁeld of binary relations.
Then the algebra

algebra). Let

qualitative

(Concrete

B

Q(B) = (B, ∪, ∩, −U ×U , ∅, U ×U, (cid:5),˘, 1(cid:48)

B)

(13)

is called the concrete qualitative algebra generated by B.

The next proposition shows that the operations (cid:5) and ˘ are additive, hence
concrete qualitative algebras are Boolean algebras with operators. Moreover, (cid:5)
and ˘ completely distribute over arbitrary unions that belong to B.

Proposition 1. Let B be an inference complete subalgebra of ℘(U × U ).
Ri, S ∈ B for all i from an arbitrary index set I, and ∪i∈I Ri ∈ B, then

If

(∪i∈I Ri) (cid:5) S = ∪i∈I (Ri (cid:5) S)
S (cid:5) (∪i∈I Ri) = ∪i∈I (S (cid:5) Ri)
(∪i∈I Ri)˘ = ∪i∈I (Ri˘)

(14)

(15)

(16)

Proof. The proof is given for 14 only, 15 and 16 are proven similarly. By
deﬁnition of (cid:5), (∪i∈I Ri) (cid:5) S = min F((∪i∈I Ri) ◦ T ). Due to complete dis-
tributivity of ◦ over ∪, F((∪i∈I Ri) ◦ S) = F(∪i∈I (Ri ◦ S)). Observe that
F(∪i∈I (Ri ◦ S)) = ∩i∈I F(Ri ◦ S). Indeed, for any T ∈ B, T ⊇ ∪i∈I (Ri ◦ S) iﬀ
T ⊇ Ri ◦ S for all i ∈ I. As a result,

(∪i∈I Ri) (cid:5) S = min(∩i∈I F(Ri ◦ S)).

(17)

Since F(∪i∈I (Ri ◦ S)) ⊆ F(Ri ◦ S) for all i ∈ I, we have that min F(Ri ◦ S) ⊆
min F(∪i∈I (Ri ◦ S)) for all i ∈ I, therefore

∪i∈I min F(Ri ◦ S) ⊆ min F(∪i∈I (Ri ◦ S)).

(18)

On the other hand, ∪i∈I min F(Ri ◦ S) ∈ F(Ri ◦ S) for all i ∈ I, hence
∪i∈I min F(Ri ◦ S) ∈ ∪i∈I F(Ri ◦ S). Consequently,

∪i∈I min F(Ri ◦ S) ⊇ min(∩i∈I F(Ri ◦ S)).

From 18 and 19 we obtain

∪i∈I min F(Ri ◦ S) = min(∩i∈I F(Ri ◦ S)).

(19)

(20)

Since Ri (cid:5) S = min F(Ri ◦ S) and due to 17 we ﬁnally obtain (∪i∈I Ri) (cid:5) S =
∪i∈I (Ri (cid:5) S).

A concrete qualitative algebra A is said to be atomic, if so is its Boolean
reduct. The next proposition shows that in atomic algebras the relational op-
erations have yet another equivalent deﬁnition.

12

Proposition 2. If A is an atomic concrete qualitative algebra, then

R (cid:5) S = sup{T ∈ At(A) | (R ◦ S) ∩ T (cid:54)= ∅}

= sup{T ∈ At(A) | ∃x, y, z. R(x, y) ∧ S(y, z) ∧ T (x, z)}

R˘ = sup{T ∈ At(A) | R−1 ∩ T (cid:54)= ∅}

= sup{T ∈ At(A) | ∃x, y. R(x, y) ∧ T (y, x)}

1(cid:48) = sup{T ∈ At(A) | T ∩ Id U (cid:54)= ∅}
= sup{T ∈ At(A) | ∃x. T (x, x)}

(21)

(22)

(23)

(24)

(25)

(26)

for all R, S ∈ A.
Proof. Let T be an arbitrary atom of A. Assume that (R ◦ S) ∩ T (cid:54)= ∅. Since
R (cid:5) S ⊇ R ◦ S, it follows that (R (cid:5) S) ∩ T (cid:54)= ∅. As T is an atom, we conclude
If (R ◦ S) ∩ T = ∅, then
that T ⊆ R (cid:5) S. Conversely, assume T ⊆ R (cid:5) S.
(R (cid:5) S)\T ∈ A and (R (cid:5) S)\T ⊇ R ◦ S, thus (R (cid:5) S)\T ∈ F(R ◦ S) and
(R (cid:5) S)\T ⊂ R (cid:5) S, which is a contradiction. Thus, (R ◦ S) ∩ T (cid:54)= ∅. We
have shown that At(R (cid:5) S) = {T ∈ At(A) | (R ◦ S) ∩ T (cid:54)= ∅}. By deﬁnition
of atomicity, R (cid:5) S = sup At(R (cid:5) S). Equation 22 is obtained from 21 by
expressing the relation (R ◦ S) ∩ T (cid:54)= ∅ axiomatically. Equations 23–26 are
proven similarly.

B denotes the class of all inference complete ﬁelds of binary relations with a
square unit. By QA, or QA(B), we denote the class of all relation-type algebras
isomorphic to some concrete qualitative algebra. The algebras that belong to
QA are called qualitative algebras. A class of algebras is called a variety if it
is closed under homomorphic images, subalgebras and direct products. The
next proposition shows that qualitative algebras are not directly decomposable,
hence do not form a variety.

Proposition 3. If A ∈ QA, then it is directly indecomposable.
Proof. From A ∈ QA it follows that there is a B ∈ B such that A ∼= Q(B). For
any R ∈ B such that R (cid:54)= ∅,

(1 (cid:5) R) (cid:5) 1 ⊇ (1 ◦ R) ◦ 1 = 1.

(27)

Assume that B is directly decomposable, i.e. there exist inference complete
ﬁelds of binary relations B(cid:48), B(cid:48)(cid:48) ∈ B such that Q(B) ∼= Q(B(cid:48)) ⊗ Q(B(cid:48)(cid:48)). Let
A(cid:48) = Q(B(cid:48)) ⊗ Q(B(cid:48)(cid:48)). Then, for any R ∈ Q(B(cid:48)), (R, ∅) ∈ A(cid:48). However,

(cid:0)(1, 1); (R, ∅)(cid:1) ; (1, 1) = (cid:0)(1 (cid:5) R) (cid:5) 1, ∅(cid:1) (cid:54)= (1, 1),

(28)

which contradicts (27).

5.2. Intensionally deﬁned qualitative algebras

Qualitative algebras, unlike well-known classes NA, WA, SA and RA, are
not an algebraic variety, as shown in Proposition 3, thus cannot be deﬁned by
means of equational axioms. However, there exists a diﬀerent intensional way
of deﬁning the class of qualitative algebras, based on a certain representability
property.

13

Deﬁnition 6 (Q-homomorphism). Let A = (A, +, ·,¯, 0A, 1A, ; ,˘, 1(cid:48)
B = (B, +, ·,¯, 0B, 1B, ; ,˘, 1(cid:48)
function ϕ : A → B is called a Q-homomorphism if

A) and
B) be Boolean algebras with operators. An injective

(Q1) ϕ(a + b) = ϕ(a) + ϕ(b)

(Q2) ϕ(a) = ϕ(a)

(Q3) a; b ≤ c ↔ ϕ(a); ϕ(b) ≤ ϕ(c)

(Q4) a˘ ≤ b ↔ ϕ(a)˘ ≤ ϕ(b)

(Q5) 1(cid:48)

A ≤ a ↔ 1(cid:48)

B ≤ ϕ(a)

for all a, b, c ∈ A.

Q-homomorphisms are Boolean algebra homomorphisms, but not necessarily
BAO homomorphisms, since they do not necessarily preserve ;, ˘ and 1(cid:48). How-
ever, any injective BAO homomorphism is a Q-homomorphism. Composition
of Q-homomorphisms is a Q-homomorphism. As a consequence, relation-type
BAOs together with Q-homomorphisms form a category.

A Q-homomorphism to an algebra Re(U ) of binary relations on some set
U is called a Q-representation. A BAO is said to be Q-representable if it
has a Q-representation. An interesting observation is that composition of a
Q-homomorphism with a Q-representation is a Q-representation. Moreover,
Q-representable algebras are closed under Q-homomorphic images. Thus, if
A(cid:48) is Q-representable and ϕ : A → A(cid:48) is a Q-homomorphism, then A is Q-
representable. The class of Q-representable relation-type Boolean algebras with
operators is denoted by QR, or QR(BAO). If A is a subclass of BAO, then QR(A)
will denote the class of qualitatively representable A.

Theorem 1. If A is a relation-type algebra and ϕ : A → Re(U ) is a Q-
representation, then ϕ(A) ∈ B and ϕ : A → Q(ϕ(A)) is an isomorphism of
qualitative algebras. Conversely, if B is an inference complete square ﬁeld of
binary relations over a set U and ϕ : A → Q(B) is an isomorphism of qualitative
algebras, then ϕ : A → Re(U ) is a Q-representation.

Proof. Observe that (ϕ(A), ∪, ∩, −U ×U , ∅, U ×U ) is a ﬁeld of binary relations
isomorphic to the Boolean reduct of A. Let us prove that for all r, s ∈ A,
ϕ(r) (cid:5) ϕ(s) is well-deﬁned and equal to ϕ(r; s). Since r; s ≥ r; s, from the
deﬁnition of Q-representation it follows that ϕ(r; s) ⊇ ϕ(r)◦ϕ(s), hence ϕ(r; s) ∈
F(ϕ(r) ◦ ϕ(s)). Let ϕ(t) be an arbitrary element of ϕ(A). If ϕ(t) ⊇ ϕ(r) ◦ ϕ(s),
then t ≥ r; s, therefore, since ϕ is order-preserving, ϕ(t) ⊇ ϕ(r; s), which means
that ϕ(r; s) = min F(ϕ(r) ◦ ϕ(s)) = ϕ(r) (cid:5) ϕ(s). Similarly, we show that ϕ(r˘) =
min F(ϕ(r)−1) for all r ∈ A and ϕ(1(cid:48)
A) = min F(Id U ), which implies that
ϕ(r˘) = ϕ(r)˘ and ϕ(1(cid:48)
ϕ(A). Thus, ϕ is an isomorphism between A and
Q(ϕ(A)).

A) = 1(cid:48)

Conversely, assume that B is some inference complete ﬁeld of binary relations
over a set U and ϕ : A → Q(B) is an isomorphism. For any a, b, c ∈ A, c ≥ a; b

14

iﬀ ϕ(c) ⊇ ϕ(a) (cid:5) ϕ(b) iﬀ ϕ(c) ⊇ ϕ(a) ◦ ϕ(b). Likewise, c ≥ a˘ iﬀ ϕ(c) ⊇ ϕ(a)−1
and c ≥ 1(cid:48)
A iﬀ ϕ(c) ⊇ IdU . Therefore, ϕ is a Q-representation of A over U ,
hence A ∈ QR.

Corollary 1. QR = QA.

Proof. Vacuous.

Corollary 2. If A is a subclass of BAO, then QA ∩ A = QR(A).

Proof. Follows from QR(A) = QR ∩ A and QR = QA.

Corollary 2 indicates that Q-representability is a way of describing the in-
tersection of qualitative algebras with other classes of algebras, such as non-
associative relation algebras. This will be used in the next section.

Finally, the next proposition shows that a Q-homomorphism from an atomic
BAO can be deﬁned alternatively, in a way that generalizes semi-strong repre-
sentations (Mossakowski et al., 2006).

Proposition
(B, +, ·,¯, 0B, 1B, ; ,˘, 1(cid:48)
jective function ϕ : A → B is a Q-homomorphism iﬀ

(A, +, ·,¯, 0A, 1A, ; ,˘, 1(cid:48)
=
B) be BAOs and assume that A is atomic. An in-

4. Let A

and B

A)

=

(S1) ϕ(a + b) = ϕ(a) + ϕ(b)

(S2) ϕ(a) = ϕ(a)

(S3) ϕ(a; b) ≥ ϕ(a); ϕ(b)

(S4) ϕ(a˘) ≥ ϕ(a)˘

(S5) ϕ(1(cid:48)

A) ≥ 1(cid:48)
B

(S6) At(a; b) = {c ∈ At(A) | ϕ(c) · (ϕ(a); ϕ(b)) (cid:54)= 0B}

(S7) At(a˘) = {c ∈ At(A) | ϕ(c) · ϕ(a)˘ (cid:54)= 0B}

(S8) At(1(cid:48)

A) = {c ∈ At(A) | ϕ(c) · 1(cid:48)

B (cid:54)= 0B}

for all a, b, c ∈ A.

Proof. Let ϕ be a Q-homomorphism and a, b ∈ A. From a; b ≥ a; b and Q3
it follows that ϕ(a; b) ≥ ϕ(a); ϕ(b). Similarly we obtain S4 and S5. To prove
S6, let c ∈ At(a; b) and assume ϕ(c) · (ϕ(a); ϕ(b)) = 0B. This implies that
(ϕ(a); ϕ(b)) · ϕ(c) = ϕ(a); ϕ(b). Further, ϕ((a; b) · c) = ϕ(a; b) · ϕ(c) = ϕ(a; b) ·
ϕ(c) ≥ (ϕ(a); ϕ(b))·ϕ(c) = ϕ(a); ϕ(b), therefore (a; b)·c ≥ a; b, which contradicts
c ∈ At(a; b). Thus, ϕ(c) · (ϕ(a); ϕ(b)) (cid:54)= 0B. Conversely, assume c ∈ At(A) and
ϕ(c) · (ϕ(a); ϕ(b)) (cid:54)= 0B. Due to ϕ(a; b) ≥ ϕ(a); ϕ(b) we have ϕ(c) · ϕ(a; b) (cid:54)= 0B,
therefore c · (a; b) (cid:54)= 0A, which means that c ∈ At(a; b). S7 and S8 are proven
similarly.

Assume now that S1–S8 hold and let us prove Q3. If a, b, c ∈ A and c ≥ a; b,
then ϕ(c) ≥ ϕ(a; b) ≥ ϕ(a); ϕ(b). Conversely, assume that ϕ(c) ≥ ϕ(a); ϕ(b). If

15

d ∈ At(A) and d ≤ a; b, then ϕ(d) · (ϕ(a); ϕ(b)) (cid:54)= 0B, hence ϕ(d) · ϕ(c) (cid:54)= 0B,
which implies d ≤ c. Thus, At(a; b) ⊆ At(c), therefore a; b ≤ c. Q4 and Q5 are
proven similarly.

6. Important subclasses of relation-type qualitative algebras

In the previous section, we have deﬁned the broadest class of relation-type
qualitative algebras in two equivalent ways: as Q-representable BAOs and as
isomorphism closure of algebras generated by inference complete ﬁelds of binary
relations. This gives us two ways of describing subclasses of qualitative alge-
bras: one intensional, or algebraic, and the other extensional, or semantic. In
this section, we will consider two important subclasses of qualitative algebras:
those that stem from JEPD relations and those that are non-associative relation
algebras, as well as their intersection.

6.1. Qualitative algebras of JEPD relations

Inference completeness of a Boolean set algebra B with unit element U ×U
is not easy to check in practice. Completeness of B may not ensure its inference
completeness. But if B is both complete and atomic, then it is also inference
complete. A complete atomic B is fully speciﬁed by the set of its atoms At(B),
since B can be obtained from At(B) by taking its union closure. The set At(B)
consists of nonempty binary relations on U , which are jointly exhaustive and
pairwise disjoint (JEPD), meaning that each (x, y) ∈ U ×U belongs to one and
only one relation from At(B). In the sequel, we will refer to any set of nonempty
JEPD relations as a partition scheme. If P is a partition scheme, then by P∪
we will denote its union closure. P∪ is a ﬁeld of binary relations. It is easy to
check that P∪ is inference complete.

Proposition 5. If P is a partition scheme, then the operations (cid:5) and ˘ of
Q(P∪) are completely additive.

Proof. Follows from Proposition 1 and the fact that the ﬁeld of binary relations
P∪ is closed under arbitrary unions.

It follows from Proposition 5 that qualitative algebras generated by partition
schemes are fully speciﬁed by their set of atoms, the subset of sub-identity atoms,
and operations ; and ˘ restricted to atoms. This is called the atom structure of
a qualitative algebra.

Let P denote the class of all ﬁnite partition schemes. Then QA(P) denotes
the class of qualitative algebras that stem from ﬁnite partition schemes, i.e.
are isomorphic to Q(P∪) for some P ∈ P. From Proposition 5 it follows that
QA(P) = QA ∩ FBAO, where FBAO is the class of ﬁnite BAOs. Applying
Corollary 2 we obtain the following:

Proposition 6. Qualitative algebras generated by ﬁnite partition schemes are
ﬁnite Q-representable BAOs, in symbols QA(P) = QR(FBAO).

16

Proof. The inclusion QA(P) ⊆ QR(FBAO) is obvious. Conversely, if A is a ﬁnite
BAO and ϕ : A → Re(U ) is a Q-representation, then P := ϕ(At(A)) is a ﬁnite
partition scheme over U , and A ∼= Q(P∪), hence A ∈ QA(P).

Proposition 6 characterizes qualitative algebras stemming from JEPD rela-
tions both intensionally and extensionally. The class QAJEPD (cf. Section 3.2)
is the reduct of QA(P) which “forgets” the distinguished element 1(cid:48).

6.2. Q-representable non-associative relation algebras

The next theorem establishes that “Q-representation” is essentially a con-
servative extension of “qualitative representation” (cf. Deﬁnition 1) beyond
non-associative relation algebras.

Theorem 2. If A ∈ NA and ϕ : A → Re(U ) is a Q-representation, then ϕ(1(cid:48)) is
an equivalence relation on U and ϕ(cid:48) : A → Re(U (cid:48)) deﬁned below is a qualitative
representation:

• U (cid:48) = U/ϕ(1(cid:48)),

• ϕ(cid:48)(a) = {(X, Y ) ∈ U (cid:48) ×U (cid:48) | ∃x ∈ X, y ∈ Y. (x, y) ∈ ϕ(a)} for all a ∈ A.

We precede the proof of Theorem 2 with some auxiliary notation and two
lemmas. Given a binary relation R over U , by R(x, ) we denote the set of
all y ∈ U such that (x, y) ∈ R. Likewise, R( , x) = {y ∈ U | (y, x) ∈ R}.
Intuitively, if R(x, ) = R(y, ) and R( , x) = R( , y) for some x, y ∈ U , then R
does not distinguish between x and y.

Lemma 1. Let R, S be arbitrary binary relations and E an equivalence relation.

1. If R = E ◦ S, then R(x, ) = R(y, ) for all (x, y) ∈ E.

2. If R = S ◦ E, then R( , x) = R( , y) for all (x, y) ∈ E.

Proof. We will only prove the ﬁrst assertion. Assume (x, y) ∈ E and (x, z) ∈ R
for some arbitrary z. (x, z) ∈ E ◦ S ⇒ ∃u. (x, u) ∈ E ∧ (u, z) ∈ S ⇒ (y, u) ∈
E ∧ (u, z) ∈ S ⇒ (y, z) ∈ R. Since z was arbitrary, it follows that R(x, ) =
R(y, ).

Let ∼ be an equivalence relation over U . The equivalence class of x ∈ U is
denoted by [x]. Let U (cid:48) be the set of equivalence classes, i.e. U (cid:48) = U/ ∼. We
deﬁne a function ·/ ∼ between ℘(U ×U ) and ℘(U (cid:48) ×U (cid:48)) as follows:

·/ ∼ : ℘(U ×U ) → ℘(U (cid:48) ×U (cid:48))

∈
R

∈

(cid:55)→ R/ ∼ = {([x], [y]) ∈ U (cid:48) ×U (cid:48) | (x, y) ∈ R}

(29)

It is easy to check that ·/ ∼ is order-preserving: if R ⊆ S for any R, S ⊆ U × U ,
then R/ ∼ ⊆ S/ ∼. Moreover, R−1/ ∼ = (R/ ∼)−1.

17

Lemma 2. If B is an inference complete Boolean subalgebra of ℘(U×U ) and for
all R ∈ B and all x ∼ x(cid:48) the equalities R(x, ) = R(x(cid:48), ) and R( , x) = R( , x(cid:48))
hold, then ·/ ∼ restricted to B is an isomorphism between Q(B) and Q(B/ ∼),
where B/ ∼ = {R/ ∼ | R ∈ B}.

Proof. From the premises it follows that (x, y) ∈ R iﬀ ([x], [y]) ∈ R/ ∼ for all
R ∈ B. Let us show that ·/ ∼ is injective on B.
Indeed, for any R, S ∈ B,
assume that R/ ∼ = S/ ∼. Then (x, y) ∈ R ⇔ ([x], [y]) ∈ R/ ∼ ⇔ ([x], [y]) ∈
S/ ∼ ⇔ (x, y) ∈ S, thus R = S. The equalities (U × U )\R/ ∼ = (U (cid:48) ×U (cid:48))\(R/ ∼)
and R ∪ S/ ∼ = R/ ∼ ∪ S/ ∼ for all R, S ∈ B are checked vacuously. Further,
since ∀x, y, z ∈ U. R(x, y) ∧ S(y, z) → T (x, z) is equivalent to ∀[x], [y], [z] ∈
U (cid:48). (R/ ∼)([x], [y]) ∧ (S/ ∼)([y], [z]) → (T/ ∼)([x], [z]) for all R, S, T ∈ B, it follows
that F (R ◦ S)/ ∼ = F(R/ ∼ ◦ S/ ∼). Since ·/ ∼ is order-preserving, we conclude that
(R/ ∼) (cid:5) (S/ ∼) is well-deﬁned for all R, S ∈ B and equal to R (cid:5) S/ ∼. Likewise, we
prove that (R/ ∼)˘ = R˘/ ∼ and 1(cid:48)

B/ ∼.

B/ ∼ = 1(cid:48)

Proof of Theorem 2. Let us prove ﬁrst that ϕ(a)−1 = ϕ(a˘) for all a ∈ A. Since
A ∈ NA, a˘˘ = a for any a ∈ A. From a˘ ≥ a˘ and Q4 we obtain ϕ(a˘) ⊇ ϕ(a)−1.
On the other hand, from a ≥ a˘˘ we have ϕ(a) ⊇ ϕ(a˘)−1, from which we obtain
ϕ(a)−1 ⊇ ϕ(a˘). As a consequence, ϕ(a)−1 = ϕ(a˘).

Now let us show that ϕ(1(cid:48)) is an equivalence relation. From Theorem 1 it
follows that A ∼= Q(ϕ(A)). Since 1(cid:48); 1(cid:48) = 1(cid:48) in every non-associative relation
algebra, we have that ϕ(1(cid:48)) (cid:5) ϕ(1(cid:48)) = ϕ(1(cid:48)). But since ϕ(1(cid:48)) = ϕ(1(cid:48)) (cid:5) ϕ(1(cid:48)) ⊇
ϕ(1(cid:48))◦ϕ(1(cid:48)) ⊇ ϕ(1(cid:48))◦IdU = ϕ(1(cid:48)), we conclude that ϕ(1(cid:48))◦ϕ(1(cid:48)) = ϕ(1(cid:48)), which
means that ϕ(1(cid:48)) is a transitive relation. Since, in every NA, 1(cid:48)˘ = 1(cid:48) and due to
ϕ(a)−1 = ϕ(a˘) we conclude that ϕ(1(cid:48)) is a symmetric relation. Finally, ϕ(1(cid:48))
is reﬂexive, because it contains IdU , hence ϕ(1(cid:48)) is an equivalence relation.

From A ∈ NA and A ∼= Q(ϕ(A)), we have that ϕ(a) = ϕ(a) (cid:5) ϕ(1(cid:48)) =
ϕ(1(cid:48)) (cid:5) ϕ(a) for all a ∈ A. The chain ϕ(a) = ϕ(a) (cid:5) ϕ(1(cid:48)) ⊇ ϕ(a) ◦ ϕ(1(cid:48)) ⊇
ϕ(a) ◦ IdU = ϕ(a) implies that ϕ(a) ◦ ϕ(1(cid:48)) = ϕ(a) for all a ∈ A. Likewise,
ϕ(1(cid:48)) ◦ ϕ(a) = ϕ(a).

Applying Lemma 1 we obtain that for any R ∈ ϕ(A) and any (x, y) ∈ ϕ(1(cid:48)),
R(x, ) = R(y, ) and R( , x) = R( , y). By Lemma 2, ·/ϕ(1(cid:48)) is an isomorphism
between Q(ϕ(A)) and Q(ϕ(A)/ϕ(1(cid:48))).

Finally, it remains to check that ϕ(cid:48) : A → Re(U (cid:48)) is a qualitative represen-
tation. Observe that ϕ(cid:48)(a) = ϕ(a)/ϕ(1(cid:48)) for all a ∈ A. Since ϕ(cid:48) is a composition
of Q-homomorphisms ϕ and ·/ϕ(1(cid:48)), it is also a Q-homomorphism. In addition,
ϕ(cid:48)(1(cid:48)) = IdU (cid:48) and ϕ(cid:48)(a˘) = ϕ(a˘)/ ∼ = ϕ(a)−1/ ∼ = (ϕ(a)/ ∼)−1 = ϕ(cid:48)(a)−1, hence
ϕ(cid:48) is a qualitative representation.

Corollary 3. QR(NA) = QRA (cf. Section 3.1).

Proof. Vacuously follows from Theorem 2.

We are interested now in the extensional description of QR(NA). Hirsch et al.
(2019) calls semantic structures corresponding to qualitative representations
herds.

18

Deﬁnition 7 (Hirsch et al. (2019)). A ﬁeld of binary relations B with a unit
element U ×U is called a herd if it contains Id U and is closed under converse
(−1).

Herds are deﬁned in (Hirsch et al., 2019) without the requirement of inference
completeness. However, an inference-incomplete herd cannot be an image of a
qualitative representation. An example of a herd which is not inference complete
is given below.

Example 3. Consider a ﬁeld of binary relations H deﬁned as follows.

H = {R ⊆ Z × Z | (cid:12)

(cid:12)R\Id Z

(cid:12) < ω or (cid:12)
(cid:12)

(cid:12)Z × Z\(R ∪ Id Z)(cid:12)

(cid:12) < ω}

(30)

H consists of such binary relations R over Z that either R\Id Z is ﬁnite or R∪Id Z
is co-ﬁnite. H is closed under converse (−1) and contains the identity relation
Id Z. However, it is not inference complete. Indeed, if R, S ∈ S, R\Id Z is ﬁnite
and S ∪ Id Z is co-ﬁnite, then R ◦ S (cid:54)∈ S. Moreover, the set F(R ◦ S) (cf. 10)
consists of such T for which T ∪ Id Z is co-ﬁnite, thus F(R ◦ S) has no least
element.

The class of inference complete herds is denoted by H.

Proposition 7. Q-representable non-associative relation algebras are those gen-
erated by inference complete herds, in symbols QA(H) = QR(NA).

Proof. To prove QA(H) ⊆ QR(NA) we have to show that concrete qualitative
algebras generated by inference complete herds are non-associative relation al-
gebras. The proof is very similar to that of Lemma 2 in (Ligozat and Renz,
2004). The identity law holds due to the equalities IdU (cid:5) Ri = IdU ◦ Ri = Ri =
Ri ◦ IdU = Ri (cid:5) IdU . The Peircean law is proven as follows:

(Ri (cid:5) Rj) ∩ R−1

k = ∅ ⇔ (Ri ◦ Rj) ∩ R−1
⇔ (Rj (cid:5) Rk) ∩ R−1

k = ∅ ⇔ (Rj ◦ Rk) ∩ R−1
i = ∅.

i = ∅

If A ∈ NA and ϕ : A → Re(U ) is a Q-representation, then by Theorem 2,
ϕ(cid:48) is a qualitative representation. Consequently, H := ϕ(cid:48)(A) is closed under
converse (−1) and contains the identity IdU (cid:48), so H is a herd. By Theorem 1, ϕ(cid:48)
is an isomorphism between A and Q(H), hence A ∈ QA(H).

Let us now describe the intersection of QA(P) and QA(H). It is generated by
a class of partition schemes denoted by PN and deﬁned as follows. A partition
scheme P on a set U belongs to PN iﬀ P is closed under converse (−1) and
Id U ∈ P∪. PN is called the class of non-associative partition schemes (Inants,
2016). The intensional description of QA(PN) is obtained by intersecting NA
with FBAO, which yields the class FNA of ﬁnite non-associative Boolean alge-
bras.

Figure 1 summarizes the results of this section. Each of the subclasses of
QA mentioned in Figure 1 is closed under Q-homomorphisms, except QA(PS).

19

QA(PS) = QR(FNAI)
Corresponds to (Westphal et al., 2014)

QA(PN) = QR(FNA)

QA(H) = QR(NA)
Corresponds to (Hirsch et al., 2019)

QA(P) = QR(FBAO)
Corresponds∗ to (Dylla et al., 2013)

NA

QA(B) = QR(BAO)

∗ With at least weak composition and converse, and distinguished weak identity.

QA( ) qualitative algebras generated by
QR( ) Q-representable

B inference complete ﬁelds of

binary relations with a square unit

BAO relation-type BAOs

NA non-associative relation algebras
F

ﬁnite

I

with atomic identity

H inference complete herds
P ﬁnite partition schemes

PN non-associative partition schemes
PS

strong partition schemes

Figure 1: Intersection structure of qualitative algebras’ subclasses.

7. Conclusions and future work

We ﬁnally come back to Ligozat and Renz (2004)’s question “what is a
qualitative calculus?”. We reconciled the alternative answers to this question
by introducing two functions: QA, which generalizes the extensional deﬁnition of
Dylla et al. (2013), and QR, which generalizes the intensional deﬁnition of Hirsch
et al. (2019) (cf. Figure 1). We established the link between the extensional
and intensional approaches: a class of semantic structures X generates a class of
Q-representable algebras Y if QA(X) = QR(Y ). We deﬁned the class of relation-
type qualitative algebras, which includes both QAJEPD (Dylla et al., 2013) and
QRA (Hirsch et al., 2019), and speciﬁed the intersection of QAJEPD and QRA. In
addition, we have shown that the necessary and suﬃcient condition for deﬁning
a proper relation-type qualitative calculus on a system of binary relations is its
closedness under union and complement, and inference completeness. This can
be seen as a practical tool to design new calculi.

Along with the two equivalent “internal” deﬁnitions of relation-type qualita-
tive calculi, we gave an “external”, contextual deﬁnition thereof. The contextual
deﬁnition opens a broader perspective on the paradigm of algebraic constraint-
based reasoning and pictures the “relation-type qualitative calculus” framework
as one of many possible frameworks for qualitative calculi. A framework for
qualitative calculi is determined by a constraint logic, an algebraic signature
and a set of inference rules.

The term “qualitative calculus” may be questioned. For example, the calculi
STARm (Renz and Mitra, 2004) or OPRAm (Moratz, 2006) are studied within
the framework of qualitative calculi, but they are arguably quantitative, despite
being discrete and ﬁnite. Moreover, the deﬁnition of Hirsch et al. (2019) admits

20

calculi with inﬁnitely many relations, such as the one in Example 1, and we have
no example of an inﬁnite non-quantitative calculus. Indeed, this framework is
not bound to the qualitative reasoning ﬁeld, as it admits quantitative calculi
as well. However, we followed the tradition and kept the “qualitative calculus”
name, as the overwhelming majority of such calculi already carry this name.
Beyond names, it is the contribution of this paper to provide a uniﬁed framework
to compare these calculi.

This work opens several perspectives for future work. First, with an inﬁnite
qualitative algebra we have no guarantee that the algebraic closure procedure
would terminate. A way to address it is by introducing a proximity measure
between relations and achieving convergence of constraints up to a certain prox-
imity value. Secondly, we plan to expand the framework to n-ary qualitative
calculi. The methodology is the same as in this paper: a “calculus” is seen as
a certain property of an abstract algebra w.r.t. a constraint language. This
property is attributed by the choice of constraint logic, algebraic operations
(the signature) and inference rules. Finally, we plan to introduce the subclass
of qualitative algebras that allows for deﬁning sorts of objects. For instance,
Meiri (1996) and Kurata and Shi (2009) deﬁne relations between diﬀerent kinds
of spatial and temporal objects and propose ad-hoc reasoning methods with
these heterogeneous relations. The many-sorted framework of qualitative cal-
culi would allow for structurally combining calculi deﬁned for diﬀerent kinds of
objects in a generic way (Inants, 2016). Allowing non-atomic identity elements
is the ﬁrst step in introducing sorts, but it does not guarantee all relations to
be well-sorted, which calls for imposing additional constraints on relations.

References

Aiello, M., Pratt-Hartmann, I., van Benthem, J. (Eds.), 2007. Handbook of

Spatial Logics. Springer-Verlag, Berlin.

Allen, J.F., 1983. Maintaining knowledge about temporal intervals. Commun.

ACM 26, 832–843.

Birkhoﬀ, G., 1973. Lattice Theory, Third Edition. AMS Colloquium Publica-

tions 25, American Mathematical Society.

Burris, S., Sankappanavar, H.P., 1981. A course in universal algebra. volume 78

of Graduate texts in mathematics. Springer.

D¨untsch, I., 2005. Relation algebras and their application in temporal and

spatial reasoning. Artif. Intell. Rev. 23, 315–357.

Dylla, F., Lee, J.H., Mossakowski, T., Schneider, T., van Delden, A., van de
Ven, J., Wolter, D., 2017. A survey of qualitative spatial and temporal calculi:
Algebraic and computational properties. ACM Comput. Surv. 50, 7:1–7:39.

Dylla, F., Mossakowski, T., Schneider, T., Wolter, D., 2013. Algebraic prop-
erties of qualitative spatio-temporal calculi, in: Spatial Information Theory

21

- 11th International Conference, COSIT 2013, Scarborough, UK, September
2-6, 2013. Proceedings, pp. 516–536.

Hirsch, R., 1996. Relation algebras of intervals. Artif. Intell. 83, 267–295.

Hirsch, R., 1997. Expressive power and complexity in algebraic logic. J. Log.

Comput 7, 309–351.

Hirsch, R., Jackson, M., Kowalski, T., 2019. Algebraic foundations for qualita-

tive calculi and networks. Theoretical Computer Science 768, 99–116.

Hodkinson, I., 1997. Atom structures of cylindric algebras and relation algebras.

Annals of Pure and Applied Logic 89, 117–148.

Inants, A., 2016. Qualitative calculi with heterogeneous universes. Ph.D. thesis.

University Grenoble Alpes, France.

Inants, A., Atencia, M., Euzenat, J., 2016. Algebraic calculi for weighted on-
tology alignments, in: The Semantic Web - ISWC 2016 - 15th International
Semantic Web Conference, Kobe, Japan, October 17-21, 2016, Proceedings,
Part I, pp. 360–375.

Inants, A., Euzenat, J., 2015. An algebra of qualitative taxonomical relations
for ontology alignments, in: The Semantic Web - ISWC 2015 - 14th Interna-
tional Semantic Web Conference, Bethlehem, PA, USA, October 11-15, 2015,
Proceedings, Part I, pp. 253–268.

J´onsson, B., Tarski, A., 1951. Boolean algebras with operators. Part I. American

Journal of Mathematics 73, 891–939.

Kautz, H.A., Ladkin, P.B., 1991.

Integrating metric and qualitative tempo-
ral reasoning, in: Proceedings of the 9th National Conference on Artiﬁcial
Intelligence, Anaheim, CA, USA, July 14-19, 1991, Volume 1, pp. 241–246.

Kurata, Y., Shi, H., 2009. Toward heterogeneous cardinal direction calculus, in:
KI 2009: Advances in Artiﬁcial Intelligence, 32nd Annual German Conference
on AI, Paderborn, Germany, September 15-18, 2009. Proceedings, pp. 452–
459.

Ladkin, P.B., Maddux, R.D., 1994. On binary constraint problems. J. ACM 41,

435–469.

Li, S., Liu, W., 2010. Topological relations between convex regions, in: Proceed-
ings of the Twenty-Fourth AAAI Conference on Artiﬁcial Intelligence, AAAI
2010, Atlanta, Georgia, USA, July 11-15, 2010.

Ligozat, G., 2013. Qualitative Spatial and Temporal Reasoning. ISTE, Wiley.

Ligozat, G., Renz, J., 2004. What is a qualitative calculus? A general frame-
work, in: PRICAI 2004: Trends in Artiﬁcial Intelligence, 8th Paciﬁc Rim
International Conference on Artiﬁcial Intelligence, Auckland, New Zealand,
August 9-13, 2004, Proceedings, pp. 53–64.

22

Maddux, R.D., 1982. Some varieties containing relation algebras. Trans. Amer.

Math. Soc. 272, 501–526.

Meiri, I., 1996. Combining qualitative and quantitative constraints in temporal

reasoning. Artif. Intell. 87, 343–385.

Moratz, R., 2006. Representing relative direction as a binary relation of oriented

points, in: ECAI, pp. 407–411.

Mossakowski, T., Schr¨oder, L., W¨olﬂ, S., 2006. A categorical perspective on
qualitative constraint calculi, in: Qualitative Constraint Calculi: Application
and Integration, Workshop Proceedings, pp. 28–39.

Nebel, B., Scivos, A., 2002. Formal properties of constraint calculi for qualitative

spatial reasoning. KI 16, 14–18.

Ouaknine, J., Worrell, J., 2008. Some recent results in metric temporal logic,
in: Formal Modeling and Analysis of Timed Systems, 6th International Con-
ference, FORMATS 2008, Saint Malo, France, September 15-17, 2008. Pro-
ceedings, pp. 1–13.

Randell, D.A., Cui, Z., Cohn, A.G., 1992. A spatial logic based on regions and
connection, in: Proceedings of the 3rd International Conference on Principles
of Knowledge Representation and Reasoning (KR’92). Cambridge, MA, USA,
October 25-29, 1992, pp. 165–176.

Renz, J., Mitra, D., 2004. Qualitative direction calculi with arbitrary granu-
larity, in: PRICAI 2004: Trends in Artiﬁcial Intelligence, 8th Paciﬁc Rim
International Conference on Artiﬁcial Intelligence, Auckland, New Zealand,
August 9-13, 2004, Proceedings, pp. 65–74.

Skiadopoulos, S., Koubarakis, M., 2004. Composing cardinal direction relations.

Artif. Intell. 152, 143–171.

Westphal, M., Hu´e, J., W¨olﬂ, S., 2014. On the scope of qualitative constraint
calculi, in: KI 2014: Advances in Artiﬁcial Intelligence - 37th Annual German
Conference on AI, Stuttgart, Germany, September 22-26, 2014. Proceedings,
pp. 207–218.

23

