Eﬀicient Algorithms for Stochastic Repeated
Second-price Auctions
Juliette Achddou, Olivier Cappé, Aurélien Garivier

To cite this version:

Juliette Achddou, Olivier Cappé, Aurélien Garivier. Eﬀicient Algorithms for Stochastic Repeated
Second-price Auctions. ALT 2021 - 32nd International Conference on Algorithmic Learning Theory,
Mar 2021, Paris, France. ￿hal-02997579v2￿

HAL Id: hal-02997579

https://hal.science/hal-02997579v2

Submitted on 25 Feb 2021

HAL is a multi-disciplinary open access
archive for the deposit and dissemination of sci-
entific research documents, whether they are pub-
lished or not. The documents may come from
teaching and research institutions in France or
abroad, or from public or private research centers.

L’archive ouverte pluridisciplinaire HAL, est
destinée au dépôt et à la diffusion de documents
scientifiques de niveau recherche, publiés ou non,
émanant des établissements d’enseignement et de
recherche français ou étrangers, des laboratoires
publics ou privés.

Distributed under a Creative Commons Attribution 4.0 International License

Proceedings of Machine Learning Research vol 132:1–52, 2021

32nd International Conference on Algorithmic Learning Theory

Efﬁcient Algorithms for Stochastic Repeated Second-price Auctions

Juliette Achddou
ENS Paris, Universit´e PSL, 1000mercis Group, INRIA
Olivier Capp´e
ENS Paris, Universit´e PSL, CNRS, INRIA
Aur´elien Garivier
UMPA,CNRS, INRIA, ENS Lyon

Editors: Vitaly Feldman, Katrina Ligett and Sivan Sabato

JULIETTE.ACHDOU@GMAIL.COM

OLIVIER.CAPPE@CNRS.FR

AURELIEN.GARIVIER@ENS-LYON.FR

Keywords: bandits, online learning, auctions

Abstract
Developing efﬁcient sequential bidding strategies for repeated auctions is an important practical
challenge in various marketing tasks. In this setting, the bidding agent obtains information, on both
the value of the item at sale and the behavior of the other bidders, only when she wins the auction.
Standard bandit theory does not apply to this problem due to the presence of action-dependent
censoring. In this work, we consider second-price auctions and propose novel, efﬁcient UCB-
like algorithms for this task. These algorithms are analyzed in the stochastic setting, assuming
regularity of the distribution of the opponents’ bids. We provide regret upper bounds that quantify the
improvement over the baseline algorithm proposed in the literature. The improvement is particularly
signiﬁcant in cases when the value of the auctioned item is low, yielding a spectacular reduction
in the order of the worst-case regret. We further provide the ﬁrst parametric lower bound for this
problem that applies to generic UCB-like strategies. As an alternative, we propose more explainable
strategies which are reminiscent of the Explore Then Commit bandit algorithm. We provide a critical
analysis of this class of strategies, showing both important advantages and limitations. In particular,
we provide a minimax lower bound and propose a nearly minimax-optimal instance of this class.

1. Introduction

This work is devoted to the design of strategies for bidders participating in repeated second-price
auctions. Second-price auctions have the unique property of being dominant-strategy incentive-
compatible, which means that a bidder’s return in a second-price auction is always better when
she plays truthfully than with any other bidding strategy. This property explains the widespread
use of second-price auctions in various sales and marketing contexts. In particular, second-price
auctions have long been the predominant auction structure in the ﬁeld of programmatic advertising.
There, they allow advertising spaces owned by editors to be sold to the highest bidder among
publishers who need to display their ads in fractions of a second. It is therefore possible to model an
advertising campaign of one of the publishers as a sequence of second-price auctions that involve
varying sets of other bidders —since not all publishers bid on the same inventories— with an initially
unknown payoff (materialized by clicks or by a purchase amount subsequent to the display of the
advertisement). In this context, the different publishers typically do not assign the same value to the
placements and thus each bidder has a different private value in the auction. If reserve prices are
used, these can be interpreted as additional ﬁxed virtual bids that are present in each auction. In this
work, we adopt the point of view of a single bidder with the aim of developing provably efﬁcient
online learning strategies that maximize her cumulative reward.

© 2021 J. Achddou, O. Capp´e & A. Garivier.

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

1.1. Model

We consider that similar items are sold in T sequential second-price auctions. For t in 1, . . . , T ,
the auction unfolds in the following way. First, the bidder submits her bid Bt for the item that is
of unknown value Vt. The other players submit their bids, the maximum of which is called Mt.
If Mt ≤ Bt (which includes the case of ties), the bidder observes and receives Vt, and pays Mt.
Otherwise, the bidder loses the auction and does not observe Vt. We make the following additional
assumptions. The values {Vt}t≥1 are independent and identically distributed random variables in
the unit interval [0,1]; their expectation is denoted by E(Vt) = v. The maximal bids {Mt}t≥1 are
independent and identically distributed random variables in the unit interval [0, 1]; their cumulative
distribution function is denoted by F .

Neither v nor F are assumed to be known initially to the bidder. The above model corresponds
to a continuously-armed bandit with a very particular structure: the higher the bid, the higher the
probability of observing a value and hence of learning useful information for estimating the optimal
bid v (see Appendix A.1 for a simple proof that v is actually optimal,under a mild assumption on F ).
Therefore, exploration requires that the bids Bt are not set too low while exploitation is achieved by
bidding as close as possible to the estimated value of v. Under the optimal bidding policy, i.e., when
Bt = v, only a fraction F (v) of the rounds results in an actual observation of Vt. In the example of
online advertising, the values are typically binary with very small expectation (click or conversion
rates are usually less than a few percents). We will therefore be interested in algorithms that also
perform satisfactorily in situations when the parameter v and F (v), are very small. The assumption
that the bids Mt are stochastic is well suited to contexts in which the set of bidders varies in time, the
bids depend on unobservable time-varying contextual information or when the bidders do not assign
the same value to the placements. In this work, we restrict ourselves to this setting (also considered
by Weed et al. (2016) or Flajolet and Jaillet (2017)) and refer to Section 4 of (Weed et al., 2016) for
techniques applicable to other scenarios where fast learning rates cannot be achieved.

1.2. Related Works

Following the pioneering study by Vickrey (1961) on one-item second-price auctions, a line of work
emerged on mechanism design, a ﬁeld aimed at designing mechanisms, and in particular auctions, that
satisfy some ﬁxed properties (for example being dominant strategy incentive compatible). Myerson
(1981) proves that second price auctions with reserve prices, i.e. in which the seller herself submits
a virtual bid, guarantees a maximum return to the seller when the players are symmetric, while
maintaining the dominant strategy incentive compatibility of the auction. In particular, the same
author also proves that if the valuations of each of the bidders are drawn independently from known
distributions then a closed-form expression exists for the optimal reserve price.

For the case when the distributions of the valuations of the bidders are unknown, Blum et al.
(2004); Cesa-Bianchi et al. (2014) studied online learning strategies to maximize the cumulative
payoff of the seller while learning the optimal reserve price in repeated auctions. Medina and Mohri
(2014) instead consider a supervised learning problem with features associated to each of the auctions
and adopt a full information setting instead of a bandit setting. They justify this change of setting
by the fact that sellers often have access to all the bids. Blum et al. (2004) also work in the full
information setting and rely on the weighted majority algorithm (Littlestone et al., 1989) to learn the
reserve price. In the aforementioned papers, bidders are not assumed to be strategic, which is ﬁxed

2

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

by Amin et al. (2013); Mohri and Medina (2014); Drutsa (2017); Kanoria and Nazerzadeh (2014);
Vanunts and Drutsa (2019); Drutsa (2020).

Online learning algorithms can be used to maximize the cumulative return of the buyers via the
choice of their bid, as was done for the sellers. Weed et al. (2016) proposed an online algorithm for
second-price auctions in the stochastic and adversarial settings. In particular, for the stochastic setup,
the authors consider a strategy which consists of bidding the empirical average of the past observed
values plus an exploration bonus. This way of balancing exploration and exploitation can be framed
into the family of Upper Conﬁdence Bound (UCB) strategies, that were ﬁrst used for multi-armed
bandits, see Lattimore and Szepesv´ari (2018) for an introduction to multi-armed bandits and Auer
et al. (2002) for the ﬁrst analysis of UCB. Weed et al. (2016) provides upper bounds on the regret of
UCBID, under the assumption that F satisﬁes some form of “margin condition” (see Assumption 2
in Appendix A). Weed et al. (2016) also exhibit a minimax lower bound that pertains to the speciﬁc
case where Mt is deterministic. Feng et al. (2018) extend the results of Weed et al. (2016) to different
kind of auctions mechanisms, including multi-item auctions with stochastic allocation rules.

Another extension is considered by Flajolet and Jaillet (2017), who study contextual strategies
for repeated second-price auctions with a budget. Using UCB strategies developed for linear bandits
Dani et al. (2008); Abbasi-Yadkori et al. (2011), Flajolet and Jaillet (2017) introduce an algorithm
for bidding adaptively to contexts that represent new users or inventories arriving sequentially, under
the assumption that the expected reward is a linear function of the context. The latter algorithm also
includes elements from the Bandit with Knapsacks framework Badanidiyuru et al. (2013), which are
used to handle a ﬁnancial budget constraint.

1.3. Main Contributions

In the stochastic framework considered by Weed et al. (2016) and recalled in Section 2, we propose
three new algorithms. We start in Section 3 by considering UCB algorithms that rely on tighter
conﬁdence bounds than those used for UCBID. We propose two such algorithms, named kl-UCBID
and Bernstein-UCBID, which rely, respectively, on the use of Chernoff and Bernstein deviation
inequalities. These algorithms are inspired by the works of Garivier and Capp´e (2011) and Audibert
et al. (2009) for the multi-armed bandit case. Under regularity assumptions, the analysis reveals
an improvement over UCBID that is dramatic in cases in which v is small, yielding a remarkable
reduction of the order of the worst-case regret in Theorem 5. The analysis requires to ﬁx a gap in
the proof scheme of Weed et al. (2016), which has an impact for small values of v. In section 3.3,
we provide a lower bound valid for optimistic strategies in the cases when the distribution of Mt
admits a bounded density. This lower bound differs from the result of Weed et al. (2016) because it
is parameter-dependent (rather than minimax) and not restricted to the case when the distribution of
Mt is degenerate (and hence, when the auction outcome is deterministic given the bid). This new
lower bound highlights the impact of v on the performance of the algorithms.

However UCB strategies can be hard to accept and/or to implement by practitioners in some
contexts. With this in mind, we also consider in Section 4 a class of simpler, two-phases strategies
that bid maximally until a stopping time, then either abandon the bid (typically in cases when v
is deemed to be small) or default to the running average of observed values. We provide a critical
analysis of this approach, showing both important advantages and limitations: an excellent behavior
for relatively a large v, and a sub-optimal behavior in case of a small value. We provide a minimax

3

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

lower bound for this class of strategies; it shows that their worst-case regret is bound to be larger than
that of the best UCB algorithm. These ﬁndings are illustrated by numerical simulations in Section 5.

2. Model and Assumptions

We precise the setup presented in Section 1.1 with the following notation. Let Nt = (cid:80)t
s=1 1{Ms ≤
Bs} be the number of times the bidder won up to time t, which, we stress, is also the number of
observations of values up to time t. Let ¯Vt := 1
s=1 Vs1(Ms ≤ Bs), be the empirical mean of
Nt
(cid:80)t
s=1(Vs − ¯Vt)21(Ms ≤ Bs), the population
the values observed before time t and ¯Wt := 1/Nt
variance of the values observed before time t. Lastly, w denotes the variance of Vt.

(cid:80)t

We deﬁne the utility of a bidder who submits a bid b as the difference between the received value
and the paid price: the utility function at time t is therefore expressed as Ut(b) = (Vt − Mt)1{b ≥
Mt}. As a measure of performance of bidding algorithms, we use the following notion of expected
cumulative regret:

RT := max
b∈[0,1]

T
(cid:88)

t=1

E[Ut(b)] −

T
(cid:88)

t=1

E[Ut(Bt)].

It is a well known fact that bidding v is an optimal bidding strategy in second price auctions.
A proof of this result is given in Appendix A.1, showing in particular that if the density of Mt
vanishes around this valuation v, then v is one of many maximizers of the utility, while if F admits a
strictly positive density, then Ut(b) is unimodal, in the sense that it is ﬁrst non-decreasing and then
non-increasing. This is interesting, because it allows for the use of speciﬁc algorithms designed for
unimodal bandits Yu and Mannor (2011); Combes and Proutiere (2014). We will see, however, that
these algorithms are sub-optimal as they do not fully exploit the structure of the problem.

The local behavior of F around the unknown value v is a key parameter that inﬂuences the regret
achievable by sequential bidding strategies. In the main body of this paper we focus exclusively on
the most natural assumption that the distribution of the maxima of the bids of the opponents admits a
density that is bounded in an interval containing v.

Assumption 1 Locally bounded density. There exists ∆ > 0 such that F admits a density f
bounded on [v, v + ∆], i.e., there exists β > 0, such that ∀x ∈ [v, v + ∆], f (x) < β.

This assumption corresponds to a local version of the margin condition introduced by Weed et al.
(2016) (corresponding to their case of α=1). Broader results are provided in Appendix, covering the
different local behaviors of F around v (as deﬁned by Assumption 2).

3. UCB-type algorithms

3.1. Speciﬁcation of the Algorithms

We start by studying Upper Conﬁdence Bound strategies, similar to the UCBID algorithm proposed
by Weed et al. (2016). At each time step, the algorithms submit an upper conﬁdence bound of v, thus
allowing —whith high probability— for at least as many observations as the optimal strategy (i.e.
bidding v from the ﬁrst round on). The two proposed algorithms, klUCBID and BernsteinUCBID,

4

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

differ from UCBID by the use of tighter upper conﬁdence bounds. Namely, for t > 1, they
respectively submit a bid equal to

Bt = U CBt(γ) =






(cid:17)

(cid:16)

(cid:113) γ log(t)
1, ¯Vt−1 +
min
2Nt−1
(cid:110)
x ∈ ( ¯Vt−1, 1] : kl( ¯Vt−1, x) = γ log(t)
Nt−1
(cid:18)
(cid:113) 2 ¯Wt−1 log(3tγ )
+ 3 log(3tγ )
Nt−1
Nt−1

1, ¯Vt−1 +

for UCBID

min

inf

(cid:111)

for klUCBID
(cid:19)

for BernsteinUCBID ,

where kl(p, q) denotes the Kullback Leibler divergence between two Bernoulli distributions of
expectations p and q and where γ > 0 is a parameter that impacts the exploration level. At time
t = 1, all three algorithms bid Bt = 1, ensuring an initial observation.

3.2. Upper Bounds on the Regret

We start with a new analysis of the UCBID algorithm, which completes that of Weed et al. (2016) by
emphasizing the presence of an important multiplicative factor.

Theorem 1 If F satisﬁes Assumption 1 and F (v) > 0, then the regret of the UCBID algorithm with
parameter γ > 1 is bounded as follows:

RT ≤

2βγ
F (v)

log2 T + O(log T ).

This result is proved in Appendix B.6 , which also includes the exact (non asymptotic) form of
the upper bound. The main difference with the result of Weed et al. (2016) is the factor 1/F (v) that
arises in the upper bound. This factor can be interpreted as the average time between two successive
observations under the optimal policy, which consists of bidding v and winning the auction with
probability F (v). When v is small, one thus has to wait a long time before an optimistic bid Bt gets
near to v, especially because as Bt tends to v, the algorithm is given fewer and fewer observations
to learn from. Furthermore, the lower bound derived in Section 3.3 also displays the same form of
dependence on v. Lemma 13 (in Appendix) is the key ingredient used to control the deviations of the
bid Bt from v using a resampling argument. Contrary to the case of multi-armed bandits, there is no
gap between the optimal policy and other possible strategies. To obtain the (squared) logarithmic
rate of growth of the regret in Theorem 1, it is important to recognize that, under Assumption 1, the
expected utility E[Ut(b)] is locally quadratic around v.

We now present the results pertaining to the two proposed algorithms kl-UCBID and Bernstein-
UCBID. These bounds show a signiﬁcant improvement by including a variance term of primary
importance in applications.

Theorem 2 If F satisﬁes Assumption 1, the kl-UCBID algorithm with parameter γ > 1 yields the
following bound on the regret:

RT ≤ 8γv(1 − v)

β log(T )2
F (v)

(cid:0)1 + o(1)(cid:1) .

Theorem 3 If F satisﬁes Assumption 1 and F (v) > 0, the Bernstein-UCBID algorithm with
parameter γ > 2 yields a regret bounded as follows :

RT ≤

β
F (v)

8wγ log2(T ) + O(log T ).

5

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

The proofs of Theorems 2 and 3 can be found respectively in Appendix C and B.7. Theorem
3 relies on a non-asymptotic bound that can be found in Appendix B.7. The remainder term in
Theorem 2 is less precise as a consequence of the fact that the kl-UCBID upper conﬁdence bound does
not admit a closed-form expression. Indeed the term v(1 − v) appears as a part of the second order
Taylor approximation of kl(v(cid:48), x) for values of v(cid:48) sufﬁciently close to v. A non-asymptotic bound
for kl-UCBID is also proven in Appendix C.3, but with larger multiplicative constants. The leading
terms in the bound on the regret of kl-UCBID and the bound for the regret of Bernstein-UCBID are
smaller than that of UCBID, as v(1 − v) is always less than 1/4. The difference becomes particularly
signiﬁcant for small values of v. The comparison between kl-UCBID and Bernstein-UCBID is
more subtle. It is always true that w, which is the variance of the distribution of Vt, is smaller
than v(1 − v), since Vt ∈ [0, 1]; this means that Bernstein-UCBID is a very robust algorithm. In
the case of Bernoulli rewards however, w = v(1 − v) and Chernoff’s upper conﬁdence bound is
tighter than Bernstein’s: consistently, we observe in numerical simulations that kl-UCBID dominates
Bernstein-UCBID (see Section 5). Note that we focus solely on Assumption 1 in the main body
of the paper for simplicity, but that this assumption is weaker than Assumption 2 that is required
in the proof of the upper bounds of the regret in the Appendix. Assumption 2 is more general and
extends to all cases when F is continuous in a neighborhood of v. Theorem 16 for example gives
upper bounds for the regret of UCB depending on the behavior of F around v, the worst order of
the regret being O(log T
T ). On the contrary, if F is discontinuous at v, a bound of the order of
log T

T still holds for the regret of all three UCB algorithms, as we will show in Theorem 5.

√

√

3.3. Lower Bound on the Regret of Optimistic Strategies

This section provides a lower bound for the regret of any optimistic algorithm.

Theorem 4 We consider all environments where Vt follows a Bernoulli distribution with expectation
v and F admits a density f that is bounded from below and above, with f (b) ≥ β
> 0. If a strategy
¯
is such that, for all such environments, RT ≤ O(T a), for all a > 0, and if there exists γ > 0 such
that for all such environments, P(Bt < v) < t−γ, then this strategy must satisfy:

lim inf
T →∞

RT
log T

v(1 − v)
16F (v)

.

≥ β
¯

(1)

This result is proved in Appendix D. The ﬁrst assumption, RT ≤ O(T a), is a requirement of
minimal uniform performance similar to the assumption used to prove the lower bound of Lai and
Robbins (1985) for multi-armed bandits (see, e.g., Lattimore and Szepesv´ari (2018)). The second
assumption, namely P(Bt < v) < t−γ, implies that the strategy must avoid underestimating the
expected value; the latter assumption is naturally satisﬁed by the class of UCB-like strategies.

This result extends the lower bound proved by Weed et al. (2016) in two important ways. First, it
is not restricted to the case where the maximal opponent bid Mt is constant (which is particular since
there are in this case only two policies that can be optimal by either losing or winning all auctions).
Second, this is a parameter-dependent bound, rather than a minimax one, that highlights the inﬂuence
of the parameters of the problem (v and F ).

The upper bounds obtained in Section 3.2 for the regret of the three algorithms are of the order of
log2 T , when F satisﬁes Assumption 1. The lower bound 1 is therefore not sufﬁcient to ensure that
the rate of log2 T is actually asymptotically optimal. In contrast, the dependence on v of the lower

6

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

bound is enlightening, since it shows that Bernstein-UCBID and kl-UCBID are close to optimal with
respect to v, when Vt is drawn from a Bernoulli distribution. The regret bound for UCBID however
is not on par with the lower bound for smaller values of v, suggesting a degraded performance in this
regime (as will be illustrated by the numerical simulations in Section 5).

Idea of the proof
In this paragraph we provide a quick overview of the proof, to highlight its
differences from other lower bound arguments. For the complete proof, please refer to Appendix D.
Instead of considering only two alternative models that are difﬁcult to distinguish from each
other, and where mistaking one for the other necessarily leads to a high regret, we consider a different
alternative for each of the T time steps. We ﬁx a model in which all (Vs)T
s=1 follow a Bernoulli
distribution with expectation v, and the bids (Ms)T
s=1 are distributed according to F . At each time
t, we consider the alternative model where the values (Vs)T
s=1 follow a Bernoulli distribution with
expectation v(cid:48)
F (v)t , and the bids Mt are distributed according to F . We apply Le Cam’s
method to obtain

(cid:113) v(1−v)

t = v +

(cid:18)

Pv

Bt >

(cid:19)

v + v(cid:48)
t
2

(cid:18)

+ Pv(cid:48)

t

Bt <

(cid:19)

v + v(cid:48)
t
2

≥ 1 −

(cid:114) 1
2

KL(PIt

v , PIt
v(cid:48)
t

),

(2)

The KL divergence between PIt

where we name It the information collected up to time t : (Mt−1, V (cid:48)

1).
t)Ev[Nt]. Further-
more, Lemma 27 in Appendix D shows that the expected ratio of won auctions tends to F (v) under
the assumptions of Theorem 4. Using this lemma, we obtain that ∀(cid:15) > 0, ∃t1((cid:15)), ∀t ≥ t1((cid:15)),

t−1, . . . M1, V (cid:48)
can be proved to be equal to kl(v, v(cid:48)

v and PIt
v(cid:48)
t

KL(PIt

v , PIt
v(cid:48)
t

) ≤ kl(v, v(cid:48)

t)(1 + (cid:15))F (v)t.

(3)

Combining Equations 2 and 3 yields an asymptotic bound on Pv
.
The second assumption of Theorem 4 ensures that the probability of underbidding under the al-
ternative model can be bounded by t−γ, so that it translates to a bound on the probability of
overbidding by more than
F (v)t under the ﬁxed model. Combining this bound and the fact that
Ev[(Bt − v)2] ≥ (v − v+v(cid:48)
yields an asymptotic bound on (cid:80)T
t=1 Ev[(Bt − v)2]
that reads

Bt > v+v(cid:48)

2 )2Pv

(cid:113) v(1−v)

+ Pv(cid:48)

(cid:16)

(cid:17)

2

2

2

t

t

t

t

t

(cid:16)

Bt > v+v(cid:48)

(cid:17)

(cid:16)

Bt < v+v(cid:48)

(cid:17)

lim inf
T →∞

(cid:80)T

t=1 Ev[(Bt − v)2]
log T

≥

v(1 − v)
8F (v)

.

If F admits a density bounded from below by β
¯
β
t=1 Ev[(Bt − v)2]: this concludes the proof.
¯2

(cid:80)T

3.4. Analysis of Worst Case Regrets

, Lemma 9 (Appendix A.3) shows that RT (v) ≥

In addition to the parametric lower bound result, we provide another element that suggests that
UCBID is outperformed by the other two strategies for small values of v. We do so by studying the
maximal regret maxv∈[0,1] RT (v) of the three strategies for all values of v ∈ [0, 1]. This maximal
regret is likely to be reached when v is of the order of T −1/2 (respectively T −1/3) for UCBID
(respectively BernsteinUCBID) (see Appendix E for more details).

7

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

√

Theorem 5 Without further assumption, the maximal regrets of UCBID, BernsteinUCBID and
T log T ). If F has a density that is bounded from below and above by positive con-
klUCBID are O(
3 log2 T )
stants, the maximal regret of UCBID remains of the same order, while it is reduced to O(T
for BernsteinUCBID and to O(log2 T ) for klUCBID.

1

This result suggests that there exist important differences between UCBID, BernsteinUCBID and
above all klUCBID. The proof highlights the overwhelming superiority of the latter in the presence
of low values.

The worst-case upper-bounds should in principle be compared with a minimax lower bound.
We refer to the lower bound of Weed et al. (2016), which is of the order of log T . By comparing
it with the worst case bounds contained in this section and assuming that the obtained worst-case
upper-bounds are tight, we observe that the maximal regret of UCBID is in reality not on par with the
T log T , and not log T .
logarithmic lower-bound of Weed et al. (2016), since it is of the order of
Only klUCBID is guaranteed to close the gap between the worst-case regret and this minimax lower
bound. The difference in the order of the worst-case regrets comes from the fact that the optimistic
bonus contains a term linked to the variance in the case of klUCBID, whereas UCBID uses the
very crude upper-bound 1/4. This has dramatic consequences for small values of v, causing a much
higher worst-case regret for UCBID than for klUCBID.

√

√

Note that the bound on the regret of UCBID does not require any assumption on F and can
even be proved without the assumption that the maximal bids Mt of the adversaries are iid. (see
the proof in Appendix E). Whereas in the multi-armed bandit setting, the known minimax lower
bound for stochastic regret matches that of adversarial regret, this is not the case for second price
auctions. Namely, Weed et al. (2016) prove that the worst case adversarial regret is lower bounded by
T , while we prove here that the worst case regret of klUCBID is upper-bounded by O(log2 T ).
1
32
This discrepancy is in particular due to the fact that in the adversarial setting the maximal bids of
the opponents Mt can be chosen arbitrarily, so that they do not necessarily satisfy Assumption 1.
Therefore, in the adversarial setting, the regret is linear around the optimal bid rather than quadratic,
leading to higher regrets.

t=1 E[(Mt − v)1{v ≤ Mt ≤ Bt}] + (cid:80)T

Idea of the proof. We only provide a sketch of the proof, please see Appendix E for details. We
start with UCBID, with a different approach than in Section 3.2. The regret RT of any strategy is
upper-bounded by (cid:80)T
t=1 P(Bt < v), as proved in Lemma 14
in Appendix B.2. RT is hence also bounded by (cid:80)T
t=1 P(Bt < v),
that is, the sum of the overbidding margins and the probabilities of underbidding. It is easy to
show that the second term is smaller than a constant and can therefore be neglected for a large
enough value of γ. This leaves us with the task of bounding the overbidding margins. By deﬁnition,
Bt −v = ¯Vt −v+
. The deviations to the left, ¯Vt −v, can be bounded with high probability by
(cid:113) γ log T
Nt

, which results in the high probability bound: Bt − v ≤ 2

t=1 E[(Bt − v)1{Mt ≤ Bt}] + (cid:80)T

. Since Nt is incremented

(cid:113) γ log T
Nt

(cid:113) γ log T
Nt

each time the auction is won, that is, each time Mt is smaller than Bt, we obtain

T
(cid:88)

t=1

(cid:114) γ log T
Nt

2

1{Mt ≤ Bt} ≤

(cid:114)

T
(cid:88)

n=1

2

γ log T
n

≤ 2(cid:112)γT log T .

This yields the order of the worst case regret shown in Theorem 5 for UCBID.

8

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

As for BernsteinUCBID, the worst-case bound is also not a direct consequence of the bound
presented in Section 3.2. We can use the same argument as for UCBID, but by bounding the
deviations to the left using Berstein’s instead of Hoeffding’s inequality. This yields

Ev[RT ] ≤ 2(cid:112)2T w log(3T γ) + OT ,
where OT = O(log2(T )) does not depend on v. Using this bound for small values of v and the
bound used in Section 3.2 for large values of v yields the given bound for BernsteinUCBID.

The proof of the worst-case regret for klUCBID requires some more work, as it cannot be based
on the bound presented in Section 3.2 because of its asymptotic nature. It is a consequence of the
time-dependent bound derived in Lemma 26 in Appendix C.3. This bound reads

E[RT ] ≤ C

v
F (v)

log2(T ) + OT ,

where C is a constant and OT does not depend on v and OT = o(log2 T ) . We refer to Appendix C.3
for details.

4. ETG algorithms

In multi-armed bandits, Explore Then Commit (ETC) strategies are a simplistic alternative to UCB.
They are composed of two distinct phases: exploration, designed to estimate the return of each arm,
and exploitation, where the agent plays the arm deemed more proﬁtable. In the two arm case, ETC
with an adaptive choice of the length of the exploration phase can reach competitive but sub-optimal
performance (see e.g. Garivier et al. (2016)). In the bidding model, due to the continuous nature
of the problem at hand, the ETC strategy is not viable since any approach that simply commits to a
ﬁxed bid after some time is bound to incur a large regret.

We consider instead the following class of strategies, termed Explore Then Greedy (ETG). In
the exploration phase, the maximal value of the bid (Bt = 1) is chosen to force observation. After
a well-chosen stopping time, the bidder chooses either to abandon the bids (choosing Bt = 0),
or to continue with the running average of observed values (greedy phase). In the sequel, the
exploration phase ends as soon as one is reasonably certain that the value v will either never more be
under-estimated by a factor larger than 2 (stopping time τ1), or is not worth bidding (stopping time
τ0).

ETG strategies have the advantage of being simple both to explain and to implement. Indeed, they
only require the possibility of executing tests and of computing the running average. In the context
of digital advertising, simplicity is critical, as most bidders operate through specialized platforms
that only allow simple operations because of the very high frequency of auctions. ETG strategies
are also closer to the methods that are naturally implemented by marketers and are therefore easily
explainable.

4.1. ETGstop

We propose one instance of ETG, that we call ETGstop, deﬁned by the following choice of stopping
times τ1 and τ0:

(cid:26)

(cid:18)

τ1 := inf

t ∈ [1, T ] : exp

−

(cid:27)

(cid:19)

tLt
8

≤

1
T 2

(cid:26)

, τ0 = inf

t ∈ [1, T ] : Ut ≤

(cid:27)

1
1
3

T

(4)

9

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

where we denote by Lt = min{v ∈ [0, ¯Vt[: exp (cid:0)−tkl( ¯Vt, v)(cid:1) ≤ 1/T 2} and by Ut = max{v ∈
[ ¯Vt, 1[: exp(−tkl( ¯Vt, v)) ≥ 1/T 2} the kl-lower and upper conﬁdence bound for the conﬁdence level
1/T 2.

2 )) ≤ exp(− nv

2 in the second phase. Indeed, we prove that for all n, P( ¯V (n) ≤ v

This choice of τ1 allows to guarantee that with high probability, if τ1 is smaller than τ0, all
bids will be larger than v
2 ) ≤
8 ), where ¯V (n) denotes the empirical mean of the ﬁrst n observed
exp(−nkl(v, v
values (see Lemma 11 in Appendix A). With high probability, exp(− nv
T 2 , for
all n > τ , since Lt is a lower conﬁdence bound of v. Therefore, the probability that there exists a
time step in the second phase for which the average of the observed values is less than v/2 is small.
Choosing this stopping time as the starting point of the greedy phase therefore ensures a minimal
ratio of won auctions in this second phase.

8 ) ≤ exp(− nLτ

8 ) ≤ 1

Theorem 6 If F admits a density f , that satisﬁes ∃ β
¯
regret of ETGstop satisﬁes :

, β > 0, ∀x ∈ [0, 1], β
¯

≤ f (x) ≤ β, then the

RT (v) ≤ O(T

1

3 log2 T ),

max
v∈[0,1]

and if v > 1
T

1
3

,

then RT (v) ≤ 7 +

64 log(T ) + 60T −1/2
v

+

4
F (v/2)

+ β

log2 T
F (v/2)

.

This result (proved in Appendix F) shows that the order of the regret of ETGstop is similar to that
of UCBID, klUCBID and BernsteinUCBID, when v is large enough. It is also worth noticing that
the bound of the worst case regret for ETGstop is similar to that of BernsteinUCBID and compares
favorably to that of UCBID. In the numerical experiments, we show that ETGstop can outperform
all other algorithms for large values, whereas its regret for small values v is larger than those of
UCBID and (of course) klUCBID. Can smarter ETG strategies be designed, which would reach a
signiﬁcantly better performance? The following lower bound answers negatively.

4.2. Minimax Lower Bound of the regret for ETG strategies

Theorem 7 If F admits a density lower-bounded by β
¯
satisﬁes
(cid:16)

max
v∈[0,1]

RT (v) ≥

T

β
¯
4

> 0, then the regret of any ETG strategy

(cid:17)

1
3 − 1

.

(5)

The proof of this result is given in Appendix G. This bound makes ETGstop minimax optimal
in the class of ETG strategies, up to a log2 T multiplicative factor. According to Theorem 5, the
worst-case regret of klUCBID is of the order of log2 T . Thus, the lower bound in (5) proves that
ETG strategies are bound to be suboptimal in the minimax sense. It should not come as a surprise: in
the MAB framework already, Explore Then Commit strategies are sub-optimal by a factor 2 on every
two-armed Gaussian problem (Garivier et al., 2016), and it is natural to think that ETG strategies
should suffer from the same drawback. However, the difference between UCB and ETG strategies
for second price auctions is way more substantial, since the regret of ETG strategies is necessarilyof
an order much larger than that of klUCBID.

10

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

5. Simulations

In Figure 1(a), we plot the average regret of UCBID, kl-UCBID and Bernstein-UCBID, when Vt is
drawn from a Bernoulli distribution of expectation 0.2 and Mt is drawn from a uniform distribution.
The regret is computed on 10,000 time steps and averaged on 50,000 Monte Carlo trials. The plot
clearly shows that on the ﬁrst steps and for this particular conﬁguration, kl-UCBID outperforms
UCBID and Bernstein-UCBID. Bernstein-UCBID has a larger regret than UCBID and kl-UCBID.
This comes from the fact that the variance is v(1 − v) in the present case, which makes kl-UCBID a
better candidate.

In Figure 1(b), we plot the average regret of UCBID, kl-UCBID and Bernstein-UCBID, when
Vt takes only two values 0.195 and 0.205, each with probability 1/2 and Mt is uniform. Here, the
horizon is 100,000 and we make 5,000 Monte Carlo trials. As predicted by the analysis of Section 3.2,
Bernstein-UCBID outperforms UCBID on the long run. However, the regret of both UCBID and
kl-UCBID is smaller than that of Bernstein-UCBID on small times. This comes from the fact that the
optimistic bonus is dominated, in the beginning, by the term 3 log(3tγ)/Nt which tends to be larger
than the optimistic bonuses of the two other algorithms during the ﬁrst time steps. Note that this is
an extreme case, in which the greedy strategy would perform well, since the variance is very small.
We now compare the UCB algorithms to the simpler algorithm ETGstop and to other benchmarks.
Other candidate algorithms include the greedy strategy, which submits the current average of the
observed values, the K-armed bandit UCB on a discrete set of values in the (0, 1) interval and a
unimodal bandits algorithm like LSE (Yu and Mannor, 2011). Note that UCB on discrete values does
not take the structure of the problem into account. These algorithms have been tested for Bernoulli
distributed values of mean 0.3 and uniform Mt and the result is plotted in Figure 1(c). The algorithm
named GreedyBID is the greedy one and the one named UCB discrete is UCB on discrete values. The
case displayed in Figure 1(c) corresponds to UCB run on a uniform grid of 100 values. It was checked
that it is not possible to signiﬁcantly improve the performance of UCB by varying the discretization:
making it coarser increases the regret, while making it ﬁner slows down learning. Figure 1(c) shows
that the greedy strategy, the K-armed bandit UCB on a discrete set of values and LSE behave linearly
and are therefore rapidly outperformed by the UCB type algorithms. We ran the simulations with
a modiﬁed version of ETGstop that awaits τ (cid:48)
1 = inf{t ∈ [1, T ] : tLt ≥ 2 log T } instead of τ1
before it starts the greedy phase. This new stopping time guarantees that the bids are larger then
v/10 —rather than v/2 for the analyzed version of ETGStop— with high probability. Indeed, for all
n > τ (cid:48)
T 2 (the third inequality is obtained
thanks to Lemma 11 in Appendix A) since Lτ (cid:48)
< v with high probability. Therefore, this version
of ETGStop waits less than the analyzed version before it starts the second phase, and is thus more
competitive in the regime where v is small, but is likely to accumulate more regret in the greedy
phase. This version of ETGstop does not perform as well as UCBID and klUCBID, but outperforms
BernsteinUCBID on the long run, showing that it can perform satisfactorily for large enough values.
In Figure 1(d), we plot the regret after 5,000 time steps of UCBID, kl-UCBID, Bernstein-UCBID
and ETGStop when Mt is uniform and Vt follows a Bernoulli distribution, as a function of the
expectation of Vt. We ran the simulations on 20 different values of v, using 50,000 Monte Carlo trials
in each case. As expected from the result of Section 4, ETGstop performs poorly when v is small but
outperforms the other strategies when v is large enough. Note that the peak of the regret of ETGStop
is obtained around v = T − 1
3 as suggested by the proof of Theorem 6. The regret of UCBID seems to

10 ) ≤ exp(−nkl(v, v/10)) ≤ exp(−nv) ≤ 1

1, P( ¯V (n) ≤ v

1

11

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

increase when v gets close to T − 1
which seem to reach a maximum for larger values, as suggested by the proof of Theorem 5.

2 , contrasting with the regrets of BernsteinUCBID and kl-UCBID

(a) Regret plots of three UCB algorithms for
values Vt ∼ Ber(0.2) and uniform Mt.

(b) Regret plots of three UCB algorithms
for Vt supported on {0.195, 0.205} and
uniform Mt

(c) Comparison with ETGstop and other al-
gorithms, for Vt ∼ Ber(0.3) and uni-
form Mt.

(d) Regret at time 5000 of studied poli-
cies for uniform Mt and Bernoulli-
distributed Vt of varying mean v.

6. Conclusion

Figure 1: Numerical simulations

We have proposed new UCB strategies for buyers in repeated second-price auctions. We have shown
that they improve signiﬁcantly over the state of the art, both experimentally and theoretically. Our
analysis emphasizes the role played by two important factors: the frequency of wins at the optimal bid
and the variance of the value distribution that takes a dramatic importance when the value of the item
is close to 0 or 1. We have also shown that simpler strategies may reach asymptotic performances
similar to those of UCB-like algorithms. In the online advertising context, such strategies could be
set up more easily by smaller stakeholders who do not necessarily own a programmatic bidder, but
bid through demand-side platforms. However, by studying the worst-case regret of such strategies,
we have shown that this simplicity has a price: they perform poorly when the value v lies under a
certain threshold.

12

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

References

Yasin Abbasi-Yadkori, D´avid P´al, and Csaba Szepesv´ari. Improved algorithms for linear stochastic

bandits. In Advances in Neural Information Processing Systems, pages 2312–2320, 2011.

Kareem Amin, Afshin Rostamizadeh, and Umar Syed. Learning prices for repeated auctions with
strategic buyers. In Advances in Neural Information Processing Systems, pages 1169–1177, 2013.

Jean-Yves Audibert, R´emi Munos, and Csaba Szepesv´ari. Exploration–exploitation tradeoff using
variance estimates in multi-armed bandits. Theoretical Computer Science, 410(19):1876–1902,
2009.

Peter Auer, Nicolo Cesa-Bianchi, and Paul Fischer. Finite-time analysis of the multiarmed bandit

problem. Machine Learning, 47(2-3):235–256, 2002.

Ashwinkumar Badanidiyuru, Robert Kleinberg, and Aleksandrs Slivkins. Bandits with knapsacks. In
2013 IEEE 54th Annual Symposium on Foundations of Computer Science, pages 207–216. IEEE,
2013.

Avrim Blum, Vijay Kumar, Atri Rudra, and Felix Wu. Online learning in online auctions. Theoretical

Computer Science, 324(2-3):137–146, 2004.

Olivier Capp´e, Aur´elien Garivier, Odalric-Ambrym Maillard, R´emi Munos, Gilles Stoltz, et al.
Kullback–Leibler upper conﬁdence bounds for optimal sequential allocation. The Annals of
Statistics, 41(3):1516–1541, 2013.

Nicolo Cesa-Bianchi, Claudio Gentile, and Yishay Mansour. Regret minimization for reserve prices

in second-price auctions. IEEE Transactions on Information Theory, 61(1):549–564, 2014.

Richard Combes and Alexandre Proutiere. Unimodal bandits: Regret lower bounds and optimal

algorithms. In International Conference on Machine Learning, pages 521–529, 2014.

Varsha Dani, Thomas P Hayes, and Sham M Kakade. Stochastic linear optimization under bandit

feedback. In Conference on Learning Theory, 2008.

Alexey Drutsa. Horizon-independent optimal pricing in repeated auctions with truthful and strategic
buyers. In Proceedings of the 26th International Conference on World Wide Web, pages 33–42,
2017.

Alexey Drutsa. Optimal non-parametric learning in repeated contextual auctions with strategic buyer.

ICML, 2020.

Zhe Feng, Chara Podimata, and Vasilis Syrgkanis. Learning to bid without knowing your value. In
Proceedings of the 2018 ACM Conference on Economics and Computation, pages 505–522. ACM,
2018.

Arthur Flajolet and Patrick Jaillet. Real-time bidding with side information. In Advances in Neural

Information Processing Systems, pages 5168–5178, 2017.

Aur´elien Garivier and Olivier Capp´e. The KL-UCB algorithm for bounded stochastic bandits and

beyond. In Conference on Learning Theory, pages 359–376, 2011.

13

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Aur´elien Garivier, Tor Lattimore, and Emilie Kaufmann. On explore-then-commit strategies. In

Advances in Neural Information Processing Systems, pages 784–792, 2016.

Aur´elien Garivier, Pierre M´enard, and Gilles Stoltz. Explore ﬁrst, exploit next: The true shape of

regret in bandit problems. Mathematics of Operations Research, 44(2):377–399, 2019.

Yash Kanoria and Hamid Nazerzadeh. Dynamic reserve prices for repeated auctions: Learning from

bids. In WINE, 2014.

Tze Leung Lai and Herbert Robbins. Asymptotically efﬁcient adaptive allocation rules. Advances in

Applied Mathematics, 6(1):4–22, 1985.

Tor Lattimore and Csaba Szepesv´ari. Bandit algorithms. preprint, 2018.

Nick Littlestone, Manfred K Warmuth, et al. The weighted majority algorithm. University of

California, Santa Cruz, Computer Research Laboratory, 1989.

Andres M Medina and Mehryar Mohri. Learning theory and algorithms for revenue optimization
in second price auctions with reserve. In International Conference on Machine Learning, pages
262–270, 2014.

Mehryar Mohri and Andres Munoz Medina. Revenue optimization in posted-price auctions with

strategic buyers. arXiv preprint arXiv:1411.6305, 2014.

Roger B Myerson. Optimal auction design. Mathematics of Operations Research, 6(1):58–73, 1981.

Arsenii Vanunts and Alexey Drutsa. Optimal pricing in repeated posted-price auctions with different
patience of the seller and the buyer. In Advances in Neural Information Processing Systems, pages
941–953, 2019.

William Vickrey. Counterspeculation, auctions, and competitive sealed tenders. The Journal of

Finance, 16(1):8–37, 1961.

Jonathan Weed, Vianney Perchet, and Philippe Rigollet. Online learning in repeated auctions. In

Conference on Learning Theory, pages 1562–1583, 2016.

Jia Yuan Yu and Shie Mannor. Unimodal bandits. In International Conference on Machine Learning,

pages 41–48, 2011.

14

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Supplementary Material

Outline. The appendix is structured as follows: Appendix A contains general lemmas used in the
rest of the appendix. Appendix B contains the proof of the parametric upper bounds of the regret of
UCBID and BernsteinUCBID. A brief outline of the proof scheme precedes the proofs (Appendix
B.1). The asymptotic and non asymptotic upper-bound for the regret of klUCBID can be found
in Appendix C. The proof of the parametric lower bound for standard UCB strategies follows in
Appendix D . Appendix E deals with the study of the worst case regret of UCB strategies. Appendix
F provides the proof of the upper bound of the regret of ETGstop, while Appendix G contains that of
the minimax lower bound of ETG strategies.

Additional Notation and Assumptions. The sequel requires the use of additional notations.

• We deﬁne (V (n))n≥1 by V (n) := Vτn where τn = inf{t : Nt = n}. V (n) is the n − th

observation of a value.

• ¯V (n) := 1/n (cid:80)n
• ¯W (n) := 1/n (cid:80)n

s=1 V (s) is the mean of the n ﬁrst observed values.
s=1(V (s) − ¯V (s))2 is the population variance of the n ﬁrst observed values.

• We set V (cid:48)

s = Vs if Ms ≤ Bs, and V (cid:48)

s = ∅ otherwise.

• Let Ft = σ((Ms, V (cid:48)
observed up to time t.

s )s≤t) be the σ-algebra generated by the the bid maxima and the values

• We denote by L(n) = min{v ∈ [0, ¯V (n)[: exp(−tkl( ¯V (n), v)) ≤ 1

T 2 } and by U (n) =

max{v ∈ [ ¯V (n), 1[: exp(−nkl( ¯V (n), v)) ≤ 1

T 2 }

• We also deﬁne the instantaneous regret by

in such a way that RT = (cid:80)T

t=1 E[rt].

rt := Ut(v) − Ut(Bt),

Whereas the results presented in the main body of the paper require the assumption that F admits

a locally bounded density, we prove broader results, under the following assumption.

Assumption 2 Local margin condition. F satisﬁes the local margin assumption, with parameter
α > 0, if there exists strictly positive constants ∆ and β such that

F (x) − F (v) ≤ β(x − v)α,

∀x ∈ [v, v + ∆] .

Assumption 1 is a special case of Assumption 2 with α = 1.
Alternatively, we will use the uniform version of the margin condition.

Assumption 3 Uniform margin condition. F satisﬁes the uniform margin assumption, with param-
eter α > 0, if there exists a positive constant β such that

F (x) − F (v) ≤ β(x − v)α,

∀x ∈ [v, 1] .

15

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Appendix A. General Lemmas

A.1. Maximal Utility

Lemma 8 Assume that F admits a density. The utility writes Ut(b) = (Vt − Mt)1{b ≥ Mt}. If
there exists a < v (respectively b > v), such that F is constant on [a, v] (respectively [v, b]) then
[a, v] ⊂ arg maxb∈[0,1] Ut(b) (respectively [v, b] ⊂ arg maxb∈[0,1] Ut(b)). Otherwise,

arg max
b∈[0,1]

E(cid:2)Ut(b)(cid:3) = {v}.

In either case, maxb∈[0,1]

(cid:80)T

t=1 E[Ut(b)] = (cid:80)T

t=1 E[{v − Mt}1{Mt < v}].

Proof If F admits a density f , then F is continuous and non decreasing. We can write:

E[Ut(b)] =

=

(cid:90) b

0
(cid:90) b

0

(v − m)f (m)dm

vf (m)dm −

(cid:90) b

0

mf (m)dm

= vF (b) − [mF (m)]b

0 +

(cid:90) b

0

F (m)dm

= (v − b)F (b) +

(cid:90) b

0

F (m)dm,

E[Ut(v)] − E[Ut(b)] =

=

F (m)dm − (v − b)F (b) −

(cid:90) b

0

F (m)dm

(F (m) − F (b))dm.

(cid:90) v

0
(cid:90) v

b

This latter quantity is non negative. It vanishes if and only if F is constant, on [b, v], if b < v, and on
[v, b], if v ≤ b. In particular,

E[Ut(b)] ≤ E([(Vt − Mt)1(Mt ≤ v)]),

and maxb∈[0,1]

(cid:80)T

t=1 E[Ut(b)] = (cid:80)T

t=1 E[{v − Mt}1{Mt ≤ v}].

Equivalently, we can prove the same close form of maxb∈[0,1]

(cid:80)T

t=1 E[Ut(b)] by observing that:

max
b∈[0,1]

T
(cid:88)

t=1

E[(Vt − Mt)1{Mt ≤ b}] = max
b∈[0,1]

T
(cid:88)

t=1

E[(v − Mt)1{Mt ≤ b}],

because Vt does not depend on Mt.
As (v − Mt)1{Mt ≤ b} ≤ (v − Mt)1{Mt ≤ v} , one has

max
b∈[0,1]

T
(cid:88)

t=1

E[Ut(b)] =

=

T
(cid:88)

t=1
T
(cid:88)

t=1

E[(v − Mt)1{Mt ≤ v}]

E[(Vt − Mt)1{Mt ≤ v}].

16

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

A.2. An Expression of the Regret

The instantaneous regret can be rewritten as

rt = (Mt − Vt)1{v < Mt ≤ Bt} + (Vt − Mt)1{Bt < Mt ≤ v}.

(6)

In fact, the regret may only be different from zero when Mt lies between v and Bt, otherwise bidding
v and Bt lead to the same utility. In the right hand side of (6), the ﬁrst (respectively second) term
describes the case when the bidder wins (respectively loses) the auction.

A.3. Quadratic lower and upper bounds of the regret

Lemma 9 If F admits a density f , which satisﬁes

∃ β
¯

, β > 0, ∀x ∈ [0, 1], β
¯

≤ f (x) ≤ β;

β
¯
2

T
(cid:88)

t=1

E[(Bt − v)2] ≤ RT ≤

β
2

T
(cid:88)

t=1

E[(Bt − v)2].

Then,

Proof

The instantaneous regret writes :

E[rt(b)] = E[Ut(v)] − E[Ut(b)]

=

=

=

(cid:90) v

b
(cid:90) v

F (m)dm − (v − b)F (b)

(F (m) − F (b))dm

b
(cid:90) v

(cid:90) m

b

b

f (u)dudm

where the ﬁrst equality comes from Lemma 8.

Hence

Thus

(cid:40)

β
¯
β
¯

(cid:82) v
b (m − b)dm ≤ rt(b) ≤ β (cid:82) v
v (b − m)dm ≤ rt(b) ≤ β (cid:82) b
(cid:82) b

b (m − b)dm if b ≤ v,
v (b − m)dm if v < b,

1
2

β
¯

(b − v)2 ≤ rt(b) ≤

β(b − v)2.

1
2

17

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

A.4. Bounds on the KL divergence between Bernoulli distributions

Lemma 10 ∀p ∈ [0, 1], q ∈]0, 1]

kl(p, q) ≥

(p − q)2
2˜x(1 − ˜x)

≥

(p − q)2
2˜x

,

where ˜x := p+2q

3

Proof Thanks to Taylor’s form, kl(p, q) = (p−q)2
kl(x, q) and hence ψ(cid:48)(cid:48)(x) = 1

(cid:82) 1
0 ψ(cid:48)(cid:48)(q + s(p − q))2(1 − s)ds, where ψ : x (cid:55)→
x(1−x) . We apply Jensen’s inequality, using (cid:82) 1

0 2(1 − s)ds = 1
3 .

2

(cid:90) 1

0

ψ(cid:48)(cid:48)(q + s(p − q))2(1 − s)ds ≥ ψ(cid:48)(cid:48)

(cid:18)(cid:90) 1

q + s(p − q)2(1 − s)ds

(cid:19)

≥ ψ(cid:48)(cid:48)

≥ ψ(cid:48)(cid:48)

(cid:19)

0
(cid:18) 1
3
(cid:18) 1
3

(p − q) + q

(cid:19)

(p + 2q)

.

Lemma 11 For any v in [0, 1], for any α ∈] − 1, 1

v − 1[,

kl(cid:0)(1 + α)v, v(cid:1) ≥

α2v
2(cid:0)1 + α/3(cid:1) .

Proof This lemma is a direct consequence of Lemma 10.

A.5. An Inequality Based on Benett’s Inequality

Lemma 12 For all n, such that n ≤ log T
v

,

For all n, such that n ≥ log T
v

,

(cid:18)

P

¯V (n) − v ≥ v +

(cid:19)

log T
n

≤

1
T

.

(cid:32)

P

¯V (n) − v ≥

(cid:33)

(cid:114)

2v

log T
n

≤

1
T

.

Proof We use Benett’s inequality: P( ¯V (n) − v ≥ x) ≤ exp (cid:0)−nwg( x
w )(cid:1) where g(u) = (1 +
u) log(1 + u) − u. Let hx(w) = wg(x/w). For all x > 0, hx is decreasing, its derivative being
x(w) = log(1 + x
h(cid:48)

w ) − x

w . Therefore
(cid:18)

P( ¯V (n) − v ≥ x) ≤ exp

(cid:19)(cid:19)

(cid:18)

x
v(1 − v)

≤ exp

(cid:16)

−nvg

(cid:17)(cid:17)

.

(cid:16) x
v

−nv(1 − v)g

18

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

We call v+(n) the solution of: vg( x

v ) = log T
n
unique). v+(n) satisﬁes P( ¯V (n) ≥ v+(n)) ≤ 1
T . We aim at bounding v+(n).
Since g(cid:48)(u) = log(1 + u), and g(cid:48)(cid:48)(u) = 1
Also, we can deﬁne an inverse g−1 on ]0, ∞].

1+u > 0 when u > −1, g is strictly convex on [−1, ∞].

in [0, ∞[ (it will become clear that the solution is

Additionally, g(e − 1) = 1 and g(cid:48)(e − 1) = 1, so g(x) ≥ x − (e − 2) ≥ x − 1, ∀x < e − 1, by
(cid:17)2
(cid:16) x
e−1

convexity. When x ≥ e − 1, we can prove g(x) ≥

by analyzing the function g(x) −

(cid:16) x
e−1

(cid:17)2

.

Therefore if log T

vn ≥ 1,

and if log T

vn ≤ 1,

v+(n) = vg−1

(cid:19)

(cid:18) log T
vn

≤ v +

log T
n

,

v+(n) = vg−1

(cid:19)

(cid:18) log T
vn

≤ (e − 1)

(cid:114)
v

log T
n

(cid:114)

≤

2v

log T
n

.

Appendix B. Proof of Theorem 1 and Theorem 3

B.1. Sketch of the Proofs

The methods used to obtain the bounds follow the same pattern for the three UCB algorithms. In this
sketch of proof, we focus for simplicity on the case when Assumption 3 is valid, see Sections B.6
and B.7 for more general arguments.

We ﬁrst observe that the regret RT of any strategy is upper-bounded by

T
(cid:88)

t=1

E[(Mt − v)1{v ≤ Mt ≤ Bt}] +

T
(cid:88)

t=1

P(Bt < v).

(7)

as proved in Lemma 14 in Section B.2 below. We start by bounding the second term of the right hand
side of inequality (7) by bounding the deviations to the left of ¯Vt. Furthermore, when F satisﬁes
Assumption 3 with parameter α and constant β, we can prove that

E[(Mt − v)1{v ≤ Mt ≤ Bt}] ≤ E

(cid:34)

β (Bt − v)1+α
F (v)

+

(cid:35)

1{Mt < Bt}

,

by conditioning on the intersection of Ft−1 and the σ-algebra generated by 1{Mt < Bt}. This is
proved in Lemma 15 in Section B.2. Then we use the following result, proved by a re-sampling
argument. (See Section B.2 for the proof.)

Lemma 13

(cid:34) T

(cid:88)

E

t=1

β(Bt − v)1+α
F (v)

+

(cid:35)

1{Mt ≤ Bt}

≤

β
F (v)

E

(cid:34) T

(cid:88)

(cid:35)

(B+(n) − v)1+α

+

,

(8)

n=1

19

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

where
B+(n) = min
B+(n) = {x : x > ¯V (n), kl( ¯V (n), x) = γ log T

(cid:113) γ log T
2n

1, ¯V (n) +

for UCBID,

(cid:16)

(cid:17)

B+(n) = min

(cid:16)

1, ¯V (n) +

(cid:113) 2 ¯W (n) log(3T γ )
n

} for kl-UCBID,
(cid:17)

n
+ 3 log(3T γ )
n

for Bernstein-UCBID.

The virtual bids B+(n) (indexed by the number n of observations rather than by the time t) are
obtained by replacing the value of t by the horizon T in the expression of the bids. They are a clear
upper bound on B(n). Although the horizon is not known a priori, it is convenient to consider these
virtual bids in the analysis. Bounding the right hand side sum in Lemma 13 is not hard in the case of
UCBID and Bernstein-UCBID, using the following inequality for each term: for any non negative
sequence (An),

E[X 1+α

+ ] = E[X 1+α
≤ E[A1+α

n

] + P(An < X) ,

+ 1{X ≤ An}] + E[X 1+α

+ 1{An < X}]

where X = (B+(n) − v), knowing that X ∈ [0, 1]. Setting An equal to the minimum of 1 and two
times the optimistic bonus (e.g. An = min(1, 2(cid:112)γ log T /(2n)) in the case of UCBID), one sees
that the probability P(An < X) is smaller than the probability that the mean value be larger than v
plus the optimistic bonus. We bound this latter probability, by bounding the deviations to the right of
¯Vt. Using this inequality term-wise leads to the upper bounds on the regret presented in the paper for
both UCBID and Bernstein-UCBID.

For kl-UCBID, the argument is somewhat different because there is no closed-form expression
for the optimistic bonus, and the decomposition above cannot be used directly. Another difﬁculty is
the fact that the Kullback-Leibler function for Bernoulli distribution is not symmetric. The proof of
the upper bound on the regret of kl-UCBID is therefore more technical, but follows the same general
pattern.

B.2. Proof of the General Lemmas used for the Upper Bound of the regret of UCB

strategies

B.3. General Bound on the Regret

Lemma 14 The regret RT of any strategy is upper-bounded by

T
(cid:88)

t=1

E[(Mt − v)1{v ≤ Mt ≤ Bt}] +

T
(cid:88)

t=1

P(Bt < v).

(9)

It holds

E[rt|Mt, Bt] = (Mt − v)1{v < Mt ≤ Bt} + (v − Mt)1{Bt < Mt ≤ v}.

Lemma 14 follows from (6) and uses the fact that E[(v − Mt)1{Bt < Mt < v}] ≤ E[1{Bt <

Mt}], since all the variables at stake take their values in [0, 1].

20

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

B.4. Bound due to the Margin Condition

Lemma 15 If F satisﬁes Assumption (2) with parameter α and constant β, the expected cumulative
regret is bounded by:

RT ≤

(cid:34)

T
(cid:88)

t=1

E

β(Bt − v)α+1
F (v)

+

(cid:35)

1{Mt < Bt}

+

T
(cid:88)

t=1

P(Bt < v).

(10)

Compared to the bound in Equation (7), only the ﬁrst term has changed. The new one is slightly
easier to bound, because instead of having to control the unknown quantity Mt − v, we only have to
control Bt − v.
Proof

Let Gt denote the sigma algebra generated by the intersections of elements of Ft−1 and σ(1{Mt ≤

Bt}). We consider the following conditional expectation:

E [(Mt − v)1{0 ≤ Mt − v ≤ Bt − v} |Gt ] =

(cid:82) Bt
v (x − v)dF (x)
F (Bt)

1{Mt ≤ Bt}1{v ≤ Bt}.

Thanks to the margin condition, if v ≤ Bt,

(cid:90) Bt

v

(x − v)dF (x) ≤ (Bt − v) (F (Bt) − F (v)) ≤ β(Bt − v)1+α,

and F (Bt) ≥ F (v) when v ≤ Bt. Therefore,

E [(Mt − v)1{0 ≤ Mt − v ≤ Bt − v} |Gt ] ≤

β(Bt − v)1+α
F (v)

1{Mt ≤ Bt}1{v ≤ Bt}.

We stress that the above bound may be improved in some cases: indeed, if for example Mt is
2 (Bt − v)2, which is half of our upper

distributed uniformly, then the exact value of the integral is 1
bound (since the margin condition parameter is 1 in this case).

Now it only remains to apply the chain rule and to sum over T terms to obtain the following

bound :

T
(cid:88)

t=1

E [(Mt − v)1{0 ≤ Mt − v ≤ Bt − v}] s ≤

T
(cid:88)

t=1

β(Bt − v)1+α
F (v)

+

1{Mt ≤ Bt}.

21

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

B.5. Proof of Lemma 13

We prove Lemma 13 by using a re-sampling argument.

(Bt − v)α+1

+ 1{Mt ≤ Bt}] ≤ E

(cid:34) T

(cid:88)

t
(cid:88)

(Bt − v)1+α

(cid:35)
+ 1{Nt = n, Nt−1 = n − 1}

T
(cid:88)

E[

t=1

t=1
(cid:34) T

(cid:88)

t=1
(cid:34) T

(cid:88)

≤ E

≤ E

n=1
t
(cid:88)

n=1
T
(cid:88)

(B+(n) − v)1+α

+ 1{Nt = n, Nt−1 = n − 1}

(B+(n) − v)1+α

+ 1{Nt = n, Nt−1 = n − 1}

(cid:35)

(cid:35)

n=1

t=1

(cid:34) T

(cid:88)

≤ E

(cid:35)

(B+(n) − v)1+α

+

.

n=1

The second inequality follows from a simple re-writing, where we slightly abuse notation by
taking N0 = 0. The second inequality uses the fact that B+(n) is an upper bound of B(n). The
third one follows from an inversion of the sums: note that we did not lose any information, since
when t > n, 1{Nt = n, Nt−1 = n − 1} = 0.

B.6. Upper Bound on the Regret of UCBID under Assumption 3

In this paragraph, we prove the following version of Theorem 1, under a margin condition holding
on [v, 1]. For a proof of the localized version, see section B.8.

Theorem 16 If F satisﬁes Assumption 2 with parameter α around v on [v, 1] and F (v) > 0, then
the UCBID algorithm with parameter γ > 1 yields a regret bounded as follows :
(cid:18)



(cid:19)

Cγ + β
F (v)

2(γ log T )
1−α

1+α
2

(cid:16)

(T )

1−α
2 + 1

+ 1

(cid:17)

RT ≤

F (v) ((2γ log T )(log T + 1) + 1)




if α < 1,
Cγ + β
if α = 1,
Cγ + β
F (v)
if α > 1.

(cid:104) 6γ log T

α−1 + 1

(cid:105)

where Cγ := (cid:80)∞

t=1 e

√

γ log t+1

tγ > 0.

We ﬁrst need the following lemma.

Lemma 17 The UCBID strategy ensures that the sum of probabilities in Lemma 15 is bounded by a
constant:

T
(cid:88)

t=1

P(v > Bt) ≤Cγ :=

√

T
(cid:88)

t=1

e

γ log t + 1
tγ

.

22

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Proof We use Lemma 10 in Capp´e et al. (2013), using the fact that Vt is a random variable bounded
in [0,1] and thus 1/2 subgaussian.

P(v > Bt) = P(v − ¯V (Nt) >

(cid:114) γ log t
2Nt

)

(cid:112)

= P(

2Nt(v − ¯V (Nt)) > (cid:112)γ log t)

2n(v − ¯V (n) > (cid:112)γ log t)

≤ P(∃n < t,
≤ e(cid:100)(cid:112)γ log t log t(cid:101) exp (−γ log t)

√

√

≤ e

γ log t + 1
tγ

.

Set X = (B+(n) − v). As explained in Section B.1, we use the following inequality :

∀An > 0,
E[X 1+α

+ ] = E[X 1+α
≤ E[A1+α

n

+ 1{X ≤ An}] + E[X 1+α

+ 1{An < X}]

] + P(An < X)

Here we take An equal to exactly the minimum of 1 and 2 times the optimistic bonus An =
(cid:1), so that P(An < X) is smaller than the probability that the mean overestimates

(cid:113) γ log T
2n

min (cid:0)1, 2
v by more than the optimistic bonus. Hence,

E[(B+(n) − v)1+α

+ ] ≤ (An)1+α + P

(cid:16)

(cid:114)
2

γ log T
2n

< B+(n) − v

(cid:17)

.

It holds that

(cid:32)

(cid:32)

(cid:114)

P

min

1, 2

(cid:33)

γ log T
2n

(cid:33)

< B+(n) − v

≤ P

≤ P

≤ P

(cid:114)

(cid:32)
2

(cid:32)

(cid:114)
2

γ log T
2n

γ log T
2n

(cid:32)(cid:114)

γ log T
2n

(cid:33)

< B+(n) − v

+ P(1 < B+(n) − v)

(cid:33)

(cid:114)

γ log T
2n

< ¯V (n) − v +

(cid:33)

< ¯V (n) − v

where the last line follows from Hoeffding’s inequality.

≤ T −γ,

23

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

By combining Lemma 15, Lemma 13 and Lemma 17, we ﬁnally obtain

RT ≤ Cγ +

T
(cid:88)

n=1

β/F (v)E[(B+(n) − v)1+α
+ ]

≤ Cγ + β/F (v)

≤ Cγ + β/F (v)

(cid:32) T

(cid:88)

n=1

(cid:32) T

(cid:88)

n=1

(cid:32)

(cid:33)

A1+α

n + T −γ

(cid:18) 2γ log T
n

(cid:19) 1+α

2

(cid:33)

+ 1

≤ Cγ + β/F (v)

(2γ log T )

1+α
2

T
(cid:88)

n=1

(cid:18) 1
n

(cid:19) 1+α

2

(cid:33)

+ 1

,

since An ≤ 2γ log T
For α > 1, we improve the bound by using that An = 1, ∀n ≤ 2γ log T. This yields,

, ∀n ∈ N.

n

RT ≤ Cγ + β/F (v)

T 1−γ + 2γ log T +

(cid:32)

(cid:16)

2γ log T

(cid:17) 1+α

2

T
(cid:88)

n=2γ log T

(cid:17) 1+α

2

(cid:33)

,

(cid:16) 1
n

We conclude by observing that :

T
(cid:88)

n=1

(cid:16) 1
n

(cid:17) 1+α

2 ≤

(cid:40) 2

1−α
2 + 1 if α < 1

1−α (T )
log T + 1 if α = 1,

and that

T
(cid:88)

n=2γ log T

(cid:17) 1+α

2 ≤ 2

(cid:16) 1
n

(2γ log T )
α − 1

α−1
2

if α > 1.

B.7. Upper Bound on the Regret of Bernstein-UCBID under Assumption 3

We prove the following version of Theorem 3, under a margin condition holding on [v, 1]. The proof
under a localized margin condition is given in Appendix B.8.

Theorem 18 If F satisﬁes Assumption 2 with parameter α around v on [v, 1] and F (v) > 0, the
Bernstein-UCBID algorithm with parameter γ > 2 yields a regret bounded as follows :

RT ≤C(cid:48)

γ +






1+α
2

(cid:16)

2
1−α

(6c1 log(3T γ))1+α + 1

β
F (v) (8w log(3T γ))
+ β
F (v)
β
F (v) 8w log(3T γ)(log T + 1)
+ β
F (v)
F (v) ( 8w(α+1)
β

(6c1 log(3T γ))1+α + 1
α−1 + 1

(cid:16)

(cid:16)

1−α
2 + 1

T

(cid:17)

(cid:17)

(cid:17)

if α < 1,

if α = 1,

α ) log(3T γ) if α > 1,

where c1 := (cid:80)∞
n=1

1

n1+α ≤ (cid:80)∞

n=1

1

n2 = π2/6, and C(cid:48)

γ := (cid:80)T

t=1 t1−γ.

24

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

We ﬁrst need the following lemma.

Lemma 19 The Bernstein-UCBID strategy ensures that the ﬁrst term in Equation (10) in Lemma
15 is bounded by a constant:

T
(cid:88)

t=1

P(v > Bt) ≤

T
(cid:88)

t=1

t1−γ := C(cid:48)
γ.

Proof

T
(cid:88)

t=1

P (Bt < v) ≤

(cid:115)


 ¯Vt +

P

T
(cid:88)

t=1

2 ¯Wt log(3tγ)
Nt

+

3 log(3tγ)
Nt



< v



≤

≤

≤

T
(cid:88)

t
(cid:88)

t=1
T
(cid:88)

n=1
t
(cid:88)

(cid:32)

(cid:114)

P

v > ¯V (n) +

2 ¯W (n) log(3tγ)
n

+

3 log(3tγ)
n

(cid:33)

t−γ

n=1

t1−γ,

t=1
T
(cid:88)

t=1

where we use a simple union bound for the second inequality, and the Bernstein’s deviation inequality
for the third inequality.

Let X denote B+(n) − v. As explained in Section B.1, we use the following inequality :

∀An > 0,
E[X 1+α

+ ] = E[X 1+α
≤ E[A1+α

n

+ 1{X ≤ An}] + E[X 1+α

+ 1{An < X}]

] + P(An < X)

Here we choose An as 2 times the optimistic bonus

(cid:32)

(cid:32)(cid:114)

An = min

1, 2

2 ¯W (n) log(3T γ)
n

+

3 log(3T γ)
n

(cid:33)(cid:33)

.

25

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

It holds

E[(B+(n) − v)1+α
+ ]
(cid:32)(cid:114)

(cid:32)



≤ E

min

1,

8 ¯W (n) log(3T γ)
n

+

6 log(3T γ)
n

(cid:33)1+α(cid:33)


(cid:32)(cid:114)

+ P

8 ¯W (n) log(3T γ)
n

+

6 log(3T γ)
n

(cid:33)

< B+(n) − v

(cid:34)

(cid:32)

(cid:32)

≤ E

min

1,

(cid:114)
2

2 ¯W (n) log(3T γ)
n

(cid:33)1+α

+

(cid:18) 6 log(3T γ)
n

(cid:19)1+α (cid:17)

(cid:35)

+ P

(cid:20)

≤ E

min

(cid:32)(cid:114)

8 ¯W (n) log(3T γ)
n

+

6 log(3T γ)
n

(cid:114)

< ¯V (n) − v +

(cid:16)

1,

(cid:16) 8 ¯W (n) log(3T γ)
n

(cid:17) 1+α

2 (cid:17)(cid:21)

(cid:32)

+ min

1,

(cid:18) 6 log(3T γ)
n

2 ¯W (n) log(3T γ)
n
(cid:19)1+α (cid:33)

(11)

(12)

(cid:33)

+

3 log(3T γ)
n

(13)

(cid:32)(cid:114)

+ P

2 ¯W (n) log(3T γ)
n

+

3 log(3T γ)
n

(cid:33)

< ¯V (n) − v

≤ E (cid:2) ¯W (n)(cid:3) 1+α

2 min

(cid:32)

1,

(cid:16) 8 log(3T γ)
n

(cid:33)

(cid:17) 1+α

2

(cid:32)

+ min

1,

(cid:18) 6 log(3T γ)
n

(cid:19)1+α (cid:33)

+ T −γ,

when α ≤ 1. The last inequality stems from Jensen’s inequality, which can only be applied when
α ≤ 1, and from Bernstein’s deviation inequality.
When α ≥ 1, we can bound E[(B+(n) − v)1+α

+ ] by

E (cid:2) ¯W (n)(cid:3) min

(cid:16)

1,

(cid:16) 8 log(3T γ)
n

(cid:17) 1+α

2 (cid:17)

+ min

(cid:16)

1

(cid:18) 6 log(3T γ)
n

(cid:19)1+α (cid:17)

+ T −γ.

Let us come back to the case when α ≤ 1. Since E (cid:2) ¯W (n)(cid:3) = n−1

E[(B+(n) − v)1+α

+ ] ≤ w

1+α
2

(cid:16) 8 log(3T γ)
n

(cid:17) 1+α

2 +

n w ≤ w and γ > 1,
(cid:18) 6 log(3T γ)
n

(cid:19)1+α

+ 1,

By combining Lemma 15, Lemma 13 and Lemma 17, we obtain

RT ≤ C(cid:48)

γ +

T
(cid:88)

n=1

β/F (v)E[(B+(n) − v)1+α
+ ]

≤ C(cid:48)

γ + β/F (v)

(cid:32) T

(cid:88)

n=1

1+α
2

w

(cid:16) 8 log(3T γ)
n

(cid:33) 1+α

2

+ c1(6 log(3T γ))1+α + 1

(cid:33)
,

where c1 := (cid:80)∞
n=1
When α > 1, we argue that we can bound E[(B+(n) − v)1+α

n1+α ≤ (cid:80)∞

n2 = π2/6.

n=1

1

1

E (cid:2) ¯W (n)(cid:3) min

(cid:16)

1,

(cid:16) 8 log(3T γ)
n

(cid:17) 1+α

2 (cid:17)

(cid:32)

+ min

1,

26

+ ] by
(cid:18) 6 log(3T γ)
n

(cid:19)1+α(cid:33)

+ T −γ,

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

since the ﬁrst three inequalities (11),(12), (13), still hold. The regret is therefore bounded by

RT ≤ C(cid:48)

γ +

T
(cid:88)

n=1

β
F (v)

E[(B+(n) − v)1+α
+ ]

≤ C(cid:48)

γ +

(cid:32)

β
F (v)

T
(cid:88)

n=8 log(3T γ )

(cid:18) 8 log(3T γ)
n

w

(cid:19) 1+α

2

T
(cid:88)

+

n=8 log(3T γ )

1+α

(6 log(3T γ))
n1+α

(cid:33)

+ 8 log(3T γ) + 1

because

(cid:16) 8 log(3T γ )
n

(cid:17) 1+α

2 ≤ 1 and

(cid:16) 6 log(3T γ )
n

(cid:17)1+α

We conclude by observing that :

≤ 1, when n ≥ 8 log(3T γ).

T
(cid:88)

n=1

(cid:16) 1
n

(cid:17) 1+α

2 ≤

(cid:40) 2

1−α
2 + 1 if α < 1;

1−α (T )
log T + 1 if α = 1.

and that if α > 1,

and

T
(cid:88)

n=8 log(3T γ )

(cid:16)

2

(cid:17) 1+α

2 ≤

(cid:16) 1
n

8 log(3T γ)

(cid:17) α−1

2

α − 1

.

T
(cid:88)

n=8 log(3T γ )

(cid:17)1+α

≤

(cid:16) 1
n

(cid:16)

8 log(3T γ)

α

(cid:17)α

.

B.8. Generalization to a Localized Margin Condition for UCBID and Bernstein-UCBID

Lemma 20 If F satisﬁes Assumption 2 with parameter α around v on [v, v + ∆], the upper bounds
presented in Theorems 16 and 18 are unchanged, apart from an additive term

DT =

(cid:40) 2γ log T
(cid:16) 12

∆2 + 1 for the case of UCBID,
∆ + 32
∆2

log(3T γ) + 1 for Bernstein-UCBID.

(cid:17)

Proof Alternatively to inequality (7), we use

T
(cid:88)

t=1
T
(cid:88)

RT ≤

≤

E [(Mt − v)1{v ≤ Mt ≤ Bt}] +

T
(cid:88)

t=1

P(Bt < v)

E [(Mt − v)1{v ≤ Mt ≤ Bt < v + ∆}] +

T
(cid:88)

t=1

P(Bt < v)

t=1
T
(cid:88)

+

t=1

P{v + ∆ ≤ Bt, v ≤ Mt ≤ Bt}.

27

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

The ﬁrst two terms are bounded exactly as in the proofs of Theorems 16 and 18. The last term is

treated as follows.

P(v + ∆ ≤ Bt, v ≤ Mt ≤ Bt) ≤

T
(cid:88)

t
(cid:88)

P(v + ∆ ≤ B+(n))1{Mt < Bt}

T
(cid:88)

t=1

n=1

P(v + ∆ ≤ B+(n))

P(∆ − An ≤ ¯V (n) − v)

P(An ≤ ¯V (n) − v) + P(∆ < 2An),

t=1
t
(cid:88)

n=1
t
(cid:88)

n=1
t
(cid:88)

n=1

≤

≤

≤

(cid:19)

for UCBID and An is

where An corresponds to min

1, 2

(cid:18)

(cid:113) γ log T
2n

(cid:32)

(cid:32)(cid:114)

min

1, 2

2 ¯W (n) log(3T γ)
n

+

3 log(3T γ)
n

(cid:33)(cid:33)

,

∆2

, ∆ ≥ 2An, therefore P(∆ < 2An) = 0 for n > 2γ log T

for Bernstein-UCBID.
The second inequality is proved with similar arguments to those of the proof of Lemma 13. In the
case of UCBID, when n > 2γ log T
In the case of Bernstein-UCBID, P(∆ < 2An) ≤ 1{∆ < 12 log(3T γ )
since ∆ < a + b implies that ∆ < 2a or ∆ < 2b.
When n > 12 log(3T γ )
Since ¯W (n) ≤ 1, P(
This yields

∆ , the ﬁrst term is equal to 0. The second term is equal to P(
¯W (n)
n ) is smaller than 1{n ≤ 32

∆2
(cid:113) 32 ¯W (n) log(3T γ )
n

∆2 log(3T γ)}.

∆2
32 log(3T γ ) <

∆2
32 log(3T γ )

} + P(∆ <

¯W (n)

),

n ).

n

.

T
(cid:88)

t=1

P(v + ∆ ≤ Bt, v ≤ Mt ≤ Bt), ≤ 1 +

for UCBID

(cid:40) 2γ log T
∆2
(cid:16) 12
∆ + 32
∆2

(cid:17)

log 3T γ for Bernstein-UCBID.

Appendix C. Upper Bound of the Regret of klUCBID

We ﬁrst prove the following version of Theorem 2 under the assumption that the margin condition
holds uniformly on [v, 1]. We will explain how to adapt the proof to the localized margin condition
in Appendix C.2.

28

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Theorem 21 If F satisﬁes Assumption 3 and F (v) > 0, the kl-UCBID algorithm with parameter
γ > 1 yields the following asymptotic bound on the regret:

lim sup
T →∞

(log T )

RT
1+α
2 (T )

1−α
2

≤

2β
F (v)(1 − α)

(8γv(1 − v)))

1+α
2

, if α < 1.

lim sup
T →∞

RT
(log T )2 ≤

β
F (v)

8γv(1 − v), if α ≥ 1.

C.1. Analysis under Assumption 3

We ﬁrst prove the following lemma.

Lemma 22 The kl-UCBID strategy ensures that the second term in Lemma 15 is bounded by a
constant:

T
(cid:88)

t=1

P(Bt < v) ≤ Cγ.

Proof We apply Theorem 10 of Garivier and Capp´e (2011), and sum over {1 . . . T } as in the proof
of Lemma 17.

Now let us bound the right hand side of inequality (8) in Lemma 13.We note that

(cid:34) T

(cid:88)

E

(cid:35)

(B+(n) − v)1+α

+

≤

n=1

T
(cid:88)

n=1

(cid:2)E[(Uγ(n) − v)1+α1{Lγ(n) < v}] + P(v ≤ Lγ(n))(cid:3) ,

where Uγ(n) = {q : ¯V (n) < q, kl( ¯V (n), q) = γlogT
¯V (n), kl( ¯V (n), q) = γlogT

n }.

n } = B+(n), and Lγ(n) = {q : q ≤

Before getting to the proof, we state an important lemma showing that for any θ, there exists
a neighborhood in which for all ˆθ, u, kl(ˆθ, u) is lower bounded by a speciﬁc quadratic function of
u − ˆθ.

Lemma 23 ∀θ, ∀(cid:15), ∃η(cid:15)(θ) < 1, such that if ˆθ, u ∈ [θ − η(cid:15)(θ), θ + η(cid:15)(θ)],

kl(ˆθ, u) ≥

(u − ˆθ)2
2θ(1 − θ)(1 + (cid:15))

.

Proof Using the Lagrange form of Taylor theorem,

kl(ˆθ, u) ≥

(u − ˆθ)2
2 maxx∈[ˆθ,u] x(1 − x)

.

By continuity of x(1 − x), there exists a neighborhood of θ, in which x(1 − x) ≤ (1 + (cid:15))θ(1 − θ).
Therefore, if ˆθ, u are in this interval, ∀x ∈ [ˆθ, u], x(1 − x) ≤ (1 + (cid:15))θ(1 − θ).

29

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Lemma 24 For (cid:15) > 0 and η(cid:15) deﬁned as in Lemma 23, set

n0(v, T, (cid:15)) =

(cid:108) 8γ log T
η2
(cid:15)

(cid:109)
.

Then ∀n ≥ n0(v, T, (cid:15)),

E[(Uγ(n) − v)1+α

+ ] ≤ T −γ + P(v ≤ Lγ(n)) +

(cid:114)

(cid:32)
2

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

.

Proof

In this proof we will use the notation n0 instead of n0(v, T, (cid:15)) for the sake of clarity. We can
) ≤ T −γ. Therefore, if

) ≤ exp(− n0(v,T,(cid:15))

show that n0 is deﬁned so that exp(− n0(v,T,(cid:15))
n > n0, with probability larger than 1 − T −γ,

2

η(cid:15)(v)
4

η2
(cid:15) (v)
4

2

|v − ¯V (n)| ≤ η(cid:15)/4,

thanks to Hoeffding’s inequality. Hence, if n > n0, with probability larger than 1 − δ, if x ∈
[Lγ(n), Uγ(n)],

| ¯V (n) − x| ≤

(cid:114) 1
2

kl( ¯V (n), x) ≤

(cid:114)

γ log T
2n

≤

(cid:114)

η2
(cid:15)
4

≤

η(cid:15)
2

,

where the ﬁrst inequality follows from Pinsker’s inequality, the second stems from the deﬁnition of
Lγ(n) and Uγ(n) and the third one as a result of the deﬁnition of n0. And

|v − x| ≤ | ¯V (n) − x| + | ¯V (n) − v| ≤ η(cid:15)/2 + η(cid:15)/4 ≤ η(cid:15).

Finally, using Lemma 23,

kl( ¯V (n), x) −

(x − ¯V (n))2
2v(1 − v)(1 + (cid:15))

≥ 0.

Hence, with probability larger than 1 − T −γ,

Uγ(n) − Lγ(n) ≤ 2

(cid:114)

2γ log T v(1 − v)(1 + (cid:15))
n

,

thanks to Lemma 23. Indeed the distance between Uγ(n) and Lγ(n) is larger than the distance
between the two roots of the quadratic lower bound minus log T

n . Therefore,

E[(Uγ(n) − v)1+α

+ ] ≤ E[(Uγ(n) − v)1+α
(cid:114)

+ 1{v ∈ [Lγ(n), Uγ(n)]}] + P(v ≤ Lγ(n))

(cid:32)
2

≤

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

+ P(v ≤ Lγ(n)) + T −γ.

30

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Since, in fact B+(n) = Uγ(n),

(cid:34) T

(cid:88)

E

(B+(n) − v)1+α

+

(cid:35)

n=1

≤ n0(v, T, (cid:15)) +

T
(cid:88)

n=n0(v,T,(cid:15))

P(v ≤ Lγ(n)) +

T
(cid:88)

T −γ

n=n0(v,T,(cid:15))
(cid:33)1+α

T
(cid:88)

(cid:114)

(cid:32)
2

+

n=n0(v,T,(cid:15))

2γ log T v(1 − v)(1 + (cid:15))
n

≤ n0(v, T, (cid:15)) + 2

T
(cid:88)

T −γ +

T
(cid:88)

(cid:114)

(cid:32)
2

n=n0(v,T,(cid:15))

n=n0(v,T,(cid:15))

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

≤ n0(v, T, (cid:15)) + 2T 1−γ +

(cid:114)

(cid:32)
2

T
(cid:88)

n=1

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

,

where the third inequality comes from the fact that P(v ≤ Lγ(n)) ≤ T −γ , which is a result of
Chernoff’s deviation inequality (see Corollary 10.14 of Lattimore and Szepesv´ari (2018)). Thus,

RT ≤ Cγ + n0(v, T, (cid:15)) + 2T 1−γ +

(cid:32)

(cid:114)
2

T
(cid:88)

n=1

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

For α < 1, We use :

T
(cid:88)

n=1

(cid:16) 1
n

(cid:17) 1+α

2 ≤ 1 +

2
1 − α

1−α
2

(T )

if α < 1.

(cid:18)
2

We handle the case α ≥ 1 by observing that when n ≥ 8γv(1 − v)(1 + (cid:15)) log T ,
(cid:113) 2γ log T v(1−v)(1+(cid:15))
n
We also use that

≤ 8 γ log T v(1−v)(1+(cid:15))

(cid:19)1+α

n

.

T
(cid:88)

(cid:17) 1+α

2 ≤

(cid:16) 1
n

T
(cid:88)

1
n

.

n=8γv(1−v)(1+(cid:15)) log T

n=8γv(1−v)(1+(cid:15)) log T

Hence,

RT ≤ Cγ + n(cid:48)

0(v, T, (cid:15)) + 2 +






1+α
2

β
F (v) (8γv(1 − v)(1 + (cid:15)) log T )
if α < 1
β
F (v) 8v(1 − v)(1 + (cid:15))γ log T (log T + 1)
if α ≥ 1

2
1−α (T )

1−α
2

31

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

where n(cid:48)

0(v, T, (cid:15)) = max(n0(v, T, (cid:15)), 8γv(1 − v) log T ).

Also, using the fact that

n0 =

8γ log T
η2
(cid:15)

,

0(v, T, (cid:15)) is therefore negligible compared to (log2 T ) and to T
n(cid:48)

1−α
2 when α < 1. And ∀(cid:15) > 0,

lim sup
T →∞

(log T )

RT
1+α
2 (T )

1−α
2

≤

β
F (v)

(8γv(1 − v)(1 + (cid:15)))

1+α
2

2
1 − α

,

if α < 1. And ∀(cid:15) > 0,

lim sup
T →∞

RT
(log T )2 ≤

β
F (v)

8γv(1 − v)(1 + (cid:15)),

if α ≥ 1.
Letting (cid:15) tend to 0 concludes the proof.

C.2. Generalization to a Localized Margin Condition for kl-UCBID

Theorem 25 If F satisﬁes Assumption 2 and F (v) > 0, the kl-UCBID algorithm with parameter
γ > 1 yields the following asymptotic bound on the regret:

lim sup
T →∞

(log T )

RT
1+α
2 (T )

1−α
2

≤

2β
F (v)(1 − α)

(8γv(1 − v)))

1+α
2

, if α < 1.

lim sup
T →∞

RT
(log T )2 ≤

β
F (v)

8γv(1 − v), if α ≥ 1.

In this case, we adapt the proof in Appendix C.1 by observing that

RT ≤

T
(cid:88)

t=1

E[(Mt − v)1{v < Mt < Bt < v + ∆}]

+

T
(cid:88)

t=1

P(v < Bt) +

T
(cid:88)

t=1

P(v + ∆ ≤ Bt, Mt < Bt).

The ﬁrst two terms of the bound are analyzed exactly in Section C. The last one is bounded as follows

T
(cid:88)

t=1

P(v + ∆ ≤ Bt, Mt < Bt) ≤

≤

T
(cid:88)

n=1
T
(cid:88)

n=1

P(v + ∆ ≤ B+(n))

P(v ≤ Lγ(n)) +

T
(cid:88)

n=1

P(∆ < B+(n) − Lγ(n))

P(∆ < Uγ(n) − Lγ(n)),

≤ T 1−γ +

T
(cid:88)

n=1

32

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

where the ﬁrst inequality results from the same steps as in the proof of Lemma 13, and the last one
stems from the fact that P(v ≤ Lγ(n)) ≤ T −γ, which is a result of the Chernoff deviation inequality
(see Corollary 10.14 of Lattimore and Szepesv´ari (2018)). For n > n(cid:48)

0(v, T, (cid:15)),

Uγ(n) − Lγ(n) ≤ 2

(cid:114)

2γv(1 − v)(1 + (cid:15)) log T
n

and,

∆ < Uγ(n) − Lγ(n) =⇒ ∆ < 2

(cid:114)

2γv(1 − v)(1 + (cid:15)) log T
n

.

Yet this latter condition on ∆ is equivalent to n < 8γv(1−v)(1+(cid:15))
for T > max(n(cid:48)

0(v, T, (cid:15)), n1(v, T, (cid:15))) := n2(v, T, (cid:15)),

∆2

log T := n1(v, T, (cid:15)). This yields,

T
(cid:88)

t=1

P(v + ∆ ≤ Bt, Mt < Bt) ≤ T 1−γ + n2(v, T, (cid:15)).

Hence,

RT ≤ Cγ + n2(v, T, (cid:15)) + 3T 1−γ +

(cid:32)

(cid:114)
2

T
(cid:88)

n=1

2γ log T v(1 − v)(1 + (cid:15))
n

(cid:33)1+α

≤ Cγ + n2(v, T, (cid:15)) + 3 +






1+α
2

β
F (v) (8γv(1 − v)(1 + (cid:15)) log T )
if α < 1
β
F (v) 8v(1 − v)(1 + (cid:15))γ log T (log T + 1)
if α ≥ 1

2
1−α (T )

1−α
2

.

Taking the upper limit when T → ∞ and letting (cid:15) tend to 0 concludes the proof.

C.3. Proof of an Alternative Bound of the Regret of klUCB, under Assumption 3

Lemma 26 Under Assumption 3, klUCBID incurs a regret bounded by

RT ≤ 1 + Cγ + log T + 2

√

γ log T +






β

β

1+α
2

1−α v

F (v) (6 + 4γ)2 v log2 T, for α = 1,
F (v) (6 + 4γ)1+α 2
+5 log2 T for α < 1,
F (v) (6 + 4γ)1+α 2
for α > 1.

α−1 v

1+α
2

log

β

1+α
2 (T )T

1−α
2

. (14)

log(T ) + 5 log2 T

Proof

RT (v) ≤

T
(cid:88)

t=1

P(Bt < v) +

T
(cid:88)

t=1

(cid:20)

(cid:18)

E

(Bt − v)1(v < Mt < Bt)1

Nt ≤

(cid:19)(cid:21)

log T
v

(cid:18)

(cid:20)

+

T
(cid:88)

t=1

E

(Bt − v)1(v < Mt < Bt)1

Nt ≥

33

(cid:19)(cid:21)

log T
v

(15)

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

The ﬁrst term of the right hand side of Equation 15 is bounded by a constant

thanks to Theorem 10 of Garivier and Capp´e (2011).

Cγ := (cid:80)∞

t=1 e

√

γ log t+1
tγ

We denote by n0 = min

side of Equation (15).

(cid:16)

T,

(cid:106) log T
v

(cid:107)(cid:17)

. We start by bounding the second term of the right hand

T
(cid:88)

t=1

(Bt − v)1(v < Mt < Bt)1

Nt ≤

(cid:18)

(cid:19)

log T
v

(cid:34) T

(cid:88)

(Bt − v)1(v < Mt < Bt)1

(cid:19)(cid:35)

(cid:18)

Nt ≤

log T
v

t=1
(cid:34) T

(cid:88)

t=1

(cid:34) n0(cid:88)

n0(cid:88)

(B+(n) − v)1

n=1

(cid:35)
(B+(n) − v)

≤ E

≤ E

≤ E

≤ E

n=1

(cid:34) n0(cid:88)

(B+(n) − v)1

(cid:18)

¯V (n) < 2v +

(cid:19)(cid:35)

log T
n

n=1
(cid:18)

¯V (n) ≥ 2v +

+ P

(cid:19)

log T
n

(cid:18)

Nt ≤

(cid:19)

log T
v

1(Nt = n)1(Nt+1 = n + 1)

(cid:35)

(cid:34) n0(cid:88)

≤ E

(B+(n) − ¯V (n) + ¯V (n) − v)1

n=1

(cid:18)

¯V (n) < 2v +

(cid:19)(cid:35)

log T
n

+

1
T

,

where the last line comes from Lemma 12.

We know from Lemma 10 that

(Uγ(n) − ¯V (n))2
2 × 2((Uγ (n)− ¯V (n)+ ¯V (n))+ ¯V (n)

3

≤ kl( ¯V (n), Uγ(n)) =

γ log T
n

.

Hence if we denote by ∆(n) := B+(n) − ¯V (n),

3∆2(n)
2(3 ¯V (n) + 2∆(n))

≤

γ log T
n

.

Therefore,

3∆2(n) ≤ 2γ

≤ 2γ

log T
n
log T
n

when ¯V (n) < 2v + log T
n .

(3 ¯V (n) + 2∆(n))
(cid:18)

(cid:19)

) + 2∆(n)

,

log T
n

3(2v +

34

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Hence

∆(n) ≤

2γ log T
3n

+

(cid:115)

1
6
(cid:114)

≤

10γ
3

log T
n

+

4γ

v log T
n

,

16γ2 log2 T
n2

+

36(2v + log T
n )
n

2γ log T
n

when ¯V (n) < 2v + log T
n .

This yields
(cid:34) n0(cid:88)

E

(B+(n) − ¯V (n) + ¯V (n) − v)1

(cid:18)

Nt ≥

(cid:19)

(cid:18)

1

log T
v

¯V (n) < v +

n=1

(cid:34) n0(cid:88)

≤ E

(∆(n) + ¯V (n) − v)1

n=1

(cid:18)

Nt ≥

(cid:19)

1

log T
v

(cid:18)

¯V (n) < v +

log T
n

log T log(n0) + (cid:112)4vγ

√

(cid:112)log T + vn0 + log T log(n0)

n0

(cid:19)(cid:35)

log
n
(cid:19)(cid:35)

γ log T (cid:112)log T + log T.

≤

≤

10γ
3
13γ
3

Finally,

(cid:20)

T
(cid:88)

t=1

log T log(n0) +

(cid:114)
4

v
v

(cid:18)

E

(Bt − v)1(v < Mt < Bt)1

Nt ≤

(cid:19)(cid:21)

log T
v

≤

n0
T

+

13γ
3

log2 T + 2

√

γ log T + log T.

(16)

35

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

We now bound the third term of the right hand side of Equation 15.

T
(cid:88)

t=1

(cid:20)

(cid:18)

E

(Bt − v)1(v < Mt < Bt)1

Nt ≥

(cid:19)(cid:21)

log T
v

(cid:20)

(cid:20)

(cid:18)

E

E

(Bt − v)1(v < Mt < Bt)1

Nt ≥

log T
v

(cid:19) (cid:12)
(cid:12)
(cid:12)Ft ∩ σ(Mt < Bt)

(cid:21)(cid:21)

≤

≤

≤

≤

T
(cid:88)

t=1
T
(cid:88)

t=1
T
(cid:88)

n=n0+1
T
(cid:88)

n=n0+1
(cid:32)

E

(cid:20) β
F (Bt)

(Bt − v)1+α1(v < Mt < Bt)1

(cid:18)

Nt ≥

log T
v

(cid:19)(cid:21)

(cid:20) β
F (v)

E

(cid:34)

E

β
F (v)

(B+(n) − v)1+α

(cid:21)

(cid:0)B+(n) − v)(cid:1)1+α 1

(cid:32)

¯V (n) − v ≤

(cid:33)(cid:35)

(cid:114)

2v

log T
n

+ P

¯V (n) − v ≥

(cid:33)

(cid:114)

2v

log T
n

T
(cid:88)

≤

n=n0+1

(cid:34)

E

β
F (v)

(cid:0)B+(n) − ¯V (n) + ¯V (n) − v)1+α(cid:1) 1

(cid:32)

¯V (n) − v ≤

(cid:33)(cid:35)

(cid:114)

2v

log T
n

+

1
T

,

where the third inequality comes from a re-sampling argument coupled with the fact that F (Bt) ≥
F (v) in case of a won auction, and the last inequality follows from Lemma 12. Like for smaller
values of n,

3∆2(n)
2(3 ¯V (n) + 2∆(n))

≤

γ log T
n

.

Therefore,

3∆2(n) ≤ 2γ

≤ 2γ

≤ 2γ

≤ 2γ

log T
n
log T
n

log T
n
log T
n

(3 ¯V (n) + 2∆(n))
(cid:32)
3

v +

(cid:114)

2v

(cid:32)

log T
n

(cid:33)(cid:33)

+ 2∆(n)

(cid:16)

(cid:16)

(cid:16)

(cid:16)

3

3

√

v +

2v + 2∆(n)

(cid:17)(cid:17)

√

(1 +

2)v + 2∆(n)

(cid:17)(cid:17)

,

when ¯V (n) − v <

(cid:113)

2v log T
n

and n ≥ n0.

36

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

This yields

∆(n) ≤

2γ log T
3n

+ 36 × (1 +

√

2)v

γ log T
n

(cid:115)

16γ log2 T
n2
√

(cid:114)

(1 +

2)v

log T
n

(cid:114)

(cid:113)

(1 +

+

√

2)v

log T
n

1
6
(cid:113)

+

+

log T
n
(cid:19) √

(cid:114)

log T
n

,

γv

4γ log T
3n
√

(cid:114)

v

≤

≤

4γ
3
(cid:18)

≤

2 +

4γ
3

(cid:113)

when n > n0 and ¯V (n) <

2v log T

n . We used that γ > 1 in the ﬁrst inequalities. Therefore

T
(cid:88)

n=n0+1

(cid:34)

E

β
F (v)

≤

≤

T
(cid:88)

n=n0+1
T
(cid:88)

n=n0+1

β
F (v)

β
F (v)

(cid:0)B+(n) − ¯V (n) + ¯V (n) − v)(cid:1)2 1

(cid:32)

¯V (n) − v ≤

(cid:33)(cid:35)

(cid:114)

2v

log T
n

(cid:32)(cid:18)

2 +

(cid:19) (cid:114)

γv log T
n

(cid:114)

+

2v

log T
n

4γ
3

(cid:33)1+α

(6 + 4γ)1+α

(cid:19) 1+α

2

(cid:18)

v

log T
n

≤

β
F (v)

(6 + 4γ)1+α






1+α
2

v log T (log T − log(n0)) if α = 1
1+α
2
α−1 v
if α < 1
2 (T )T
1+α
2
1−α v
2 (n0), if α > 1
2 (T ) log

1−α
2

1+α
2

log

log

1−α

.

When using Equation (15) and hence summing with Cγ and the right hand side of Equation (16),

we obtain:

RT ≤ 1 + Cγ + 2

√

γ log T + log T +

β
F (v)

(6 + 4γ)2 v log2 T,

for α = 1, using the fact that 10γ
Similarly,

3 < (6 + 4γ)2, to make the terms proportional to log(n0) disappear.

RT ≤ 1+Cγ +

log2 T +2

√

13γ
3

γ log T +log T +

β
F (v)

(6 + 4γ)1+α

2
1 − α

1+α
2

v

log

1+α
2 (T )T

1−α
2 ,

for α < 1. And

RT ≤ 1 + Cγ +

log2 T + 2

√

13γ
3

γ log T + log T +

β
F (v)

(6 + 4γ)1+α

2
α − 1

1+α
2

v

log(T ),

for α > 1.

37

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Appendix D. Proof of the Lower Bound for Optimistic Strategies

We restate the Theorem for simplicity.

Theorem 4 We consider all environments where Vt follows a Bernoulli distribution with expectation
v and F admits a density f that is both upper bounded and lower bounded, with f (b) ≥ β
> 0. If a
¯
strategy is such that, for all such environments, RT ≤ O(T a), for all a > 0, and there exists γ > 0
such that for all such environments, P(Bt < v) < t−γ, then this strategy must satisfy:

lim inf
T →∞

RT
log T

v
16F (v)

.

≥ β
¯

Proof We need the following lemma:

Lemma 27 If RT ≤ O(T a), ∀a > 0, and F admits a density which is lower bounded by a positive
constant and upper bounded. Then,

lim
t→∞

E

(cid:21)

(cid:20) Nt
t

= F (v).

Proof (cid:80)T
E (cid:2) Nt
t
denote β,

(cid:3) = E[ 1
t

t=1 E[(Bt − v)2] ≤ O(T a), ∀a > 0, because of Lemma 9. By the tower rule, it holds
s=1 F (Bs)]. Since F admits a density f , upper bounded by a constant that we

(cid:80)t

E[(F (Bt) − F (v))2]] ≤ β2E[(Bt − v)2].

Since RT ≤ O(T a), ∀a > 0, then (cid:80)T
v)2] = 0. Combining these two arguments yields limt→∞ E[(F (Bt) − F (v))2] = 0 and since L2-
convergence implies L1-convergence, limt→∞ E[F (Bt)] = F (v).
Together with the fact that E (cid:2) Nt
t
proves the lemma.

t=1 E[(Bt−v)2] ≤ O(T a), ∀a > 0, in particular limt→∞ E[(Bt−

s=1 F (Bs)], and with the Cesaro theorem this result

(cid:3) = E[ 1
t

(cid:80)t

We get back to the proof of Theorem 4. We set a time step t ∈ [1, T ]. We consider two alternative
environments with identical distributions for Mt that differ by the distribution of Vt. The value Vt is
distributed according to a Bernoulli distribution of expectation v in the ﬁrst environment, respectively
v(cid:48)
t = v +

F (v)t , in the second environment.

(cid:113) v(1−v)

Notation. We will denote by Pv(·) the probability of an event under the ﬁrst environment (re-
(·)
spectively Ev(·) the expectation of a random variable under the ﬁrst environment), and by Pv(cid:48)
(·) the expectation of a
the probability of an event under the second environment (respectively Ev(cid:48)
random variable under the ﬁrst environment). We denote by It the information collected up to time
v (respectively PIt
t + 1 : (Mt, V (cid:48)
) is the law of It in the ﬁrst (respectively
v(cid:48)
t
second) environment.

1). Finally, PIt

t , . . . M1, V (cid:48)

t

t

We consider the Kullback Leibler divergence between PIt

v and PIt
v(cid:48)
t

,

KL(PIt

v , PIt
v(cid:48)
t

) = kl(v, v(cid:48)

t)E[Nt]

This is proved using the chain rule for conditional KL.

38

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

In fact,

and

KL(PIt

v , PIt
v(cid:48)
t

) = KL(PIt−1

v

, PIt−1
v(cid:48)
t

) + KL(P(Mt,V (cid:48)

v

t )|It−1

, P(Mt,V (cid:48)
v(cid:48)
t

t )|It−1

),

KL(P(Mt,V (cid:48)
v

t )|It−1

, P(Mt,V (cid:48)
v(cid:48)
t

t )|It−1

) = E[E[KL(νIt ⊗ D, ν(cid:48)
= E[kl(v, v(cid:48))1(Bt > Mt)].

It ⊗ D)|It−1]]

where νIt(respectively ν(cid:48)
It
the second), and D the law of Mt.
By induction, we obtain

) denotes the law of V (cid:48)

t knowing It in the ﬁrst environment (respectively

Using Lemma 27, ∀(cid:15) > 0, ∃t1((cid:15)), ∀t ≥ t1((cid:15)),

KL(PIt

v , PIt
v(cid:48)
t

) = kl(v, v(cid:48)

t)E[Nt].

KL(PIt

v , PIt
v(cid:48)
t

) ≤ kl(v, v(cid:48)

t)(1 + (cid:15))F (v).

Using the data processing inequality (see for example Garivier et al. (2019)), we get

KL(PIt

v , PIt
v(cid:48)
t

(cid:18)

(cid:18)

) ≥ kl

Pv

Bt >

(cid:18)

(cid:18)

≥ 2

Pv

Bt >

(cid:18)

(cid:18)

≥ 2

Pv

Bt >

v + v(cid:48)
t
2
v + v(cid:48)
t
2
v + v(cid:48)
t
2

(cid:19)

(cid:19)

(cid:19)

(cid:18)

, Pv(cid:48)

t

Bt >

(cid:18)

− Pv(cid:48)

t

Bt >

(cid:18)

+ Pv(cid:48)

t

Bt <

v + v(cid:48)
t
2
v + v(cid:48)
t
2
v + v(cid:48)
t
2

(cid:19)(cid:19)

(cid:19)(cid:19)2

(cid:19)

(cid:19)2

− 1

,

where the second inequality comes from Pinsker inequality. Therefore,
(cid:114) 1
2

v + v(cid:48)
t
2

v + v(cid:48)
t
2

+ Pv(cid:48)

≥ 1 −

Bt >

Bt <

Pv

(cid:18)

(cid:19)

(cid:18)

(cid:19)

t

KL(PIt

v , PIt
v(cid:48)
t

).

Speciﬁcally, ∀t > t0((cid:15)),

(cid:18)

Pv

Bt >

(cid:19)

v + v(cid:48)
t
2

(cid:18)

+ Pv(cid:48)

t

Bt <

(cid:19)

v + v(cid:48)
t
2

≥ 1 −

(cid:114) 1
2

kl(v, v(cid:48)

t)(1 + (cid:15))F (v)t.

Using the fact that Ev[(Bt − v)2] ≥ (v − v+v(cid:48)

t

2 )2Pv

(cid:16)

Bt > v+v(cid:48)

t

2

(cid:17)

yields

Ev[(Bt − v)2] ≥

(cid:18) v − v(cid:48)
t
2

(cid:19)2

(cid:18)

Pv

Bt >

(cid:19)

v + v(cid:48)
t
2

≥

v(1 − v)
4F (v)t

(cid:32)

1 −

(cid:114) 1
2

(1 + (cid:15))kl(v, v(cid:48)

t)F (v)t − 1/tγ

,

(cid:33)

using the assumption that the algorithm outputs a bid that does not underestimate v(cid:48)
t) < 1
v(cid:48)
tγ .

t: Pv(cid:48)

t

(Bt <

39

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

We use the fact that ∀(cid:15) > 0, ∃t2(v, (cid:15)), ∀t ≥ t2(v, (cid:15)), kl
proved with similar arguments to those used to prove Lemma 23.

v, v +

(cid:16)

(cid:113) v(1−v)
F (v)t

(cid:17)

≤ 1+(cid:15)

2F (v)t which is

Altogether, we have proved

∀t ≥ max(t1((cid:15)), t2(v, (cid:15))),

Ev[(Bt − v)2] ≥

v(1 − v)
4F (v)t

(cid:32)

1 −

(cid:114) 1
4

(cid:33)

(1 + (cid:15))2 − 1/tγ

.

Let t0(v, (cid:15)) = max(t1((cid:15)), t2(v, (cid:15))). We obtain

T
(cid:88)

t=1

Ev[(Bt − v)2] ≥

T
(cid:88)

t=t0(v,(cid:15))

v(1 − v)
4F (v)t

(cid:18)

1 −

1
2

(1 + (cid:15)) − 1/tγ

(cid:19)

.

Recall that, according to Lemma 9,

RT (v) ≥

β
¯
2

T
(cid:88)

t=1

Ev[(Bt − v)2].

Hence, ∀(cid:15) > 0,

RT (v) ≥

β
¯
2

(cid:18) v(1 − v)
4

(cid:18)

1 −

1
2

(cid:19)(cid:19)

(1 + (cid:15))

log

T
t0(v, (cid:15))

− O(1).

And ∀(cid:15) > 0,

lim inf
T →∞

RT (v)
log T

≥

β
¯
2

(cid:18) v(1 − v)
4F (v)

(cid:18)

1 −

1
2

(cid:19)(cid:19)

(1 + (cid:15))

.

Since this holds for all (cid:15),

lim inf
T →∞

RT (v)
log T

≥ β
¯

(cid:18) v(1 − v)
16F (v)

(cid:19)

.

Appendix E. Proof of Theorem 5

The statement of Theorem 5is repeated here for simplicity.

√

Theorem 5 Without further assumption, the maximal regrets of UCBID, BernsteinUCBID and
T log T ). If F has a density that is bounded from below and above by non
klUCBID are O(
negative constants, the maximal regret of UCBID remains of the same order, while it is reduced to
O(T

3 log2 T ) for BernsteinUCBID and to O(log2 T ) for klUCBID.

1

40

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Proof We ﬁrst start by bounding the regret of UCBID. The UCBID strategies incurs a regret bounded
by:

(cid:34) T

(cid:88)

Ev[RT ] ≤Ev

(v − Bt)1(v < Mt < Bt)

(cid:35)

T
(cid:88)

+

P(v > Bt)

t=1

≤ Ev

≤ Ev

(cid:34) T

(cid:88)

t=1
(cid:34) T

(cid:88)

n=1

(cid:114) γ log t
2
2Nt

(cid:35)

1(Mt < Bt)

t=1
T
(cid:88)

+

t=1

(cid:32)

P

¯Vt > v +

(cid:33)

(cid:114) γ log t
2Nt

+

T
(cid:88)

t=1

P(v > Bt)

(cid:114)

2

γ log T
2n

(cid:35)

+

T
(cid:88)

t=1

(cid:32)

P

¯Vt > v +

(cid:33)

(cid:114) γ log t
2Nt

+

T
(cid:88)

t=1

P(v > Bt)

≤ 2(cid:112)γT log T + 2Cγ,

where the third inequality follows from a resampling argument close to that of Lemma 13. By
Pinsker’s inequality, this bound also trivially holds for klUCBID. Along with the bound of Theorem
1, this suggests that the point where the maximal regret of UCBID is reached is O(T − 1
2 ), under
Assumption 1.

Next, we prove the bound for the regret of BernsteinUCBID. We proved in Section B.7, that the

regret of BernsteinUCBID satisﬁes :

RT ≤ C(cid:48)

γ +

β
F (v)

8w log(3T γ)(log T + 1) +

(cid:16)

β
F (v)

(6c1 log(3T γ))2 + 1

(cid:17)

.

If v > T − 1

3 , this entails :

RT ≤ C(cid:48)

β
β
¯
If, on the other hand, v ≤ T − 1
3 ,

γ + 8

log(3T γ)(log T + 1) + βT

(cid:16)

1
3

(6c1 log(3T γ))2 + 1

(cid:17)

.

(cid:34) T

(cid:88)

Ev[RT ] ≤ Ev

(v − Bt)1(v < Mt < Bt)

+

(cid:35)

t=1


(cid:115)

Ev

2

≤

T
(cid:88)

t=1

2 ¯Wt−1 log(3tγ)
Nt−1

+

3 log(3tγ)
Nt−1

T
(cid:88)

t=1

P(v > Bt)

(17)






 ¯Vt − v ≤

P

(cid:115)

+

T
(cid:88)

t=1

¯Wt−1 log(3tγ)
Nt−1

+

3 log(3tγ)
Nt−1



 +

T
(cid:88)

t=1

P(v > Bt)

≤

≤

T
(cid:88)

n=1
T
(cid:88)

n=1

(cid:114)

(cid:34)
2

Ev

2 ¯W (n) log(3tγ)
n

+

3 log(3T γ)
n

(cid:35)

+ 2C(cid:48)
γ

(cid:114)

2

2w log(3T γ)
n

+

3 log(3T γ)
n

+ 2C(cid:48)
γ

≤ 2(cid:112)2w log(3T γ)T + 3 log(3T γ) log T + 2C(cid:48)
γ
≤ 2(cid:112)2 log(3T γ)T
3 + 3 log(3T γ) log T + 2C(cid:48)
γ

1

41

(18)

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

where the third inequality comes from a resampling argument close to the one proved in the

proof of Lemma 13, the fourth from the Jensen inequality, and the ﬁfth from w ≤ v(1 − v).

In either case, RT (v) ≤ O(T

BernsteinUCBID is reached is a O(T − 1

3 ).

1

3 log2 T ). This suggests that the point where the maximal regret of

Note that without any assumption on F and for any v ∈ [0, 1] , Inequation 18 still holds. Since
T log T , without any assumpton

w < 1 and (cid:112)log(3T γ) = O(log T ), we prove that Ev[RT ] ≤ O(
on F .

√

The bound of the worst-case regret of klUCBD under Assumption 1 directly stems from Lemma

26.

Appendix F. Proof of Theorem 6

In the main body of the paper, we stated the following theorem.

Theorem 6 If F admits a density f , that satisﬁes ∃ β
¯
regret of ETGstop satisﬁes :

, β > 0, ∀x ∈ [0, 1], β
¯

≤ f (x) ≤ β; Then the

RT (v) ≤ O(T

1

3 log2 T ),

max
v∈[0,1]

and if v >

1
1
3 ,

T

then RT ≤ 7 +

64 log(T ) + 60T −1/2
v

+

4
F (v/2)

+ β

log2 T
F (v/2)

.

We recall that ETGstop is deﬁned by the following choice of stopping times τ1 and τ0:

(cid:26)

τ1 := inf

t ∈ [1, T ] : exp(−

tLt
8

) ≤

(cid:27)

1
T 2

(cid:26)

, τ0 = inf

t ∈ [1, T ] : Ut ≤

(cid:27)

1
1
3

T

(19)

where Lt = min{v ∈ [0, ¯Vt[: exp(−tkl( ¯Vt, v)) ≤ 1/T 2} and
Ut = max{v ∈ [ ¯Vt, 1[: exp(−tkl( ¯Vt, v)) ≥ 1/T 2}.

We use the fact that this is completely equivalent to choosing the following stopping times

(cid:26)

(cid:18)

ρ1 = inf

n ∈ [1, T ] : exp

−

(cid:19)

nL(n)
8

≤

1
T 2

(cid:27)

(cid:26)

, ρ0 = inf

n ∈ [1, T ] : Uγ(n) ≤

(cid:27)

1
1
3

T

,

(20)

where the stopping times are deﬁned from the number of observations rather than the number of
auctions, because, in the ﬁrst phase the bidder always observes the value of the item, as Bt = 1.
Therefore, in particular, min(ρ1, ρ2) = min(τ0, τ1). Note however that in general max(ρ1, ρ2) (cid:54)=
max(τ0, τ1). In particular, when τ0 is reached ﬁrst, ¯Vt = ¯Vτ0, ∀t > τ0 because there is no further
observation once τ0 is reached, while this is not the case of ¯V (n) : this means that Lt will be constant
after τ0 while L(n) is not necessarily constant after τ0.

In the sequel, we will use these stopping times instead of τ0 and τ1.

42

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

F.1. Preliminary lemmas

The stopping time τ1 (respectively ρ1) is designed so that if it occurs before τ0 (respectively ρ0) then
the bids in the second phase will be larger than v/2 with high probability. We show that if all bids in
the second phase are larger than v/2, the regret in the second phase is bounded as follows.

Lemma 28 If F admits a density bounded by β then

(cid:34) T

(cid:88)

E

(cid:16)

rt1

t=ρ1

s=ρ1{ ¯V (s) ≥
∩T

(cid:17)

}

v
2

(cid:35)

1(ρ1 < ρ0)

≤

4 + β log2 T
F (v/2)

+ 1.

Proof We denote by A the advantageous event ∩T

s=ρ1{ ¯V (s) ≥ v

2 }. We ﬁrst observe that:

ρ1 < ρ0 and A =⇒ ∀t ∈ [1, T ] , Bt ≥

v
2

.

Indeed, in the ﬁrst phase, Bt = 1, and in the second phase, Bt = ¯Vt = ¯V (Nt), with Nt ≥ ρ1. Hence
it holds with high probability that if t ≥ ρ1, ∀c > 1, Nt ≥ ρ1 + F (v/2)
Indeed, a strategy playing v/2 instead of ¯Vt in this phase would obtain N (cid:48)
t victories, where N (cid:48)
t
is the sum of ρ1, and of t − ρ1 Bernoullis of expectation F (v/2), and it holds that Nt ≥ N (cid:48)
t, as
a larger bid implies a larger number of won auctions. Therefore, if t ≥ ρ1, the probability that
Nt < ρ1 + F (v/2)

(t − ρ1) conditioned on A ∩ {ρ1 < ρ0} can be bounded as follows.

(t − ρ1).

c

c

(cid:18)

P

Nt < ρ1 +

≤ P

(cid:18)

(cid:20)

= E

P

N (cid:48)

t < ρ1 +
(cid:18)

F (v/2)
c
F (v/2)
c

(cid:12)
(cid:12)
(cid:12)A ∩ {ρ1 < ρ0}
(t − ρ1)

(cid:19)

(cid:19)

(t − ρ1)

F (v/2)(t − ρ1) − (N (cid:48)

t − ρ1) >

F (v/2)(c − 1)
c

(cid:12)
(cid:12)
(cid:12)ρ1
(t − ρ1)

(cid:19)(cid:21)

(cid:20)

(cid:18)

≤ E

exp

−

2(c − 1)2(F (v/2))2
c2

(cid:19)(cid:21)

(t − ρ1)

(cid:18)

≤ exp

−

2(c − 1)2(F (v/2))2
c2

(cid:19)
t

,

where we used Hoeffding’s inequality for the second inequality. Now, we can use the following :

E [rt1{t ≥ ρ1}1 (A) 1(ρ1 < ρ0)]

(cid:20)

(cid:26)

≤ E

rt1{t ≥ ρ1}1

Nt−1 ≥ ρ1 +

F (v/2)
c

(cid:27)

(t − ρ1 − 1)

(cid:21)
1(ρ1 < ρ0)

(cid:18)

+ P

Nt−1 < ρ1 +

(cid:20)

(cid:26)

F (v/2)
c

≤ E

rt1{t ≥ ρ1}1

Nt−1 ≥ ρ1 +

(cid:18)

+ exp

−

2(c − 1)2(F (v/2))2
c2

t

(cid:19)

(t − ρ1 − 1), t ≥ ρ11(ρ1 < ρ0)

(cid:19)

F (v/2)
c

(cid:27)

(t − ρ1 − 1)

(cid:21)
1(ρ1 < ρ0)

(21)

(22)

(23)

43

,

(cid:21)

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

The ﬁrst term of the right hand side of (22) is bounded by :

(cid:20)

E

rt1{t ≥ ρ1}1{Nt−1 ≥ ρ1 +

F (v/2)
c

(cid:21)
(t − ρ1 − 1)}1(ρ1 < ρ0)

(cid:20)

(cid:20)

≤ E

E

E

(cid:20)
rt1 {t ≥ ρ1} 1

(cid:26)

Nt−1 ≥ ρ1 +

(t − ρ1 − 1)

≤ E

(cid:20) β
2

(v − Bt)21{t ≥ ρ1}1

(cid:26)

Nt−1 ≥ ρ1 +

(t − ρ1 − 1)

F (v/2)
c
F (v/2)
c

(cid:21)(cid:21)

(cid:21)

1(ρ1 < ρ0)

(cid:27) (cid:12)
(cid:12)
(cid:12)Ft−1
(cid:27)

(cid:21)
1(ρ1 < ρ0)

where the last line follows from Lemma 15. This is also clearly bounded by
(cid:27)
(cid:26)

(cid:20) β
2

E

≤ E

(v − Bt)21 {t ≥ ρ1} 1
(cid:20) β
2
(cid:32)

log T
Nt−1

1{Nt−1 ≥ ρ1 +

(cid:115)

+ P

(cid:12)v − ¯V (Nt−1)(cid:12)
(cid:12)

(cid:12) ≥

F (v/2)
c

Nt−1 ≥ ρ1 +

(t − ρ1 − 1)

1(ρ1 < ρ0)

F (v/2)
c

(t − ρ1 − 1)}1{t ≥ ρ1}1(ρ1 < ρ0)

(cid:21)

(cid:33)

, t ≥ ρ1

.

log T
Nt−1

(24)

By applying a union bound, followed by Hoeffding’s inequality,the second term of (24) is bounded
as follows

(cid:32)

P

|v − ¯V (Nt−1)| ≥

(cid:115)

log T
Nt−1

(cid:33)

, t ≥ ρ1

≤

(cid:16)

P

t−1
(cid:88)

s=1

|v − ¯V (s)| ≥

(cid:114)

log T
s

, t ≥ ρ1

(cid:17)

≤

1
T

.

Summarizing,

(cid:20)

(cid:26)

(cid:26)

E

rt1

t ≥ ρ1,

Nt−1 ≥ ρ1 +

F (v/2)
c

(cid:27)

(cid:27)(cid:21)

(t − ρ1 − 1)

, ρ1 < ρ0)
(cid:20) β
2

≤ E

c log T
F (v/2)t

(cid:21)

1{t ≥ ρ1}

+

1
T

.

Hence, when summing over T rounds,

(cid:34) T

(cid:88)

E

(cid:16)

rt1

t=ρ1

s=ρ1{ ¯V (s) ≥
∩T

(cid:17)

}

v
2

(cid:35)

1(ρ1 < ρ0)

≤

T
(cid:88)

t=1

E

(cid:20) β
2

(cid:18)

+ exp

−

c log T
F (v/2)t

(cid:21)

1{t ≥ ρ1}

+

1
T

2(c − 1)2(F (v/2))2
c2

(cid:19)

(t − ρ1)

≤

≤

β
2

β
2

c log2 T
F (v/2)t

c log2 T
F (v/2)t

+ 1 +

1
1 − exp(−2 2(c−1)2(F (v/2))2

c2

)

+ 1 +

c2
(c − 1)2F ( v
2 )

.

Picking c = 2 concludes the proof.

We claim that the stopping time τ1 (respectively ρ1) is designed so that if it occurs before τ0
(respectively ρ0) then the bids in the second phase will be larger than v/2 with high probability. The
following lemma quantiﬁes this statement.

44

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Lemma 29 The event A := ∩T

s=ρ1{ ¯V (s) ≥ v

2 } occurs with high probability and

Proof By a union bound,

P (Ac) ≤

2
T

.

P (Ac) ≤ P (v ≤ Lρ1) +

(cid:16)

P

T
(cid:88)

n=1

{v ≥ Lρ1} ∩

(cid:110) ¯V (n) <

(cid:111)

v
2

∩ {n ≥ ρ1}

(cid:17)

(25)

The second term of Equation 25 is bounded by:

(cid:16)

P

{v ≥ L(ρ1)} ∩

(cid:110) ¯V (n) <

(cid:111)

v
2

∩ {n ≥ ρ1}

(cid:17)

(cid:18)(cid:26)

≤ P

exp(−

nv
8

) ≤

(cid:27)

∩

(cid:110) ¯V (n) <

1
T 2
(cid:19)

1
T 2
1
T 2

(cid:16) ¯V (n) <

P

v
2

(cid:19)

exp(−

nv
8

)

v
2
(cid:17)

(cid:111)(cid:19)

(26)

(cid:18)

≤ 1

exp(−

(cid:18)

≤ 1

exp(−

nv
8
nv
8

) ≤

) ≤

≤

1
T 2 .

where we use Lemma 11 along with Chernoff inequality to prove that ∀n, P( ¯V (n) < v
exp(−3 nv

20 ) ≤ exp(− nv

8 ).

2 ) ≤

Let us go back to the probability of the unwanted event Ac.

(cid:16)

P

∪T

s=ρ1

(cid:110) ¯V (s) <

(cid:111)(cid:17)

v
2

≤ P(v ≤ L(ρ1)) +

(cid:16)

P

T
(cid:88)

t=1

{v ≥ L(ρ1)} ∩

(cid:110) ¯V (s) <

(cid:111)

v
2

∩ {t ≥ ρ1}

(cid:17)

+

1
T

,

≤

≤

1
T
2
T

by another union bound and thanks to Equation (26).

The expectation of ρ1 and ρ0 are of critical importance. Indeed, the regret is larger than the
(1 − v)2/2. In the following lemma, we show in

expectation of their minimum multiplied by β
¯
particular that the expectation of τ1 is proportional to the inverse of v.

Lemma 30 The expectation of ρ1 is bounded by

E[ρ1] ≤

64 log(T ) + 60T −1/2
v

+ 1.

Proof First note that by Pinsker’s inequality

L(n) ≥ ¯V (n) −

(cid:114)

log(T )
2n

45

(27)

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

and by the generalized Pinsker inequality,

kl(p, q) ≥

(p − q)2
2 max{r(1 − r) : r ∈ (p, q)}

.

If ¯V (t) ≤ 1/2 then

L(n) ≥ ¯V (n) −

(cid:114)

2 ¯V (n) log(T )
n

.

(28)

Let n0 = (cid:100)64 log(T )/v(cid:101), and n ≥ n0.

• If ¯V (n) ≥ 1/2, then

L(n) ≥ ¯V (n) −

(cid:114)

log(T )
2n

≥

1
2

−

(cid:115)

log(T )
16 log(T )

=

1
4

,

and hence nL(n) ≥ n/4 ≥ 16 log(T ).

• If v ≤ ¯V (n) ≤ 1/2, then

L(t) ≥ ¯V (n) −

(cid:115)

2 ¯V (n) log(T )
8 log(T )/v

≥ ¯V (n) −

(cid:112)v ¯V (n)
2

≥ ¯V (n) −

¯V (n)
2

=

¯V (n)
2

≥

v
2

,

and hence nL(n) ≥ 64 log(T )/v × v/2 > 64 log(T ) > 16 log T .

• Otherwise, ¯V (n) < min(v, 1/2) and hence

L(n) ≥ ¯V (n) −

(cid:114)

2 ¯V (n) log(T )
n

(cid:115)

≥ ¯V (n) −

2v log(T )
8 log(T )/v

= ¯V (n) −

v
2

,

and hence L(n) ≤ 16 log(T )/n implies

¯V (n) ≤

v
2

+

16 log(T )
n

=

v
2

+

16 log(T )
64 log(T )/v

=

3v
4

.

To summarize: Pv

(cid:0)n L(n) ≤ 16 log(T )(cid:1) ≤ Pv

(cid:0) ¯V (n) ≤ 3v/4) ≤ exp (cid:0) − n kl(3v/4, v)(cid:1).

Lemma 11 yields for α = −1/4

(cid:18)

Pv

¯V (n) ≤

(cid:19)

3v
4

(cid:18)

≤ exp

−

(cid:19)

3vn
88

< exp

(cid:16)

−

(cid:17)

vn
30

.

46

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

To conclude, we bound the expectation of ρ1 as :

Ev[ρ1] ≤

∞
(cid:88)

n=1

Pv(ρ1 ≥ n)

∞
(cid:88)

≤ n0 +

Pv(ρ1 ≥ n)

n=n0+1

64 log(T )
v

+

(cid:16)

exp

∞
(cid:88)

n=n0

64 log(T )
v

64 log(T )
v

+ exp

(cid:16)

−

(cid:18)

+ exp

−

+ 1

−

(cid:17)

vn
30
(cid:17) ∞
(cid:88)

vn0
30
n=n0
(cid:24) 64 log(T )
30

64 log(T ) + 60T −1/2
v

+ 1 .

=

≤

≤

≤

exp

(cid:16)

−

(cid:17)

vn
30

+ 1

(cid:25)(cid:19)

1
1 − exp(−v/30)

+ 1

since 1/(1 − exp(−u)) ≤ 2/u for 0 ≤ u ≤ 1.

The following lemma shows that the expectation of ρ0 is small when v ≤ 1

3 T

1
3 .

Lemma 31 If v ≤ 1

3 T

1

3 , the expectation of the stopping time ρ0 is bounded by:

Proof We use the following classical equality

Ev[ρ0] ≤ 32T

1
3 log T + 1.

Ev[ρ0] =

T
(cid:88)

n=0

Pv(ρ0 > n).

We can bound the probabilities in the latter sum by:

Pv(ρ0 > n) ≤ Pv

U (n) >

(cid:18)

(cid:18)

¯V (n) >

≤ Pv

(cid:19)

1
1
3
1

T

1
3

2T

(cid:19)

(cid:18)

+ Pv

U (n) − ¯V (n) >

1

1
3

2T

, ¯V (n) <

(cid:19)

.

1

1
3

2T

By Lemma 10, kl( ¯V (n), U (n)) = 2 log T

n ≥ 3( ¯V (n)−U (n))2

2(2U (n)+3 ¯V (n)) ≥

(cid:18)

2

¯V (n) < 1
2T
This implies that ∆(n) := U (n) − ¯V (n) satisﬁes

1
3

.

4 log T
3n

(cid:18) 3
2T

1
3

(cid:19)

+ 2∆(n)

− ∆(n)2 ≥ 0

47

3( ¯V (n)−U (n))2

+2(U (n)− ¯V (n))

3

2T

1
3

(cid:19) , when

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

which yields

∆(n) ≤

4 log T
3n

+

(cid:115)

log2 T
9n2 +

8 log T
3n

3

1
3

2T

.

This means that, if log T

n ≤ 1

32T

,

1
3

∆(n) ≤

1

1
3

2T

Hence, if n > 32T

1
3 log T ,

Pv(ρ0 > n) ≤ Pv

(cid:18)

¯V (n) >

(cid:18)

(cid:18)

(cid:19)

1

2T

1
3
1

2T

(cid:19)

(cid:19)

n

1
3

(cid:19)

(cid:19)

n

(cid:18) 1
3T

1

1
3

2T

,

1
3
(cid:19)

≤ exp

−kl

v,

(cid:18)

≤ exp

−kl

(cid:18)

≤ exp

−

1

32T

1
3

n

,

(29)

where we used the second inequality of Lemma 11, in the last inequality.
We conclude that Ev[ρ0] < 32T
exp(−u)) ≤ 2/u for 0 ≤ u ≤ 1.

3 log T + 64T −32/32T

1
3 < 32T

1

1

3 log T + 64T − 2

3 , since 1/(1 −

In order to show that the regret of ETGstop is bounded by O(T

1
3 ) when v is small, we prove that

the probability of ρ1 < ρ0 is small, for v small enough.

Lemma 32 If v < 1

2 T

1
3 ,

Pv(ρ1 < ρ0) ≤ 64T − 2

3 + 32T

1
3 log T

1
T 2

1
3 .

Proof Set v < 1
2 T
Recall that Pv(L(n) > v) ≤ 1
Pv(nL(n) > 16 log T ) ≤ 1
T 2 .

T 2 . Hence if n ≤ 32T

1

3 log T , then 16 log T

n

> 1
2T

1
3

> v, and

48

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

Therefore Pv(ρ1 < 32T

1

3 log T, ρ1 < ρ0) ≤ 32T

1

3 log T 1

T 2 . Moreover,

(cid:16)

Pv

ρ1 > 32T

1

3 log T, ρ1 < ρ0

(cid:17)

(cid:16)

≤ Pv

∃n, n > 32T

1

3 log T, U (n) > T − 1

3

(cid:17)

≤

≤

T
(cid:88)

(cid:16)

Pv

U (n) > T − 1

3

(cid:17)

n=32T

1
3 log T

T
(cid:88)

(cid:18)

exp

−

(cid:19)

1
32

T − 1

3

n=32T

≤ 64T

1
3 log T
1
T 32/32
≤ 64T − 2
3 ,

1
3

where we used Equation (29) in the third inequality, and 1/(1 − exp(−u)) ≤ 2/u for 0 ≤ u ≤ 1 in
the fourth inequality.

F.2. Proof of Theorem 6

We separately study the cases where v ≤ 1
3T

1

,

≤ v ≤ 1
T

1
3

and v ≥ 1
T

1
3

, and prove that in each

case, RT (v) ≤ O(T

1

3 log2 T ). For v ≥ 1
T

1
3

3T

1
1
3
3
, we also prove

RT (v) ≤ 7 +

64 log(T ) + 60T −1/2
v

+

4
F (v/2)

+ β

log2 T
F (v/2)

.

F.2.1. Case when v ≤ 1
3T

1
3

.

When v ≤ 1
3T

1
3

, we bound the regret as follows

RT (v) ≤ T Pv(ρ1 < ρ0) + Ev[ρ0] + Ev

1(ρ0 < ρ1)

(cid:34)

(cid:35)

rt

T
(cid:88)

t=ρ0

1

3 log T + 64T − 2

3 +

1
3

T

1
9

≤ T Pv(ρ1 < ρ0) + Ev[ρ0] + T × (v)2

(cid:18)

≤ T

64T − 2

3 + 32T

1
3 log T

(cid:19)

1
T 2

+ 32T

≤ 64 + 65T

1
3 + 33T

1
3 log T,

thanks to Lemmas 32 and 31.

49

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

F.2.2. Case when 1
3T

1
3

≤ v ≤ 1
T

1
3

.

(cid:34)

RT (v) ≤ Ev

1(ρ1 < ρ0)

T
(cid:88)

(cid:35)

(cid:34)

rt

+ Ev

1(ρ0 < ρ1)

t=1
≤ Ev[ρ01(ρ0 < ρ1)] + Ev[ρ11(ρ1 < ρ0)]

(cid:35)

rt

T
(cid:88)

t=1

+ Ev

(cid:34) T

(cid:88)

t=ρ1

(cid:35)

rt1(ρ1 < ρ0)

+ Ev

(cid:35)

rt1(ρ0 < ρ1)

(cid:34) T

(cid:88)

t=ρ0

(cid:32)

≤ Ev[ρ1] + 2 max

Ev

(cid:35)

rt1(ρ1 < ρ0)

, Ev

(cid:34) T

(cid:88)

t=ρ1

(cid:35)(cid:33)

rt1(ρ0 < ρ1)

.

(cid:34) T

(cid:88)

t=ρ0

The expected regret in the second phase when ρ0 has been reached ﬁrst is bounded by

Ev

(cid:34) T

(cid:88)

t=ρ0

(cid:35)

rt1(ρ0 < ρ1)

≤ βT × T − 2

3 ≤ βT

1
3 ,

while the expected regret in the second phase when ρ1 has been reached ﬁrst is bounded by :

Ev

(cid:34) T

(cid:88)

t=ρ0

(cid:35)

rt1(ρ0 < ρ1)

≤ Ev

(cid:34) T

(cid:88)

t=ρ1

(cid:16)

rt1

∩T

s=ρ1

(cid:110) ¯V (s) ≥

(cid:111)(cid:17)

v
2

1(ρ1 < ρ0)

(cid:35)

(cid:111)(cid:17)

v
2

T
(cid:88)

+

(cid:16)

Pv

∪T

s=ρ1

(cid:110) ¯V (s) <

≤

≤

t=ρ1
4 + β log2 T
F (v/2)

1
3 +

T

24
β
¯

6β
β
¯

+ 3

1

3 log2 T,

T

thanks to Lemmas 29 and 28. Therefore, RT (v) ≤ 186 + 192T
to Lemma 30.

1

3 + 48
β
¯

T

1

3 + 12β
β
¯

1

3 log2 T, according

T

50

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

F.2.3. Case when v ≥ 1
T

1
3

.

(cid:34)

RT (v) ≤ Ev

1(ρ0 < ρ1)

T
(cid:88)

t=1

(cid:35)

(cid:34)

rt

+ Ev

1(ρ1 < ρ0)

(cid:35)

rt

T
(cid:88)

t=1

≤ T P(ρ0 < ρ1) + Ev

(cid:35)

rt1(ρ1 < ρ0)

(cid:34) T

(cid:88)

t=1

≤ 1 + Ev[ρ1] + Ev

(cid:34) T

(cid:88)

t=ρ1

(cid:16)

rt1

∩T

s=ρ1

(cid:110) ¯V (s) ≥

(cid:111)(cid:17)

v
2

1(ρ1 < ρ0)

(cid:35)

+

T
(cid:88)

t=ρ1

(cid:16)

P

∪T

s=ρ1

(cid:110) ¯V (s) <

(cid:111)(cid:17)

.

v
2

We conclude that

RT ≤ 7 +

64 log(T ) + 60T −1/2
v

+

4
F (v/2)

+ β

log2 T
F (v/2)

,

thanks to Lemmas 30, 28 and 29. In particular :

RT ≤ 7 + 60T

1
3 +

1
3 +

T

8
β
¯

2β
β
¯

1

3 log2 T.

T

Appendix G. Proof of Theorem 7

We restate the theorem for the sake of readability.

Theorem 7 If F admits a density lower bounded by β
¯
(cid:16)

sup
v∈[0,1]

RT (v) ≥

β
¯
4

> 0, the regret of any ETG strategy satisﬁes

(cid:17)

1
3 − 1

.

T

Proof Let v = aT − 1
an ETG strategy, and let τm = min(τ0, τ1).
Either Pv[τm > T

3 ] > 1/2 and hence E[τm] ≥ T

1

1
3

3 . ETG strategies are fully characterized by their choice of τ0 and τ1. Let us ﬁx

2 , which yields RT (v) ≥ β
¯

(1 − aT − 1

3 )2 T

1
3

2 ≥

51

EFFICIENT ALGORITHMS FOR STOCHASTIC REPEATED SECOND-PRICE AUCTIONS

T

1
3 −2a
2

β
¯

, or Pv(τm < T

1

3 ) ≥ 1

2 , and in this case,

Pv( ¯Vτm = 0, τm < T

1
3 ) ≥

1
T
3
(cid:88)

Pv( ¯Vτm = 0|τm = k)Pv(τm = k)

k=1
1
T
3
(cid:88)

(1 − aT − 1

3 )kPv(τm = k)

k=1
1
T
3
(cid:88)

exp(−a)Pv(τm = k)

k=1
1
2

exp(−a),

≥

≥

≥

where the third inequality comes from the fact that T

1

3 log(1 − aT − 1

3 ) ≥ −a.

If ¯Vτm = 0, whatever the order in which τ0 and τ1 are reached, every bid in the second phase
3 ) ≥ 1
2 ,

3 − 1). Hence if Pv(τ < T

3 )a2T − 2

(T − T

a2(T

1

1

1

will be zero. Therefore, RT (v) ≥ β
¯

3 ≥ β
¯
exp(−a)a2 (cid:16)

1
3 − 1

(cid:17)

.

T

RT (v) ≥

β
¯
2

To conclude, we pick a = 2 to obtain

sup
v∈[0,1]

RT (v) ≥ min

(cid:18) β
¯
2

× 4 exp(−2)

(cid:16)

T

(cid:17)

1
3 − 1

(cid:19)

1
3 − 2

,

β
¯
2

T

≥

β
¯
4

(cid:16)

1
3 − 1

T

(cid:17)

.

52

